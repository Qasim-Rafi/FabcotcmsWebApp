<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="line-spin-fade" [fullScreen]="true">
    <p style="color: white"> Loading... </p>
</ngx-spinner>
<ngx-scrolltop
  [backgroundColor]="'#212529'"
  [symbolColor]="'#fafafa'"
  [size]="35"
  [mode]="'classic'"
  position="right"
  theme="bluegrey">
</ngx-scrolltop>
<div class="content-header">
    <div class="row">
        <div class="col-sm-12 col-md-6 col-lg-8">
           
            <h2 class="row wrapper page-header font-weight-light"> Contract Details
                <div class="ml-2 descr"> Show all the details of business contract</div>
                <span class="ml-3 font-weight-light">{{contractData.buyerName}} </span>
                <span class="text-muted">(Con # {{contractData.autoContractNumber}} )</span>
                <span class="font-weight-bold float-right"><u>{{checkR}}</u></span>
            </h2>
        </div>

        <div class="col-sm-12 col-md-6 col-lg-4">
            <ol class="breadcrumb flt-RnL">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Contract Details</li>
            </ol>
        </div>

    </div>
</div>



<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <!-- Info boxes -->
        <div class="row">

            <div class="col-12 col-sm-6 col-md-6 col-xl-3 pt-2">
                <div class="topbox-1">
                    <div class="topbox-margin-top-text border-bottom"> Completion Status
                        <span class="badge badge-primary float-right">Active</span>
                        <span class="topbox-margin-end-text">
                            &nbsp;
                        </span>
                    </div>

                    <div class="box-body">
                        <div class="mid-text text-primary" *ngIf="contractData.status =='BillAwaited'">100%</div>
                        <div class="mid-text text-primary" *ngIf="contractData.status !='BillAwaited'">{{check}}%</div>

                        <br>
                            <ngb-progressbar *ngIf="contractData.status !='BillAwaited'" class="progress-bar progress text_Navy" role="progressbar" aria-valuenow="15"
                            aria-valuemin="0" aria-valuemax="100" [value]="check"></ngb-progressbar>
                            <ngb-progressbar *ngIf="contractData.status =='BillAwaited'" class="progress-bar progress text_Navy" role="progressbar" aria-valuenow="15"
                            aria-valuemin="0" aria-valuemax="100" [value]="100"></ngb-progressbar>
                        <small class="topbox-margin-end-text">Last Action @</small>
                        <span class="text_Navy float-right ">19-Dec-2016 11:50</span>
                    </div>




                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>

            <div class="col-12 col-sm-6 col-md-6 col-xl-3 pt-2">
                <div class="topbox-1">
                    <div class="topbox-margin-top-text border-bottom"> Order Quantity
                    </div>

                    <div class="box-body">
                        <div class="mid-text text-info">{{contractCostingData.quantity}}
                            <span class="topbox-margin-end-text">
                                {{contractCostingData.quantityUOMName}}
                            </span>   
                        </div>
                            
                        <br>
                        <ngb-progressbar class="progress-bar progress text_Navy" type="warning" role="progressbar" aria-valuenow="15"
                        aria-valuemin="0" aria-valuemax="100" [value]="(contractData.saleInvoiceQuantity/contractCostingData.quantity)*100"></ngb-progressbar>
                        <small class="topbox-margin-end-text">
                            <i class="fas fa-truck"></i>
                            Total Delivered
                        </small>
                        <span class="text_Navy float-right ">{{contractData.saleInvoiceQuantity}}
                            {{contractCostingData.quantityUOMName}}
                        </span>
                    </div>

                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>

            <div class="col-12 col-sm-6 col-md-6 col-xl-3 pt-2">
                <div class="topbox-1">
                    <div class="topbox-margin-top-text border-bottom"> Sale Invoice
                    </div>


                    <div class="box-body">
                        <div class="mid-text  text-danger">{{contractData.orderAmount}}
                            <span class="topbox-margin-end-text">
                                {{contractCostingData.rateCurrencyName}}
                            </span>
                        </div>
                        <br>
                        <ngb-progressbar class="progress-bar progress text_Navy" type="danger" role="progressbar" aria-valuenow="15"
                        aria-valuemin="0" aria-valuemax="100" [value]="(contractData.saleInvoiceAmount/contractData.orderAmount)*100"></ngb-progressbar>
                        <small class="topbox-margin-end-text">
                            <i class="far fa-money-bill-alt"></i>
                            Invoice Sent
                        </small>
                        <span class="text_Navy float-right ">{{contractData.saleInvoiceAmount}}
                            {{contractCostingData.rateCurrencyName}}
                        </span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>

            <div class="col-12 col-sm-6 col-md-6 col-xl-3 pt-2">
                <div class="topbox-1">
                    <div class="topbox-margin-top-text border-bottom">Billing / Payment
                        <!-- <span class="badge badge-info float-right">Contract</span> -->
                    </div>

                    <div class="box-body">
                        <div class="mid-text text-success">{{contractData.billingPayment}}</div>
                        <span class="topbox-margin-end-text">
                            &nbsp;
                        </span>
                        <br>
                        <ngb-progressbar class="progress-bar progress text_Navy" type="success" role="progressbar" aria-valuenow="15"
                        aria-valuemin="0" aria-valuemax="100" [value]="25"></ngb-progressbar>
                        <small class="topbox-margin-end-text">
                            <i class="far fa-money-bill-alt"></i>
                            Amount Received
                        </small>
                        <span class="text_Navy float-right ">0.00 {{contractCostingData.rateCurrencyName}}

                        </span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
        </div>
        <!-- /.row -->
      <div class="buttonOuter">
        <div class="row py-3 justify-content-end">
            <div class="col-md-8 " *ngIf="contractData.status =='OnHold'">
                <button class="btn btn-warning border-rounded px-3 mr-2 text-white" (click)="statusOpen()">
                    <i class="fas fa-level-down-alt"></i>
                    Contract is currently On-Hold, Click to make it Active
                </button>
            </div>

            <div class="col-md-8 " *ngIf="contractData.status == 'Open' ">
                <button class="btn btn-danger btn-sm border-rounded px-3 mr-1 mrg-btm" 
                (click)="deleteContract(contractId)" 
                >
                    <i class="far fa-trash-alt"></i>
                    Delete
                </button>
                <button class="btn btn-danger btn-sm border-rounded px-3 mr-1 mrg-btm"
                    (click)="cancelContract()">
                    <i class="fas fa-times"></i>
                    Cancel
                </button>
                <button class="btn btn-warning btn-sm border-rounded px-3 mr-1 text-white mrg-btm"
                    (click)="statusform('ContractOnHold','OnHold','contract')">
                    <i class="fas fa-level-down-alt"></i>
                    On-Hold
                </button>
                    <button *ngIf="(loggedInDepartmentName== 'Yarn Export' || loggedInDepartmentName == 'Yarn Import') && revised === true " class="btn btn-info btn-sm border-rounded px-3 mr-1 mrg-btm"   (click)="notRevisedMethod()">
                        <i class="far fa-clone"></i>
                        Revised
                    </button>
                    <button *ngIf="(loggedInDepartmentName != 'Yarn Export' && loggedInDepartmentName != 'Yarn Import' ) && revised === true" class="btn btn-info btn-sm border-rounded px-3 mr-1 mrg-btm"  (click)="notRevisedMethod()"  >
                        <i class="far fa-clone"></i>
                       <span > &nbsp; Revised</span> 
                       <!-- <span *ngIf = "!revised" (click)="notRevisedMethod()">&nbsp;Not Revised</span>  -->

                    </button>

                    <button *ngIf="revised === false" class="btn btn-info btn-sm border-rounded px-3 mr-1 mrg-btm"  (click)="reviseContract()"  >
                        <i class="far fa-clone"></i>
                       <!-- <span *ngIf = "!revised"> &nbsp; Revised</span>  -->
                       <span >&nbsp;Not Revised</span> 

                    </button>
               
                <button class="btn btn-outline-primary btn-sm border-rounded px-3 mr-1 mrg-btm"
                    (click)="closeContract()">
                    <i class="fas fa-check"></i>
                    Closed
                </button>
                <button class="btn btn-info btn-sm border-rounded px-3 mr-1 mrg-btm" (click)=" readyForBill()">
                    <i class="fas fa-check"></i>
                    Ready For Bill
                </button>
            </div>
            <div class="col-md-8 " *ngIf="contractData.status =='BillAwaited'">
                <button class="btn btn-info border-rounded px-3 mr-2 text-white" (click)="statusOpen()">
                    <i class="fas fa-level-down-alt"></i>
                    Re-Open Contract
                </button>
                <button class="btn btn-warning border-rounded px-3 mr-2 text-white">
                    <i class="fas fa-level-down-alt"></i>
                    Contract Held For Billing
                </button>
            </div>
            <div class="col-md-8 " *ngIf="contractData.status =='Closed'">
                <button class="btn btn-info border-rounded px-3 mr-2 text-white" (click)="statusOpen()">
                    <i class="fas fa-level-down-alt"></i>
                    Re-Open Contract
                </button>
                <button class="btn btn-warning border-rounded px-3 mr-2 text-white">
                    <i class="fas fa-level-down-alt"></i>
                    Contract Closed
                </button>
            </div>
            <div class="col-md-4 text-right ">
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Yarn Local'" (click)="getPrintData('yarnLocalB')">
                    <i class="fas fa-print"></i>
                    Buyer
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Fabric Local'" (click)="getPrintData('fabricLocalB')">
                    <i class="fas fa-print"></i>
                    Buyer
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Yarn Local'" (click)="getPrintData('yarnLocalS')">
                    <i class="fas fa-print"></i>
                    Seller
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Fabric Export'" (click)="getPrintData('fabricExportB')">
                    <i class="fas fa-print"></i>
                    Buyer
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Fabric Export'" (click)="getPrintData('fabricExportS')">
                    <i class="fas fa-print"></i>
                    Seller
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Fabric Local'"  (click)="getPrintData('fabricLocalS')">
                    <i class="fas fa-print"></i>
                    Seller
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Yarn Import'" (click)="getPrintData('supplier')">
                    <i class="fas fa-print"></i>
                  Supplier
                </button>
                <!-- <button class="btn btn-outline-info border-rounded btn-sm px-3 mr-1">
                    <i class="fas fa-print"></i>
                    S
                </button>
                <button class="btn btn-outline-info border-rounded btn-sm px-3 mr-1">
                    <i class="fas fa-print"></i>
                    S2
                </button> -->
            </div>
        </div>
    </div>
        <div class="card ibox-content">
            <div class="row">
                <div class="col-md-12">
                    <nav>
                        <div class="nav nav-pills " id="nav-tab" role="tablist">

                            <a class="nav-item nav-link active " id="nav-Details-tab" data-toggle="tab"
                                href="#nav-Details" role="tab" aria-controls="nav-Details" aria-selected="true">
                                Details</a>
                                <a class="nav-lcInfo nav-link " *ngIf="loggedInDepartmentName == 'Yarn Export'  || loggedInDepartmentName == 'Fabric Export' || loggedInDepartmentName == 'Yarn Import'"
                                id="nav-lcInfo-tab" data-toggle="tab" href="#nav-lcInfo" role="tab"
                                aria-controls="nav-lcInfo" aria-selected="false">L/C Info &nbsp;
                                <span class="badge badge-pill badge-primary">{{rows5.length}}</span>
                                </a>

                            <a class="nav-delivery nav-link " *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Fabric Export' || loggedInDepartmentName == 'Yarn Import'"
                                id="nav-delivery-tab" data-toggle="tab" href="#nav-delivery" role="tab"
                                aria-controls="nav-delivery" aria-selected="false">Delivery TL &nbsp;<span
                                    class="badge badge-pill badge-primary">{{deliveryData.length}}</span></a>

                            <!-- <a class="nav-dispatches nav-link " *ngIf="loggedInDepartmentName=='Fabric Local'"
                                id="nav-dispatches-tab" data-toggle="tab" href="#nav-dispatches" role="tab"
                                aria-controls="nav-dispatches" aria-selected="false">Dispatches &nbsp;<span
                                    class="badge badge-pill badge-primary">{{dispatchData.length}}</span></a> -->

                            <a class="nav-prodPlan nav-link " *ngIf="loggedInDepartmentName=='Fabric Local'  || loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Fabric Export'"
                                id="nav-prodPlan-tab" data-toggle="tab" href="#nav-prodPlan" role="tab"
                                aria-controls="nav-prodPlan" aria-selected="false">Prod Plan &nbsp;
                                <span class="badge badge-pill badge-primary">{{rows5.length}}</span>
                                </a>

                            <a  class="nav-item nav-link " id="nav-Sale-tab" data-toggle="tab" href="#nav-Sale"
                                role="tab" aria-controls="nav-Sale" aria-selected="false">Sale Invoice &nbsp;<span
                                    class="badge badge-pill badge-primary">{{saleInvoice.length}}</span></a>

                                    <a *ngIf="contractData.status == 'OnHold'|| loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import' || loggedInDepartmentName == 'Yarn Local'" class="nav-item nav-link " id="nav-bill-tab" data-toggle="tab" href="#nav-bill"
                                    role="tab" aria-controls="nav-bill" aria-selected="false">Bill & Payment &nbsp;<span
                                        class="badge badge-pill badge-primary" ></span></a>

                            <a class="nav-item nav-link " id="nav-Documents-tab" data-toggle="tab" href="#nav-Documents"
                                role="tab" aria-controls="nav-Documents" aria-selected="false">Documents
                                <span class="badge badge-pill badge-primary">{{Documents.length}}</span>
                            </a>

                            <a class="nav-item nav-link " *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Fabric Export'  || loggedInDepartmentName == 'Yarn Import'"
                                id="nav-Notes-tab" data-toggle="tab" href="#nav-Notes" role="tab"
                                aria-controls="nav-Notes" aria-selected="false">Notes &nbsp;<span
                                    class="badge badge-pill badge-primary">{{rows3.length}}</span></a>

                        </div>
                    </nav>
                </div>
            </div>

            <hr>

            <div class="tab-content" id="nav-tabContent">

                <!---------- Contract Details Tab ---------->

                <div class="tab-pane fade show active" id="nav-Details" role="tabpanel"
                    aria-labelledby="nav-Details-tab">



                    <div class="row">
                    
                        <div class="col-md-12">
                    
                            <div class="card bg-light shadow mb-4">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="row my-3">
                    
                                <div class="col-md-8">
                                    <div class="h2 ">
                                        <span><i class="fas fa-flag mr-3 text-secondary"></i>
                                            <span class="text-right text_Navy">{{contractData.autoContractNumber}}
                                            </span></span>
                                    </div>
                                </div>
                    
                                <div class="col-md-4 text-right">
                    
                    
                                    <button class="btn btn-primary btn-sm" [ngClass]="{ noDisplay : reminderToggle==true }"
                                        (click)="reminderToggle = !reminderToggle">
                                        <i class="far fa-bell"></i> No Reminder Set</button>
                    
                                    <button class="btn btn-outline-secondary btn-sm ml-1" [ngClass]="{ noDisplay : reminderToggle==true }">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                    
                    
                                    <div [ngClass]="{ noDisplay : reminderToggle == false }">
                                        <button class="btn btn-white float-right btn-xs" (click)="toggle()">
                                            <i class="fas fa-times"></i>
                                        </button>
                    
                                        <button class="btn btn-primary btn-xs" (click)=" AddReminder(); toggle()"> <i
                                                class="fas fa-check"></i>
                                        </button>
                                    </div>
                    
                    
                    
                                    <form #rem="ngForm" novalidate>
                                        <div class="col-md-12">
                                            <div [ngClass]="{ noDisplay : reminderToggle==false }">
                                                <input required class="form-control" ngbDatepicker #reminderDate="ngbDatepicker"
                                                    (click)="reminderDate.toggle()" placeholder="Reminder" [(ngModel)]="data.contractUpDate"
                                                    name="contractUpDate" [ngClass]="{'error': contractUpDate.invalid && rem.submitted }"
                                                    #contractUpDate="ngModel" />
                                            </div>
                                        </div>
                                    </form>
                    
                    
                    
                                    <div class="col-md-12 pt-2" *ngFor="let i of reminderData">
                                        <div class="text_Navy h5 mb-0">{{i.contractUpDate}}
                                            <button class="btn deleteIconBack " (click)="deleteReminder(i)"><i
                                                    class="far fa-trash-alt"></i></button>
                                        </div>
                    
                    
                                    </div>
                    
                    
                    
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                    
                    
                                        <div class="col-md-4 text-right">Status &amp; Stage:</div>
                                        <div class="col-md-8">
                    
                                            <span class="badge badge-primary" *ngIf="contractData.active == true">Active</span>
                                            <span class="badge badge-secondary" *ngIf="contractData.active == false">Inactive</span>
                                            <div class="badge badge-info ml-1" *ngIf="contractData.status == 'Open'">OPEN
                                            </div>
                                            <div class="badge badge-warning ml-1" *ngIf="contractData.status == 'OnHold'">
                                                On-Hold</div>
                                                <div class="badge badge-info ml-1" *ngIf="contractData.status == 'BillAwaited'">
                                                    Bill Awaited</div>
                                                    
  <div class="badge badge-info ml-1" *ngIf="contractData.status == 'Closed'">
    Closed</div>
    <div class="badge badge-info ml-1" *ngIf="contractData.status == 'Billed'">
        Billed</div>
                                            <!-- <button class="btn "><i class="fas fa-history "></i></button> -->
                                            <button class="btn btn-outline-secondary btn-xs ml-1"><i class="fas fa-history "></i></button>
                                            <button class=" btn btn-sm btn-danger p-1 btnsm-f ml-1" *ngIf="contractData.isApproved == false"
                                                (click)="approveContract()">Click
                                                to Approve</button>
                                            <button class="  btn btn-sm btn-primary p-1 btnsm-f ml-1"
                                                *ngIf="contractData.isApproved == true">Approved</button>
                                                <div class="mid-text" *ngIf="contractData.status =='isApproved'">60%</div>
                    
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <span>Contract On:</span> &nbsp;
                                    <span class="text_Navy font-weight-bold">
                    
                                        <i class="far fa-clock "></i>
                                        <span> {{contractData.createdDateTime}}</span>
                    
                                    </span>
                                </div>
                    
                            </div>
                                </div>
                            </div>
                           
                            <!-- <br> -->
                    
                    
                    
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary">General Information</span>
                                    </div>
                    
                                </div>
                            </div> -->
                    <hr>
                            <div class="card bg-light shadow mb-4">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="pb-2">
                                <span class="badge badge-primary">General Information</span>
                            </div>


                            <!-- <div class="tab-content" id="nav-tabContent"> -->
                    
                            <!-- -------General Information Tab 1----------- -->
                            <!-- <div class="tab-pane fade show active" id="nav-general" role="tabpanel"
                                                    aria-labelledby="nav-general-tab"> -->
                    
                           <!--  <div class="row">
                                <div class="col-md-12 mb-2 py-1">
                    
                                    <div class="col-sm-12 text-muted">
                                                                <h4 class="font-weight-light">
                                                                    General Information
                                                                </h4>
                                                            </div>
                    
                                </div>
                            </div> -->
                    
                            <div class="row ">
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-4">Contract Owner:</dt>
                                        <dd class="col-sm-6 clr">
                                            <b> <span (click)="contractOwner()"> {{contractData.contractOwner}} </span> </b>
                                        </dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4">Created By:</dt>
                                        <dd class="col-sm-6">{{contractData.createdByName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4"> Last Updated By:</dt>
                                        <dd class="col-sm-6">{{contractData.updatedByName}}</dd>
                                    </dl>
                                </div>
                    
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-4">Contract No:</dt>
                                        <dd class="col-sm-6">{{contractData.autoContractNumber}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4">Created On:</dt>
                                        <dd class="col-sm-6">
                                            <i class="far fa-calendar-alt"></i>
                                            {{contractData.createdDateTime}}
                                        </dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4"> Last Updated On:</dt>
                                        <dd class="col-sm-6">
                                            <i class="far fa-calendar-alt"></i>
                                            {{contractData.updatedDateTime}}
                                        </dd>
                                    </dl>
                                </div>
                    
                            </div>
                    </div>
                    </div>
                            <!-- </div> -->
                    
                            <!-- -------Parties Tab 2----------- -->
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary"> Parties</span>
                                    </div>
                    
                                </div>
                            </div> -->
                            <hr>
                            <div class="card bg-light shadow mb-4">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="pb-2">
                                <span class="badge badge-primary">Parties</span>
                            </div>
                    
                    
                            <div class="row">
                                <div class="col-md-6">
                    
                                    <dl class="row">
                                        <dt class="col-sm-4">Purchase Order #:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPartiesData.poNumber}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4">Buyer Name:</dt>
                                        <dd class="col-sm-6">{{contractPartiesData.buyerName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4"> Buyer POC:</dt>
                                        <dd class="col-sm-6">{{contractPartiesData.buyerPOCName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4"> Supplier Name:</dt>
                                        <dd class="col-sm-6">{{contractPartiesData.sellerName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4"> Supplier POC:</dt>
                                        <dd class="col-sm-6"> {{contractPartiesData.sellerPOCName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4">Supplier Contract #:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPartiesData.sellerContract}}</dd>
                                    </dl>
                    
                                </div>
                    
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-4"> PO Date:</dt>
                                        <dd class="col-sm-6">
                                            <i class="far fa-calendar-alt"></i>
                                            {{contractPartiesData.poDateToDisplay}}
                                        </dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4">Approved On:
                                        </dt>
                                        <dd class="col-sm-6">
                                            <i class="far fa-calendar-alt"></i>
                                            {{contractData.approvedOn}}
                                        </dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4">Approved By:
                                        </dt>
                                        <dd class="col-sm-6">
                                            <i class="fas fa-user-tie"></i>
                                            {{contractData.approvedByName}}
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export'  || loggedInDepartmentName == 'Yarn Import'">
                                        <dt class="col-sm-4">LC Opener:
                                        </dt>
                                        <dd class="col-sm-6">
                                           
                                          
                                        </dd>
                                    </dl>
                                </div>
                    
                            </div>
                    
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2" (click)="editParties(contractData)">
                                        <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                                </div>
                            </div>
                               <hr *ngIf = "loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Yarn Import'">
                            <div class="card bg-light shadow mb-4"  *ngIf = "loggedInDepartmentName == 'Yarn Export'  || loggedInDepartmentName == 'Yarn Import'">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="pb-2">
                                <span class="badge badge-primary">Construction</span>
                            </div>
                    
                    
                            <div class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Yarn Import'">
                                <div class="col-md-6">
                    
                                    <dl class="row">
                                        <dt class="col-sm-4">Construction:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.construction}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4">Brand Name:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.brandName}}
                                            </dd>
                                    </dl>
                                  
                                 
                                </div>
                      
                    
                    
                            </div>
                    
                            <div class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export'  || loggedInDepartmentName == 'Yarn Import'">
                                <div class="col-md-12">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2"
                                        (click)="editProductAndSpec(contractProductData)"> <i class="far fa-edit"></i></button>
                                </div>
                            </div> 
                                </div>
                            </div>

                              <hr *ngIf = "loggedInDepartmentName == 'Yarn Export'  || loggedInDepartmentName == 'Yarn Import'">
                            <div class="card bg-light shadow mb-4" *ngIf = "loggedInDepartmentName == 'Yarn Export'  || loggedInDepartmentName == 'Yarn Import'">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="pb-2">
                                <span class="badge badge-primary">Article</span>
                            </div>
                    
                    
                            <div class="row"  *ngIf="loggedInDepartmentName=='Yarn Export'  || loggedInDepartmentName == 'Yarn Import'">
                                <div class="col-md-12">
                    
                                    <!-- <dl class="row">
                                        <dt class="col-sm-4">Article:
                                        </dt>
                                        <dd class="col-sm-6"></dd>
                                    </dl> -->
                                    <dl class="row">
                
                                        <dd class="col-md-12 pt-1 " >
                                    
                                            <div *ngIf="loggedInDepartmentName=='Yarn Export'  || loggedInDepartmentName == 'Yarn Import'" >
                                                <div class="col-md-12 ">
                                           




                                                <div class="form-group row" *ngFor="let a of contractArticles; let i = index;">

                                                    <div class="col-md-1">
                                                        <button *ngIf="a.isRevised == true" class="btn btn-info btn-sm h5" ngbTooltip="Edit Revised Articel"
                                                            (click)="revisedpopup(a,'Edit')">Revised</button>
                                                    </div>

                                                    <div class=" modalBorder d-inline ">
                                                        <div class="h6 pdngLR text_Navy">{{i+1}}</div>
                                                    </div>

                                                    <div class="col-md-4 ml-0">
                                                        <div class="input-group">
                                                            <label class="col-form-label">Article Name:</label>
                                                
                                                            <ng-select [disabled]="a.isDeleted ==true || a.isRevised ==true" name="articleId_{{i}}" #articleId="ngModel"
                                                                class="input-w px-0" [(ngModel)]="a.articleId" placeholder="-- Select --">
                                                                <ng-option *ngFor="let c of article" [value]="c.id">{{ c.name }}
                                                                </ng-option>
                                                            </ng-select>
                                                
                                                        </div>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <label class="col-form-label">Quantity:</label>
                                                
                                                        <div class="input-group">
                                                
                                                            <input type="number" [disabled]="a.isDeleted ==true || a.isRevised ==true" min="0" placeholder="qty"
                                                                #contractArticleQuantity="ngModel" class="form-control" [(ngModel)]="a.contractArticleQuantity"
                                                                name="contractArticleQuantity_{{i}}">
                                                
                                                        </div>
                                                    </div>
                                                
                                                    <div class="col-md-1">
                                                        <label class="col-form-label">Rate:</label>
                                                        <div class="input-group">
                                                
                                                            <input type="number" [disabled]="a.isDeleted ==true || a.isRevised ==true" min="0" placeholder="Rate"
                                                                #contractArticleRate="ngModel" class="form-control" [(ngModel)]="a.contractArticleRate"
                                                                name="contractArticleRate_{{i}}">
                                                
                                                        </div>
                                                    </div>

                                                    <!-- <br>
                                                    <br> -->

                                                    <div class="col-md-1">
                                                        <label class="col-form-label">Fab/C:</label>
                                                        <div class="input-group">
                                                            <input type="number" [disabled]="a.isDeleted ==true || a.isRevised ==true" min="0" placeholder="Commission"
                                                                #contractArticleCommission="ngModel" class="form-control" [(ngModel)]="a.contractArticleCommission"
                                                                name="contractArticleCommission_{{i}}">
                                                        </div>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <label class="col-form-label">Agent/C:</label>
                                                
                                                        <div class="input-group">
                                                
                                                            <input type="number" [disabled]="a.isDeleted ==true || a.isRevised ==true" min="0" placeholder="Agent Comm"
                                                                #contractArticleForignAgentCommission="ngModel" class="form-control"
                                                                [(ngModel)]="a.contractArticleForignAgentCommission" name="contractArticleForignAgentCommission_{{i}}">
                                                
                                                        </div>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <label class="col-form-label">&nbsp;</label>
                                                        <div class="input-group-append">
                                                            <button class="btn btn-outline-danger" [disabled]="a.isDeleted ==true || a.isRevised ==true" type="submit"
                                                                (click)="removeArticle(a)">
                                                                <i class="fas fa-minus fa-xs"></i></button>
                                                            <span class="badge badge-danger h5 ml-2" *ngIf="a.isDeleted ==true">Deleted</span>
                                                            <button *ngIf="isRevisedStart == true" class="btn btn-outline-primary btn-sm h5 ml-2"
                                                                ngbTooltip="Add Revised Articel" (click)="revisedpopup(a,'ADD')">Revise</button>
                                                        </div>
                                                    </div>
                                                </div>

<!-- ------------------------------------------------------------------ -->



                                                <!-- <div class="form-group row" *ngFor="let a of contractArticles; let i = index;">
                                                    
                                                    <div class="div col-md-1 mr-2"></div>

                                                    <div class="col-md-2">
                                                        <label class="col-form-label">Fabcot Comm:</label>
                                                        <div class="input-group">
                                                            
                                                
                                                            <input type="number" [disabled]="a.isDeleted ==true || a.isRevised ==true" min="0" placeholder="Commission"
                                                                #contractArticleCommission="ngModel" class="form-control" [(ngModel)]="a.contractArticleCommission"
                                                                name="contractArticleCommission_{{i}}">
                                                
                                                        </div>
                                                    </div>

                                                    <div class="col-md-3">
                                                        
                                                        <label class="col-form-label">For. Agent Comm:</label>
                                                        <div class="input-group">
                                                            

                                                            <input type="number" [disabled]="a.isDeleted ==true || a.isRevised ==true" min="0" placeholder="Agent Comm"
                                                                #contractArticleForignAgentCommission="ngModel" class="form-control"
                                                                [(ngModel)]="a.contractArticleForignAgentCommission" name="contractArticleForignAgentCommission_{{i}}">
                                                
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <label class="col-form-label">&nbsp;</label>
                                                        <div class="input-group-append">
                                                            <button class="btn btn-outline-danger" [disabled]="a.isDeleted ==true || a.isRevised ==true" type="submit"
                                                                (click)="removeArticle(a)">
                                                                <i class="fas fa-minus fa-xs"></i></button>
                                                            <span class="badge badge-danger h5 ml-2" *ngIf="a.isDeleted ==true">Deleted</span>
                                                            <button *ngIf="isRevisedStart == true" class="btn btn-outline-primary btn-sm h5 ml-2"
                                                                ngbTooltip="Add Revised Articel" (click)="revisedpopup(a,'ADD')">Revise</button>
                                                        </div>
                                                    </div>
                                                </div>
                                        -->




                                            <div class="row">
                                                <div class="col-md-11 text-right">
                                                    <button class="btn btn-outline-primary btn-sm" (click)="addArticle()"> Add Another Article</button>
                                                </div>
                                            </div>
                    </div>
                                            </div>

                                        </dd>

                                    </dl>
                                </div>
                      
                    
                    
                            </div>
                            <div class="row"  *ngIf="loggedInDepartmentName=='Yarn Export'  || loggedInDepartmentName == 'Yarn Import'">
                                <div class="col-md-12 text-right">
                                    <button class="btn btn-outline-primary btn-sm" (click)="editArticle()"> Update Article</button>

                                </div>
                            </div>
                                </div>
                            </div>
                            <!-- <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2"
                                        (click)="editProductAndSpec(contractProductData)"> <i class="far fa-edit"></i></button>
                                </div>
                            </div> -->
                            <hr *ngIf = "loggedInDepartmentName != 'Yarn Export'  && loggedInDepartmentName != 'Yarn Import'">
                            <div class="card bg-light shadow mb-4"  *ngIf = "loggedInDepartmentName != 'Yarn Export'
                            && loggedInDepartmentName != 'Yarn Import'">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="pb-2">
                                <span class="badge badge-primary" *ngIf = "loggedInDepartmentName != 'Yarn Export'  && loggedInDepartmentName != 'Yarn Import'">Product & Specification</span>
                            </div>
                    
                    
                            <div class="row" >
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-4" *ngIf = "loggedInDepartmentName != 'Yarn Export'  && loggedInDepartmentName != 'Yarn Import'">Construction:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "loggedInDepartmentName != 'Yarn Export'
                                        && loggedInDepartmentName != 'Yarn Import'"> <span *ngIf = "contractProductData.pecenetAge != ''">   {{contractProductData.pecenetAge}} %  </span>
                                            {{contractProductData.febricType}}&nbsp;{{contractProductData.construction}}</dd>
                    
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4" *ngIf = "loggedInDepartmentName != 'Yarn Export'
                                        && loggedInDepartmentName != 'Yarn Import'" >Article:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "loggedInDepartmentName != 'Yarn Export'
                                        && loggedInDepartmentName != 'Yarn Import'">{{contractProductData.articleName}}</dd>
                                     

                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName == 'Fabric Export'">
                                        <dt class="col-sm-4">Piece Length:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.pieceLengthName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-4">Buyer Side Piece Length:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.pieceLengthName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Fabric Export'">
                                        <dt class="col-sm-4">Selvedge:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.selvedgeName}}</dd>
                                    </dl>
                                   
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-4">Blending Ratio &nbsp; Warp:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.blendingRatioWarpName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-4">&nbsp; &nbsp; Weft:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.blendingRatioWeftName}}</dd>
                                    </dl>
                                </div>
                                <div class="col-md-6">
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Fabric Export'">
                                        <dt class="col-sm-4">GSM:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.gsm}}
                                       <span *ngIf = "contractProductData.tolerance != ''"> +/- {{contractProductData.tolerance}} % </span>

                                        </dd>
                    
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Fabric Export'">
                                        <dt class="col-sm-4">Weave:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.weaveName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-4">Seller Side Piece Length:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.sellerPieceLengthName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-4">Pick Insertion:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.pickInsertionName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-4">Width:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf="contractProductData.width != null">{{contractProductData.width}} inch
                                        </dd>
                                    </dl>
                                   
                                </div>
                            </div>
                            <div class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'
                            && loggedInDepartmentName != 'Yarn Import'">
                                <div class="col-md-12">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2"
                                        (click)="editProductAndSpec(contractProductData)"> <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                                </div>
                            </div>
                    
                            <!-- </div> -->
                    
                            <!-- -------Quantity & Costing Tab 4----------- -->
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary"> Quantity & Costing</span>
                                    </div>
                    
                                </div>
                            </div> -->
                              <hr>
                            <div class="card bg-light shadow mb-4">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="pb-2" >
                                <span class="badge badge-primary">Quantity & Costing</span>
                            </div>
                    
                    
                            <div class="row">
                                <div class="col-md-6">
                                    <dl class="row"  *ngIf = "loggedInDepartmentName == 'Yarn Export'
                                    || loggedInDepartmentName == 'Yarn Import'">
                                        <dt class="col-sm-4">Currency:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.rateCurrencyName}}
                                          </dd>
                                    </dl>
                                    <dl class="row"  *ngIf = "loggedInDepartmentName == 'Yarn Export'
                                    || loggedInDepartmentName == 'Yarn Import'">
                                        <dt class="col-sm-4">UOM:
                                        </dt>
                                        <dd class="col-sm-6">  {{contractCostingData.rateUOMName}}
                                          </dd>
                                    </dl>
                                    <dl class="row"  *ngIf = "loggedInDepartmentName == 'Yarn Export'
                                    || loggedInDepartmentName == 'Yarn Import'">
                                        <dt class="col-sm-4">Tolerance value:
                                        </dt>
                                        <dd class="col-sm-6"> {{contractCostingData.quantityToleranceValue}}
                                          </dd>
                                    </dl>
                    
                                    <dl class="row"  *ngIf = "loggedInDepartmentName != 'Yarn Export'
                                    && loggedInDepartmentName != 'Yarn Import'">
                                        <dt class="col-sm-4">Quantity:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.quantity}}
                                            {{contractCostingData.quantityUOMName}} <b
                                                *ngIf="contractCostingData.quantityToleranceValue !=''">+/- </b>
                                            {{contractCostingData.quantityToleranceValue}} <b
                                                *ngIf="contractCostingData.quantityToleranceValue != ''"> % </b></dd>
                                    </dl>
                                    <!-- <dl class="row" *ngIf="loggedInDepartmentName=='Yarn Local' ||  loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-4">Quantity:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.quantity}}
                                            {{contractCostingData.quantityUOMName}}</dd>
                                    </dl> -->
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'
                                    && loggedInDepartmentName != 'Yarn Import'">
                                        <dt class="col-sm-4">Rate:
                                        </dt>
                                        <dd class="col-sm-6"><span *ngIf="contractCostingData.rateCurrencyName !=null"> {{contractCostingData.rateCurrencyName}} </span>   {{contractCostingData.rate}} <b *ngIf="contractCostingData.rateUOMName !=null">
                                                / </b>
                                            {{contractCostingData.rateUOMName}}</dd>
                    
                    
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'
                                    && loggedInDepartmentName != 'Yarn Import'">
                                        <dt class="col-sm-4">Project Cost:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.rateCurrencyName}}
                                            {{contractCostingData.contractCost}}</dd>
                    
                                    </dl>

                                    <dl class="row" *ngIf = "loggedInDepartmentName == 'Fabric Local'
                                     ">
                                        <dt class="col-sm-4">Project Cost Inc GST:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.rateCurrencyName}}
                                            {{costingDataWithGstFL}}</dd>
                    
                                    </dl>

                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName != 'Yarn Export'
                                    && loggedInDepartmentName != 'Yarn Import' ">
                                        <dt class="col-sm-4">&nbsp; &nbsp;
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = " loggedInDepartmentName == '!Fabric Export'">{{contractCostingData.rateCurrencyName}}
                                            {{contractCostingData.totalCostGSt}} <b *ngIf="contractCostingData.totalCostGSt != null">
                                                Inclusive Of GST</b></dd>
                    
                                    </dl>
                    
                    
                    
                                </div>
                                <div class="col-md-6">
                    
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || (loggedInDepartmentName != 'Yarn Export' && loggedInDepartmentName != 'Yarn Local' &&  loggedInDepartmentName != 'Yarn Import' )">
                                        <dt class="col-sm-4" *ngIf = "loggedInDepartmentName != 'Fabric Export'">GST:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf="contractCostingData.gst != ''">{{contractCostingData.gst}}%</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' ||( loggedInDepartmentName != 'Yarn Export'  && loggedInDepartmentName != 'Yarn Local'
                                    && loggedInDepartmentName != 'Yarn Import')">
                                        <dt class="col-sm-4" *ngIf = "loggedInDepartmentName != 'Fabric Export'">W.I.Tax:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf="contractCostingData.witAx != ''">{{contractCostingData.witAx}}%</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || (loggedInDepartmentName != 'Yarn Export'  && loggedInDepartmentName != 'Yarn Local'  && loggedInDepartmentName != 'Yarn Import') ">
                                        <dt class="col-sm-4">
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "loggedInDepartmentName == '!Fabric Export'"><small>Subject to all taxes if applicable</small></dd>
                                    </dl>
                                </div>
                    
                    
                            </div>
                    
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2" (click)="editQuantity(contractCostingData)">
                                        <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                                </div>
                            </div>
                            <!-- </div> -->
                    
                            <!-- -------Payment & Delivery Terms Tab 5----------- -->
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary">Payment & Delivery Terms</span>
                                    </div>
                    
                                </div>
                            </div> -->
                            <hr>
                            <div class="card bg-light shadow mb-4">
                                <div class="pb-2 mt-2 ml-2">

                            <div class="pb-2">
                                <span class="badge badge-primary">Payment & Delivery Terms</span>
                            </div>
                    
                    
                            <div class="row">
                                <div class="col-md-6">
                    
                                    <dl class="row" *ngIf = "(loggedInDepartmentName != 'Yarn Export'   && loggedInDepartmentName != 'Yarn Import') &&(loggedInDepartmentName == 'Fabric Export' || loggedInDepartmentName == 'Yarn Local' || loggedInDepartmentName == 'Fabric Local'  )">
                                        <dt class="col-sm-6" *ngIf = "loggedInDepartmentName == 'Fabric Export' || loggedInDepartmentName == 'Yarn Local'  "> Payment terms:</dt>
                                        <dt class="col-sm-6" *ngIf = "loggedInDepartmentName != 'Fabric Export' && loggedInDepartmentName != 'Yarn Local' ">Seller Payment terms:</dt>
                                        

                                        <dd class="col-sm-6">{{contractPaymentData.sellerPaymentTermName}}
                                            <b *ngIf="contractPaymentData.sellerPaymentTermDays != ''">
                                                {{contractPaymentData.sellerPaymentTermDays}} Days </b>
                                            {{contractPaymentData.sellerPaymentTermInfo}}
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export'
                                    || loggedInDepartmentName == 'Yarn Import'">
                                        <dt class="col-sm-4">Payment terms:</dt>
                                        <dd class="col-sm-6">{{contractPaymentData.paymentTermName}}
                                            <b *ngIf="contractPaymentData.paymentTermDays != ''">
                                                {{contractPaymentData.paymentTermDays}} Days </b>
                                            {{contractPaymentData.paymentTermInfo}}
                                        </dd>
                                    </dl>
                    
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export' && loggedInDepartmentName !='Fabric Export'  && loggedInDepartmentName != 'Yarn Import' ">
                                        <dt class="col-sm-6"  >Buyer Payment terms:
                                        </dt>
                                        <dd class="col-sm-6" >{{contractPaymentData.buyerPaymentTermName}}
                                            <b *ngIf="contractPaymentData.buyerPaymentTermDays !=null">
                                                {{contractPaymentData.buyerPaymentTermDays}} Days </b>
                                            {{contractPaymentData.buyerSidePaymentTermInfo}}
                                        </dd>
                                        <!-- <dd class="col-sm-6"></dd> -->
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Packing:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPaymentData.packingName}}
                                        </dd>
                                        <dd class="col-sm-6"></dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Price / Delivery Terms:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPaymentData.priceTermName}}
                                            {{contractPaymentData.destinationName}}
                                        </dd>
                                        <dd class="col-sm-6"></dd>
                                    </dl>
                                </div>
                    
                                <div class="col-md-6">
                    
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-4">Payment Mode:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPaymentData.paymentMode}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Fabric Export'  || loggedInDepartmentName == 'Yarn Import'">
                                        <dt class="col-sm-4">
                                            Container:</dt>
                                        <dd class="col-sm-6"> {{contractPaymentData.count}}     {{contractPaymentData.containerName}}</dd>
                                    </dl>
                    
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2"
                                        (click)="editPaymentAndDelivery(contractPaymentData)">
                                        <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                                </div>
                            </div>
                            <!-- </div> -->
                    
                            <hr>
                            <div class="card bg-light shadow mb-4">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="form-row">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary"> Delivery TimeLine</span>
                                    </div>
                                    <div class="col-md-12">
                                        <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2" (click)="addDeliveryTL('Add')">
                                            <i class="fas fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>


                            <!-- <div class="border-top pb-2">
                                <span class="badge badge-primary">Delivery TimeLine</span>
                               
                            </div>
                            <div class="col-md-12">
                                <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2" (click)="addDeliveryTL('Add')">
                                    <i class="fas fa-plus"></i></button>
                            </div> -->

                            <!-- <div class="row">
                                                    <div class="col-md-12">
                                                        <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2" >
                                                            Edit</button>
                                                    </div>
                                                </div> -->
                            <!-- <div class="tab-pane fade show " id="nav-letterCredit" role="tabpanel"
                                                    aria-labelledby="nav-letterCredit-tab"> -->
                    
                            <div class="panel-body mb-4">
                    
                                <ngx-datatable #myTable class="bootstrap" [columnMode]="'force'" [rows]="deliveryData" [headerHeight]="50"
                                    [footerHeight]="50" [sorts]="[{ prop: 'autoContractNumber', dir: 'desc' }]" [rowHeight]="'auto'"
                                    [limit]="6">
                    
                    
                                    <ngx-datatable-column name="S.No." prop="contractAge">
                                        <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                            {{rowIndex+1}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="L/C#" prop="contractAge">
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.lcNo}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Supplier Date" prop="contractAge">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            <span class="badge badge-primary"></span>
                                            {{row.supplierDateDay}}
                                        </ng-template>
                                    </ngx-datatable-column>
                    
                                    <ngx-datatable-column name="Buyer Date" prop="autoContractNumber">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                           {{row.buyerDateDay}}
                    
                                        </ng-template>
                                    </ngx-datatable-column>
                    
                                    <ngx-datatable-column name="Quantity " prop="contractOn">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.quantity}}
                                        </ng-template>
                                    </ngx-datatable-column>
                    
                                    <ngx-datatable-column name="Container" prop="poNumber" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.containerName}}
                                        </ng-template>
                                    </ngx-datatable-column>
                    
                                    <!-- <ngx-datatable-column name="Quantity" prop="scNumber">
                                                            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                                            </ng-template>
                                                          </ngx-datatable-column> -->
                    
                                    <ngx-datatable-column name="Action">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    
                                            <div class="ibox-tools text-center">
                    
                                                <button type="button" class="btn editIconBack" (click)="editDeliveries(row, 'Edit')">
                                                    <i class="far fa-edit "></i>
                                                </button>
                    
                                                <button type="button" class="btn deleteIconBack" (click)="deleteDeliveries(row)">
                                                    <i class="far fa-trash-alt"></i>
                                                </button>
                    
                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                    
                    
                                </div>
                            </div>
                    
                    
                    
                    
                            <!-- </div> -->
                    <hr>
                            <!-- -------Commission Tab 7----------- -->
                            <div class="card bg-light shadow mb-4">
                                <div class="pb-2 mt-2 ml-2">
                            <div class="pb-2">
                                <div *ngIf="loggedInDepartmentName=='Yarn Local'">
                                    <span class="badge badge-primary">Commission</span>
                                </div>
                                <div *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export'   || loggedInDepartmentName == 'Fabric Export'   || loggedInDepartmentName == 'Yarn Import' ">
                                    <span class="badge badge-primary">Commission & Kickback</span>
                                </div>
                            </div>
                            <!-- <div class="tab-pane fade show " id="nav-commission" role="tabpanel"
                                                    aria-labelledby="nav-commission-tab"> -->
                    
                            <!-- <div class="row">
                                                        <div class="col-md-12 mb-2 py-1"> -->
                    
                            <!-- <div class="col-sm-12 text-muted">
                                                                <h4 class="font-weight-light">
                                                                    Commission (Supplier, Buyer & External Agent)
                                                                </h4>
                                                            </div> -->
                    
                            <!-- </div>
                                                    </div> -->
                    
                            <div class="row">
                                <div class="col-md-6">
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'  ">
                                        <dt class="col-sm-4">Kickback:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.kickbackPercentage != null">{{contractCostingData.rateCurrencyName}} &nbsp; {{contractCommissionData.kickbackPercentage}} %
                                            <b *ngIf="contractCommissionData.kickbackUOMName!=null">/ </b>
                                          [{{contractCostingData.rateCurrencyName}}  {{contractCommissionData.commissionAmountKickback}} ]
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Fabric Export'  || loggedInDepartmentName == 'Yarn Import' ">
                                        <dt class="col-sm-4">Kickback:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.kickbackPercentage != null">{{contractCostingData.rateCurrencyName}} &nbsp; {{contractCommissionData.kickbackPercentage}} %
                                            <b *ngIf="contractCommissionData.kickbackUOMName!=null">/ </b>
                                          [{{contractCostingData.rateCurrencyName}}  {{contractCommissionData.commissionAmountKickback}} ]
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName !='Yarn Export' && loggedInDepartmentName != 'Fabric Export' && loggedInDepartmentName != 'Yarn Local'  && loggedInDepartmentName != 'Yarn Import'">
                                        <dt class="col-sm-4">Fabcot Commission:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.fabCotCommision!= 0">PKR {{contractCommissionData.fabCotCommision}} %
                                            <b *ngIf="contractCommissionData.fabCotCommisionUOMName!=null">/ </b>
                    
                                           [{{contractCostingData.rateCurrencyName}} {{contractCommissionData.commissionAmountFabcot}} ] <span *ngIf = "contractCommissionData.fabcotSideCommAdditionalInfo != null"> {{contractCommissionData.fabcotSideCommAdditionalInfo}}</span>
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName =='Yarn Local'">
                                        <dt class="col-sm-4">Fabcot Commission:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "(contractCommissionData.fabCotCommisionUOMName == null && contractCommissionData.commissionAmountFabcot != '' ) ">
                                             {{contractCommissionData.fabCotCommision}} % &nbsp; 
                                           {{contractCostingData.rateCurrencyName}} {{contractCommissionData.commissionAmountFabcot}}  <span *ngIf = "contractCommissionData.fabcotSideCommAdditionalInfo != null"> {{contractCommissionData.fabcotSideCommAdditionalInfo}}</span>
                                        </dd>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.fabCotCommisionUOMName != null">
                    
                                           {{contractCommissionData.fabCotCommision}} per {{contractCommissionData.fabCotCommisionUOMName}} <span *ngIf = "contractCommissionData.fabcotSideCommAdditionalInfo != null"> {{contractCommissionData.fabcotSideCommAdditionalInfo}}</span>
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName =='Yarn Export' || loggedInDepartmentName == 'Fabric Export'  || loggedInDepartmentName == 'Yarn Import'  ">
                                        <dt class="col-sm-4">Fabcot Commission:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.fabCotCommision!= null && contractCommissionData.fabCotCommision!= ''">USD {{contractCommissionData.fabCotCommision}} %
                                            <b *ngIf="contractCommissionData.fabCotCommisionUOMName!=null">/ </b>
                    
                                           [{{contractCostingData.rateCurrencyName}} {{contractCommissionData.commissionAmountFabcot}}  <span *ngIf = "contractCommissionData.fabcotSideCommAdditionalInfo != null"> {{contractCommissionData.fabcotSideCommAdditionalInfo}}</span>]
                                        </dd>
                                    </dl>
                                    
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export' && loggedInDepartmentName != 'Fabric Export'   &&  loggedInDepartmentName != 'Yarn Local'  && loggedInDepartmentName != 'Yarn Import'">
                                        <dt class="col-sm-4">Buyer side Commission:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.buyersideCommision != null && contractCommissionData.buyersideCommision != '' ">
                                       
                                            {{contractCostingData.rateCurrencyName}} {{contractCommissionData.buyersideCommision}}  %
                                            <b *ngIf="contractCommissionData.commissionAmountBuyer!=null">/ </b>
                    
                                           [{{contractCostingData.rateCurrencyName}} {{contractCommissionData.commissionAmountBuyer}} ] <span *ngIf = "contractCommissionData.buyerSideCommAdditionalInfo != null"> {{contractCommissionData.buyerSideCommAdditionalInfo}}</span>
                                        </dd>
                                    </dl>

                                    <dl class="row" *ngIf = "loggedInDepartmentName == 'Yarn Local' ">
                                        <dt class="col-sm-4">Buyer side Commission:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.buyersideCommisionUOMName == null && contractCommissionData.commissionAmountBuyer != ''"> 
                                            {{contractCommissionData.buyersideCommision}} % &nbsp; 
                                           {{contractCostingData.rateCurrencyName}} {{contractCommissionData.commissionAmountBuyer}}  <span *ngIf = "contractCommissionData.buyerSideCommAdditionalInfo != null"> {{contractCommissionData.buyerSideCommAdditionalInfo}}</span>
                                        </dd>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.buyersideCommisionUOMName != null  "> 
                    
                                            {{contractCommissionData.buyersideCommision}} / {{contractCommissionData.buyersideCommisionUOMName}}
                                            <span *ngIf = "contractCommissionData.buyerSideCommAdditionalInfo != null"> {{contractCommissionData.buyerSideCommAdditionalInfo}}</span>
                                         </dd>
                                    </dl>
                                     <dl class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Fabric Export' || loggedInDepartmentName == 'Yarn Local'  || loggedInDepartmentName == 'Yarn Import'">
                                                                <dt class="col-sm-4" >Foreign Agent Comm:
                                                                </dt>
                                                                <dd class="col-sm-9 left" 
                                                                    *ngFor="let i of agent">
                                                                    {{i.agentName}}: {{i.agentCommission}}%
                                                                
                                                                </dd>

                                                                <!-- <dt class="col-sm-3">Certifications:</dt>
                                                                <dd class="col-sm-9">{{enquiryData.certificateNames}}
                                                                    <button class="btn btn-outline-primary float-right btn-sm" (click)="remarksToggle = !remarksToggle">Edit</button>
                                                                </dd> -->
                                                                    
                                                            </dl> 
                    
                    
                    
                                </div>
                                <div class="col-md-12">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2" (click)="editKickbackComm()">
                                        <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                                </div>
                            </div>
                    
                  
                              <hr>
                              <div class="card bg-light shadow mb-4">
                                <div class="pb-2 mt-2 ml-2">

                            <div class="pb-2">
                                <span class="badge badge-primary">Employee Commission</span>
                            </div>


                    
                            <div class="row">
                                <div class="col-md-12 mb-2">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2" (click)="AddEmployeeComm('Add')"> <i
                                            class="fas fa-plus"></i></button>
                                </div>
                            </div>
                    
                            <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="empData" *ngIf="empData.length != 0"
                                [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [sorts]="[{prop: 'code', dir: 'asce'}]"
                                [rowHeight]="'auto'" [limit]="6">
                    
                    
                                <ngx-datatable-column name="S. No." [width]="5" prop="">
                                    <ng-template let-rowIndex="rowIndex" let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{rowIndex + 1}}
                                    </ng-template>
                                </ngx-datatable-column>
                    
                                <ngx-datatable-column name="Agent">
                                    <ng-template let-row="row" ngx-datatable-cell-template>
                                        {{row.agentName}}
                                    </ng-template>
                                </ngx-datatable-column>
                    
                                <ngx-datatable-column name="Criteria" prop="name">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{row.remarks}}
                                    </ng-template>
                                </ngx-datatable-column>
                    
                                <ngx-datatable-column name="Details" prop="genericName">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{row.criteriaDetail}}
                                    </ng-template>
                                </ngx-datatable-column>
                    
                                <ngx-datatable-column name="Action" prop="status">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        <div class="ibox-tools text-center">
                    
                                            <button type="button" class="btn editIconBack"
                                                (click)="editEmployeeComm('editCommission' , row)">
                                                <i class="far fa-edit "></i>
                                            </button>
                    
                                            <button type="button" class="btn deleteIconBack" (click)="deleteCommission(row)">
                                                <i class="far fa-trash-alt"></i>
                                            </button>
                    
                                        </div>
                                    </ng-template>
                                </ngx-datatable-column>
                            </ngx-datatable>
                    
                                </div>
                              </div>
                      
                                   <hr>
                                   <div class="card bg-light shadow mb-4">
                                    <div class="pb-2 mt-2 ml-2">
                            <div class="pb-2">
                                <span class="badge badge-primary">Remarks / Other Conditions</span>
                            </div>
                     
                    
                            <div class="row">
                                <div class="col-md-6">
                    
                                    <dl class="row">
                                        <dt class="col-sm-4">Remarks:
                    
                                        </dt>
                                        <dd class="col-sm-6">{{contractRemarksData.contractRemarks}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName == 'Yarn Local'  ">
                                        <dt class="col-sm-4">Buyer Remarks:
                    
                                        </dt>
                                        <dd class="col-sm-6">{{contractRemarksData.buyerRemarks}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-4">Other Condition:
                    
                                        </dt>
                                        <dd class="col-sm-6">{{contractRemarksData.otherConditionRemarks}}</dd>
                    
                                    </dl>
                                    <!-- <dl class="row">
                                                                <dt class="col-sm-4">Other Condition:
                                                                </dt>
                                                                <dd class="col-sm-6"></dd>
                    
                                                            </dl> -->
                                    <dl class="row">
                                        <dt class="col-sm-4">Preview Title:
                                        </dt>
                                        <dd class="col-sm-6">{{contractRemarksData.title}}</dd>
                    
                                    </dl>
                    
                    
                    
                                </div>
                                <div class="col-md-12">
                                    <button class="btn btn-outline-primary btn-sm float-right mr-3 mb-2" (click)="editRemarks(contractRemarksData)">
                                        <i class="far fa-edit"></i></button>
                                </div>
                    
                            </div>
                    
                                    </div>
                                   </div>
                    
                    
                            <!-- </div> -->
                    
                            <!-- </div> -->
                    
                            <!-- ------ -->
                    
                        </div>
                    
                    </div>



                </div>


                <!-- Delivery TL Tab -->

                <div class="tab-pane fade show " id="nav-delivery" role="tabpanel" aria-labelledby="nav-delivery-tab">
                    <div class="col-md-12">
                        <div class="card bg-light shadow mb-4">
                            <div class="pb-2 mt-2 ml-2">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="fas fa-list mr-3"></i>
                                            Deliveries TimeLine
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="addDeliveryTL('Add')">
                                            <i class="fas fa-plus"></i>
                                            Add Deliveries </button>
                                    </div>
                                </div>
                                <div class="row justify-content-end">

                                    <div class="col-md-4">
                                        <!-- <div class="input-group col-md-offset-3 float-right">
                                                        <label>Search:</label>
                                                        <input type="text" placeholder="" class="input form-control w-50" />
                                                    </div> -->

                                        <div class="form-group row">
                                            <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputSearch"
                                                    (keyup)="searchdelivery($event)" placeholder="Search by Items..">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="deliveryData"
                                    [sorts]="[{ prop: '', dir: 'asce' }]" [columnMode]="'force'" [headerHeight]="50"
                                    [footerHeight]="50" [rowHeight]="'auto'" [limit]="10">


                                    <ngx-datatable-column name="S.No." prop="lc" [width]="80">
                                        <ng-template let-row="row" let-rowIndex="rowIndex" let-expanded="expanded"
                                            ngx-datatable-cell-template>
                                            {{rowIndex+1}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="L/C#" prop="lc" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.lcNo}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Supplier Date" prop="supplierDate" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.supplierDateDay}} {{row.supplierDateMonth}}{{row.supplierDateYear}}

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Buyer Date" prop="buyerDate" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.buyerDateDay}}{{row.buyerDateMonth}}{{row.buyerDateYear}}

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Quantity" prop="quantity" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.quantity}}

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Container" prop="weight" [width]="80" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.containerName}}

                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Action" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>


                                            <div class="ibox-tools text-center">
                                                <button type="button" class="btn editIconBack"
                                                    (click)="editDeliveries(row, 'Edit')"><i
                                                        class="far fa-edit"></i></button>

                                                <button type="button" class="btn deleteIconBack" data-toggle="tooltip"
                                                    data-placement="top" title="" data-original-title="Delete"
                                                    (click)="deleteDeliveries(row)"> <i
                                                        class="far fa-trash-alt"></i></button>
                                            </div>

                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>

                            </div>

                        </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!---------- dispatches Dates Tab ---------->
<!-- 
                <div class="tab-pane fade show " id="nav-dispatches" role="tabpanel"
                    aria-labelledby="nav-dispatches-tab">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="fas fa-truck mr-3 "></i>
                                            Dispatched Register
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="addDispatch('Add')">
                                            <i class="fas fa-plus"></i>
                                            Add Dispatches </button>
                                    </div>
                                </div>
                                <div class="row justify-content-end">

                                    <div class="col-md-4">
                                        <div class="form-group row">
                                            <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputSearch"
                                                    (keyup)="searchDispatch($event)" placeholder="Search ..">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <ngx-datatable #myTable class="bootstrap" [columnMode]="'force'" [headerHeight]="50"
                                    [rows]="dispatchData" [footerHeight]="50" [sorts]="[{ prop: 'id', dir: 'asce' }]"
                                    [rowHeight]="'auto'" [limit]="6">



                                    <ngx-datatable-column name="S.No.">
                                        <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                            {{rowIndex+1}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Dispatch No." prop="id">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Dispatch Date" prop="date">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.date}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Quantity" prop="quantity">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.quantity}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Detail" prop="remarks">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.remarks}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Action">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                                            <div class="ibox-tools text-center">

                                                <button type="button" class="btn editIconBack"
                                                    (click)="editDispatch(row , 'Edit')">
                                                    <i class="far fa-edit "></i>
                                                </button>

                                                <button type="button" class="btn deleteIconBack"
                                                    (click)="deleteDispatch(row)">
                                                    <i class="far fa-trash-alt"></i>
                                                </button>

                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>

                                </ngx-datatable>
                            </div>
                        </div>
                    </div>
                </div> -->


                <!---------- Product Plan Tab ---------->

                <div class="tab-pane fade show " id="nav-prodPlan" role="tabpanel" aria-labelledby="nav-prodPlan-tab">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="far fa-clock mr-3"></i>
                                            Production Plan / Status
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="addProd()">
                                            <i class="fas fa-plus"></i>
                                            Add Production Status </button>
                                    </div>
                                </div>


                                <div class="row justify-content-end">

                                </div>

                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="getProdPlan"
                                    *ngIf="getProdPlan.length != 0" [sorts]="[{ prop: 'id,tnaItem', dir: 'asce' }]"
                                    [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
                                    [limit]="10">
                                    <ngx-datatable-column prop="id" name="S. No." [width]="20">


                                        <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Action Item" [width]="20" prop="tnaItem">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="Start Date" [width]="20" prop="startDate">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="End Date" [width]="20" prop="endDate">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="Quantity" [width]="20" prop="quantity">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="Details" [width]="20" prop="details">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="Action" [width]="20">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                            <div class="ibox-tools text-center">
                                                <button type="button" class="btn editIconBack"><i
                                                        class="far fa-edit"></i></button>

                                                <button type="button" class="btn deleteIconBack">
                                                    <i class="far fa-trash-alt"></i>
                                                </button>

                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>


                                </ngx-datatable>

                            </div>
                        </div>
                    </div>
                </div>
<!-- L/C info tab -->
<div class="tab-pane fade show " id="nav-lcInfo" role="tabpanel" aria-labelledby="nav-lcInfo-tab">
    <div class="col-md-12">
        <div class="card bg-light shadow mb-4">
            <div class="pb-2 mt-2 ml-2">
        <div class="row">
            <div class="col-md-12 py-1">
                <div class="row mb-2">
                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                        <h1 class="row wrapper page-header font-weight-light">
                            <i class="fas fa-receipt mr-3"></i>
                           Letter Of Credit

                        </h1>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                        <button class="btn btn-outline-primary btn-sm" (click) = "lcForm2('add')"
                           >
                            <i class="fas fa-plus"></i>
                            Add New L/C Information </button>
                    </div>
                </div>
            </div>
        </div>



        <div class="pb-2 mt-2 ml-2 BG" *ngFor = "let x of contractLOCdata; let i = index;"   >

            <div class="row pb-5" >
                <div class="col-md-6 ">
                    <button class="btn btn-info btn-sm">
                        L/C #</button>
                </div>

                <div class="col-md-6 text-right">
                    <button class="btn btn-outline-primary btn-sm ml-3 " (click) = "lcForm(x,'edit')"  >
                        <i class="far fa-edit"></i>
                        Edit L/C</button>
                    <button class="btn btn-outline-danger btn-sm ml-3 " >
                        <i class="far fa-trash-alt"></i>
                        Delete L/C</button>
                </div>

            </div>

        

            <div class="row">
                <div class="col-md-6">
                    <dl class="row">
                        <dt class="col-sm-4">L/C No.:
                         
                        </dt>
                        <dd class="col-sm-6">    {{x.lcNumber}}</dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">L/C Open by:

                        </dt>
                        <dd class="col-sm-6">    {{x.buyerName}}</dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">L/C Period:</dt>
                        <dd class="col-sm-6">    {{x.lcNumber}}</dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">Remarks:</dt>
                        <dd class="col-sm-6">   {{x.remarks}}</dd>
                    </dl>
                </div>

                <div class="col-md-6">
                    <dl class="row">
                        <dt class="col-sm-4">L/C Opening Date:


                        </dt>
                        <dd class="col-sm-6">    {{x.lcOpenOnToDisplay}}</dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">Last Updated On:

                        </dt>
                        <dd class="col-sm-6">   {{x.lcNumber}}</dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">L/C BL Date:
                        </dt>
                        <dd class="col-sm-6">   {{x.lcNumber}}</dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">L/C Shipment Date:</dt>
                        <dd class="col-sm-6">   {{x.lcShipmentOnToDisplay}}</dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">L/C Expiry Date:


                        </dt>
                        <dd class="col-sm-6">   {{x.lcExpiryDateToDisplay}}</dd>
                    </dl>
                  
                </div>

            </div>

            <!-- <div class="row pb-5">
                <div class="col-md-6 ">

                </div>

            </div> -->

        </div>

            </div>
        </div>

    </div>
</div>


                <!---------- Sale Invoices Tab ---------->

                <div class="tab-pane fade show " id="nav-Sale" role="tabpanel" aria-labelledby="nav-Sale-tab">
                    <div class="col-md-12">

                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-7 text-muted">
                                        <h1 class="row wrapper page-header font-weight-light">
                                            <i class="fas fa-receipt mr-3"></i>
                                            Sale Invoices

                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-5 text-right">

                                        <button *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'" class="btn btn-outline-primary btn-sm  mr-2"
                                        (click)="salesInvoicereportLocalYarn()">
                                        <i class="fa fa-file"></i>
                                       Sale Invoice Report </button>

                                        <button class="btn btn-outline-primary btn-sm"
                                            (click)="addinvoiceForm('addInvoice')">
                                            <i class="fas fa-plus"></i>
                                            Add Sale Invoice </button>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="card bg-light shadow mb-4" *ngFor="let x of saleInvoice; let i = index;">
                       
                            <div class="pb-2 mt-2 ml-2" >
                            <div class="row pb-3 border-bottom">
                                <div class="col-md-6 ">
                                    <button class="btn btn-info btn-sm">
                                        Sale Invoice #{{i+1}}-{{x.saleInvoiceNo}}</button>
                                </div>

                                <div class="col-md-6 text-right" *ngIf = "loggedInDepartmentName == 'Yarn Local'">
                                    <button class="btn btn-outline-info btn-sm" (click)="addCredit(x,'Credit')"> <i class="fas fa-sticky-note"></i>
                                        Credit Note
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm ml-3 " (click)="addCredit(x,'Debit')">
                                        <i class="fas fa-sticky-note"></i>
                                        Debit Note</button>
                                    <button class="btn btn-outline-primary btn-sm ml-3 " (click)="editinvoice(x,'editInvoice')" >
                                        <i class="fas fa-sticky-note"></i>
                                        Edit</button>
                                    <button class="btn btn-outline-danger btn-sm ml-3 " (click)="deleteinvoice(x)">
                                        <i class="fas fa-sticky-note"></i>
                                        Delete</button>
                                </div>

                            </div>
                          
                          
                       

                            <div class="row pt-4">
                                <div class="col-md-12">
                                    <div class="row mb-4">
                                        <div class="col-md-4">
                                            <div class="row">
                                                <div class="col-sm-6 customFontStyle">Sale Invoice Status:
                                
                                                </div>
                                                <div class="col-sm-6 customFontS"></div>
                                            </div>
                                     
                                
                                            <div class="row" *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">
                                                <div class="col-sm-6 customFontStyle">Buyer Payment:</div>
                                                <div class="col-sm-6 customFontS">{{x.quantity}}</div>
                                            </div>
                                
                                        </div>
                                
                                        <div class="col-md-4">
                                
                                            <div class="row">
                                                <div class="col-sm-6 customFontStyle">Remarks:</div>
                                                <div class="col-sm-6 customFontS">{{x.saleInvoiceRemarks}}</div>
                                            </div>
                                
                                            <div class="row">
                                                <div class="col-sm-6 customFontStyle">Sale Invoice ID:
                                
                                
                                                </div>
                                                <div class="col-sm-6 customFontS">{{i+1}}</div>
                                            </div>
                                
                                
                                     
                                
                                
                                
                                        </div>
                                
                                
                                        <div class="col-md-4 ">
                                            <div class="row">
                                                <div class="col-sm-6 customFontStyle">Invoice Date:
                                
                                                </div>
                                                <div class="col-sm-6 customFontS">{{x.saleInvoiceDate}}</div>
                                            </div>
                                            <div class="row" *ngIf = "loggedInDepartmentName == 'Fabric Export'">
                                                <div class="col-sm-6 customFontStyle">BL Date:
                                
                                
                                                </div>
                                                <div class="col-sm-6 customFontS">{{x.blDate}}</div>
                                            </div>
                                
                                            <div class="row" *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">
                                                <div class="col-sm-6 customFontStyle">Tax Challan Info:</div>
                                                <div class="col-sm-6 customFontS">{{x.quantity}}</div>
                                            </div>
                                
                                
                                        </div>
                                    </div>
                                </div>


                                <table class="table">
                                    <thead class="bg-info">
                                      <tr>
                                        <th scope="col">sale Invoice #</th>
                                        <th scope="col" *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">Article</th>
                                        <th scope="col" *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">Article Quantity</th>
                                        <th scope="col" *ngIf="loggedInDepartmentName!='Yarn Export' && loggedInDepartmentName != 'Yarn Import'">Quantity</th>
                                        <th scope="col" *ngIf="loggedInDepartmentName!='Yarn Export' && loggedInDepartmentName != 'Yarn Import'">Unit Rate</th>
                                        <th scope="col" *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">Article Unit</th>
                                        <th scope="col" *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">Article Rate</th>
                                        <th scope="col">Tax %</th>
                                        <th scope="col">Invoice Amount</th>
                                        <!-- <th scope="col">Handle</th> -->
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr class="customFontS">
                                        <!-- <th scope="row">1</th> -->
                                        <td>{{x.saleInvoiceNo}}</td>
                                        <td *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">{{x.contractArticleName}}</td>
                                        <td *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">{{x.quantity}}</td>
                                        <td *ngIf="loggedInDepartmentName!='Yarn Export' && loggedInDepartmentName != 'Yarn Import'">{{x.quantity}}&nbsp;{{x.unit}}</td>
                                        <td *ngIf="loggedInDepartmentName!='Yarn Export' && contractCostingData.rateUOMName !=null && loggedInDepartmentName != 'Yarn Import'">{{contractCostingData.rate}}</td>
                                        <td *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">{{x.unit}}</td>
                                        <td *ngIf="loggedInDepartmentName=='Yarn Export' || loggedInDepartmentName == 'Yarn Import'">{{x.contractArticleRate}}</td>
                                        <td>{{x.taxPercentage}}</td>
                                        <td>{{contractCostingData.rateCurrencyName}}&nbsp;{{x.amount}}</td>
                                      </tr>
                              
                                    </tbody>
                                  </table>
                                  
                                      <div class="col-sm-4">
                                        <div class="row">
                                            <div class="col-sm-6"><small> Updated on: </small></div>
                                            <div class="col-sm-6"><small> {{x.updatedDateTime}}</small></div>
                                        </div>
                                      </div>

                                      <div class="col-sm-4">
                                        <div class="row">
                                            <div class="col-sm-6"><small> Last Updated by:</small></div>
                                            <div class="col-sm-6"><small>{{x.updatedByName}}</small></div>
                                        </div>
                                      </div>

                                      <div class="col-md-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="editpopup(rows)"> <i
                                                class="fas fa-edit"></i> Edit
                                        </button>
    
                                    </div>

                                  
                                  
                                
                            </div>

                       
                              

                            <!-- <div class="row pb-5">
                                <div class="col-md-6 ">

                                </div>

                                <div class="col-md-6 text-right">
                                    <button class="btn btn-outline-primary btn-sm" (click)="editpopup(rows)"> <i
                                            class="fas fa-edit"></i> Edit
                                    </button>

                                </div>

                            </div> -->




                            
                            <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="x.contractCredit"
                            *ngIf="x.contractCredit.length != 0" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                            [sorts]="[{prop: 'code', dir: 'desc'}]" [rowHeight]="'auto'" [limit]="6">


                            <ngx-datatable-column name="Sr. #"  prop="">
                                <ng-template let-rowIndex="rowIndex" let-row="row" let-expanded="expanded"
                                    ngx-datatable-cell-template>
                                    {{rowIndex + 1}}
                                </ng-template>
                            </ngx-datatable-column>

                            <ngx-datatable-column name="Credit/Debit">
                                <ng-template let-row="row" ngx-datatable-cell-template>
                                  <p *ngIf = "row.creditNoteNo != null">
                      <i class="far fa-circle credit"></i>
                      Credit
                                    </p> 
                                    <p *ngIf = "row.creditNoteNo == null">
                      <i class="far fa-circle debit"></i>
                      Debit
                                    </p>
                                    
                                </ng-template>
                            </ngx-datatable-column>

                            <ngx-datatable-column name="Number" prop="name">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.creditNoteNo}}
                                    {{row.debitNoteNo}}
                                </ng-template>
                            </ngx-datatable-column>

                            <ngx-datatable-column name="Date" prop="genericName">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.creditNoteDate}}
                                    {{row.debitNoteDate}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Quantity" prop="quantity">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.quantity}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Amount" prop="amount">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.amount}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Tax" prop="taxPercentage">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.taxPercentage}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Action" prop="status">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    <div class="ibox-tools text-center">


                                        <button type="button" class="btn deleteIconBack"
                                            (click)="deleteCredit(row)">
                                            <i class="far fa-trash-alt"></i>
                                        </button>

                                    </div>
                                </ng-template>
                            </ngx-datatable-column>
                        </ngx-datatable>

                        <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="x.contractDebit"
                        *ngIf="x.contractDebit.length != 0" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                        [sorts]="[{prop: 'code', dir: 'desc'}]" [rowHeight]="'auto'" [limit]="6">


                        <ngx-datatable-column name="Sr. #"  prop="">
                            <ng-template let-rowIndex="rowIndex" let-row="row" let-expanded="expanded"
                                ngx-datatable-cell-template>
                                {{rowIndex + 1}}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Credit/Debit">
                            <ng-template let-row="row" ngx-datatable-cell-template>
                              <p *ngIf = "row.creditNoteNo != null">
                  <i class="far fa-circle credit"></i>
                  Credit
                                </p> 
                                <p *ngIf = "row.creditNoteNo == null">
                  <i class="far fa-circle debit"></i>
                  Debit
                                </p>
                                
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Number" prop="name">
                            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                {{row.creditNoteNo}}
                                {{row.debitNoteNo}}
                            </ng-template>
                        </ngx-datatable-column>

                        <ngx-datatable-column name="Date" prop="genericName">
                            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                {{row.creditNoteDate}}
                                {{row.debitNoteDate}}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="Quantity" prop="quantity">
                            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                {{row.quantity}}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="Amount" prop="amount">
                            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                {{row.amount}}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="Tax" prop="taxPercentage">
                            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                {{row.taxPercentage}}
                            </ng-template>
                        </ngx-datatable-column>
                        <ngx-datatable-column name="Action" prop="status">
                            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                <div class="ibox-tools text-center">


                                    <button type="button" class="btn deleteIconBack"
                                        (click)="deleteDebit(row)">
                                        <i class="far fa-trash-alt"></i>
                                    </button>

                                </div>
                            </ng-template>
                        </ngx-datatable-column>
                    </ngx-datatable>



                        </div>
                        </div>



                    </div>
                </div>
                <!-- </div> -->

<!-- Billing and payment -->

<div class="tab-pane fade show " id="nav-bill" role="tabpanel" aria-labelledby="nav-bill-tab">
    <div class="col-md-12">
        <div class="card bg-light shadow mb-4">
            <div class="pb-2 mt-2 ml-2">
        <div class="row">
            <div class="col-md-12 py-1">
                <div class="row mb-2">
                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                        <h1 class="row wrapper page-header font-weight-light">
                            <i class="fas fa-receipt mr-3"></i>
                          Commission Bill

                        </h1>
                    </div>
               
                </div>
            </div>
        </div>



        <div class="pb-2 mt-2 ml-2 BG" *ngIf = "commissionBill != null">

        

            <div class="row">
                <div class="col-md-6">
                    <dl class="row">
                        <dt class="col-sm-4">Bill No:
                       
                        </dt>
                        <dd class="col-sm-6">  {{commissionBill.billNo}}  </dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">Bill Amount:
                          
                        </dt>
                        <dd class="col-sm-6">{{commissionBill.amount}}  </dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">Bill Tax:</dt>
                        <dd class="col-sm-6"> {{commissionBill.taxPercentage}}%  </dd>
                    </dl>
                  
                  
                  
                </div>

                <div class="col-md-6">
                  
                    <!-- <dl class="row">
                        <dt class="col-sm-4">Bill Id:

                        </dt>
                        <dd class="col-sm-6">   </dd>
                    </dl> -->
                    <dl class="row">
                        <dt class="col-sm-4">Bill Status:</dt>
                        <dd class="col-sm-6">  <span class="badge badge-primary">{{commissionBill.billStatus}}</span> </dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">Bill Date:
                        </dt>
                        <dd class="col-sm-6">  {{commissionBill.billDate}} </dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-4">Tax No:</dt>
                        <dd class="col-sm-6"> </dd>
                    </dl>
                 
                  
                </div>

            </div>

   

        </div>

            </div>
        </div>

    </div>
</div>



                <div class="tab-pane fade show " id="nav-Documents" role="tabpanel" aria-labelledby="nav-Documents-tab">
                    <div class="col-md-12">
                        <div class="card bg-light shadow mb-4">
                            <div class="pb-2 mt-2 ml-2">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="far fa-file-alt mr-3"></i>
                                            Attached Documents
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="navigateUploadDoc('Add')">
                                            <i class="fas fa-plus"></i>
                                            Attatch New Document </button>
                                    </div>

                                </div>
                                <div class="row justify-content-end">


                                </div>

                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="rowsDoc"
                                [sorts]="[{ prop: 'createdByName,createdDateTime,description', dir: 'asce' }]"
                                [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
                                [limit]="10">

                             
                              
                                <ngx-datatable-column name="Department Name " prop="departmentName" [width]="80">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                         {{row.departmentName}}
                                    </ng-template>
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Document Type " prop="documentType" [width]="80">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{row.documentType}}
                                    </ng-template>
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Date " prop="fileDate" [width]="80">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{row.fileDate}}
                                    </ng-template>
                                </ngx-datatable-column>
                                <ngx-datatable-column name="File Name " prop="fileName" [width]="80">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{row.fileName}}
                                    </ng-template>
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Note" prop="notes" [width]="80">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{row.notes}}
                                    </ng-template>
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Uploaded By " prop="uploadedByName" [width]="80">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                         {{row.uploadedByName}}
                                    </ng-template>
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Action" [width]="80">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        <div class="ibox-tools text-center">
                                            <div class="ibox-tools text-center">
                                                <button type="button" class="btn editIconBack"
                                                data-toggle="tooltip" data-placement="top" title="Download" (click)="fileDownload(row)"><i class="fa fa-download"></i></button>

                                                <!-- <button type="button" class="btn deleteIconBack" title=""
                                                    data-original-title="Delete" (click)="deleteDocument(row)">

                                                    <i class="far fa-trash-alt"></i></button> -->
                                            </div>
                                        </div>
                                    </ng-template>
                                </ngx-datatable-column>
                            </ngx-datatable>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!---------- Notes/Activity Tab ---------->

                <div class="tab-pane fade show " id="nav-Notes" role="tabpanel" aria-labelledby="nav-Notes-tab">
                    <div class="col-md-12">
                        <div class="card bg-light shadow mb-4">
                            <div class="pb-2 mt-2 ml-2">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="far fa-file-alt mr-3"></i>
                                            Notes
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="ContractNotes('Add')">

                                            <i class="fas fa-plus"></i>
                                            Add New Note </button>
                                    </div>

                                </div>
                                <div class="row justify-content-end">

                                    <div class="col-md-4">
                                        <div class="form-group row">
                                            <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputSearch"
                                                    (keyup)="searchNotes($event)"
                                                    placeholder="Search by Contract Notes..">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="rows3"
                                    [sorts]="[{ prop: 'createdByName,createdDateTime,description', dir: 'asce' }]"
                                    [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
                                    [limit]="10">

                                    <ngx-datatable-column name="User" prop="createdByName" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{ row.createdByName }}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Time" prop="createdDateTime" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{ row.createdDateTime }}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Note Details " prop="description" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.title}} <br>
                                            {{row.description}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Action" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            <div class="ibox-tools text-center">
                                                <div class="ibox-tools text-center">
                                                    <button type="button" class="btn editIconBack"
                                                        (click)="editNote(row  , 'Edit')"><i
                                                            class="far fa-edit"></i></button>

                                                    <button type="button" class="btn deleteIconBack" title=""
                                                        data-original-title="Delete" (click)="deleteContractNote(row)">

                                                        <i class="far fa-trash-alt"></i></button>
                                                </div>
                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                        </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
     
        </div>
      
    </div>




</section>