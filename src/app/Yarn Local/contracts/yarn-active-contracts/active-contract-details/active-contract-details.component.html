<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="line-spin-fade" [fullScreen]="true">
    <p style="color: white"> Loading... </p>
</ngx-spinner>
<div class="content-header">
    <div class="row">
        <div class="col-sm-12 col-md-6 col-lg-8">
            <h2 class="row wrapper page-header font-weight-light"> Contract Details
                <div class="ml-2 descr"> Show all the details of business contract</div>
                <span class="ml-3 font-weight-light">{{contractData.buyerName}} </span>
                <span class="text-muted">(Con # {{contractData.autoContractNumber}} )</span>
            </h2>
        </div>

        <div class="col-sm-12 col-md-6 col-lg-4">
            <ol class="breadcrumb flt-RnL">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
            </ol>
        </div>

    </div>
</div>



<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <!-- Info boxes -->
        <div class="row">

            <div class="col-12 col-sm-6 col-md-6 col-xl-3 pt-2">
                <div class="topbox-1">
                    <div class="topbox-margin-top-text border-bottom"> Completion Status
                        <span class="badge badge-primary float-right">Active</span>
                    </div>

                    <div class="box-body">
                        <div class="mid-text">{{check}}%</div>
                        <br>
                            <ngb-progressbar class="progress-bar progress text_Navy" role="progressbar" aria-valuenow="15"
                            aria-valuemin="0" aria-valuemax="100" [value]="check"></ngb-progressbar>
                        <small class="topbox-margin-end-text">Last Action @</small>
                        <span class="text_Navy float-right ">19-Dec-2016 11:50</span>
                    </div>




                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>

            <div class="col-12 col-sm-6 col-md-6 col-xl-3 pt-2">
                <div class="topbox-1">
                    <div class="topbox-margin-top-text border-bottom"> Order Quantity
                    </div>

                    <div class="box-body">
                        <div class="mid-text">{{contractData.orderQuantity}}
                            <span class="topbox-margin-end-text">
                                {{contractCostingData.rateUOMName}}
                            </span>   
                        </div>
                            
                        <br>
                        <ngb-progressbar class="progress-bar progress text_Navy" role="progressbar" aria-valuenow="15"
                        aria-valuemin="0" aria-valuemax="100" [value]="25"></ngb-progressbar>
                        <small class="topbox-margin-end-text">
                            <i class="fas fa-truck"></i>
                            Total Delivered
                        </small>
                        <span class="text_Navy float-right ">{{contractData.saleInvoiceQuantity}}
                            {{contractCostingData.rateUOMName}}
                        </span>
                    </div>

                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>

            <div class="col-12 col-sm-6 col-md-6 col-xl-3 pt-2">
                <div class="topbox-1">
                    <div class="topbox-margin-top-text border-bottom"> Sale Invoice
                    </div>


                    <div class="box-body">
                        <div class="mid-text">{{contractData.orderAmount}}
                            <span class="topbox-margin-end-text">
                                {{contractCostingData.rateCurrencyName}}
                            </span>
                        </div>
                        <br>
                        <ngb-progressbar class="progress-bar progress text_Navy" role="progressbar" aria-valuenow="15"
                        aria-valuemin="0" aria-valuemax="100" [value]="25"></ngb-progressbar>
                        <small class="topbox-margin-end-text">
                            <i class="far fa-money-bill-alt"></i>
                            Invoice Sent
                        </small>
                        <span class="text_Navy float-right ">{{contractData.saleInvoiceAmount}}
                            {{contractCostingData.rateCurrencyName}}
                        </span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>

            <div class="col-12 col-sm-6 col-md-6 col-xl-3 pt-2">
                <div class="topbox-1">
                    <div class="topbox-margin-top-text border-bottom">Billing / Payment
                        <!-- <span class="badge badge-info float-right">Contract</span> -->
                    </div>

                    <div class="box-body">
                        <div class="mid-text">{{contractData.billingPayment}}</div>
                        <br>
                        <ngb-progressbar class="progress-bar progress text_Navy" role="progressbar" aria-valuenow="15"
                        aria-valuemin="0" aria-valuemax="100" [value]="25"></ngb-progressbar>
                        <small class="topbox-margin-end-text">
                            <i class="far fa-money-bill-alt"></i>
                            Amount Received
                        </small>
                        <span class="text_Navy float-right ">0.00 {{contractCostingData.rateCurrencyName}}

                        </span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>
        </div>
        <!-- /.row -->

        <div class="row py-3 justify-content-end">
            <div class="col-md-8 " *ngIf="contractData.status =='OnHold'">
                <button class="btn btn-warning border-rounded px-3 mr-2 text-white" (click)="statusOpen()">
                    <i class="fas fa-level-down-alt"></i>
                    Contract is currently On-Hold, Click to make it Active
                </button>
            </div>

            <div class="col-md-8 " *ngIf="contractData.status == 'Open' ">
                <button class="btn btn-danger btn-sm border-rounded px-3 mr-1 mrg-btm" 
                (click)="deleteContract(contractId)" 
                >
                    <i class="far fa-trash-alt"></i>
                    Delete
                </button>
                <button class="btn btn-danger btn-sm border-rounded px-3 mr-1 mrg-btm"
                    (click)="statusform('ContractCancel','Cancel','contract')">
                    <i class="fas fa-times"></i>
                    Cancle
                </button>
                <button class="btn btn-warning btn-sm border-rounded px-3 mr-1 text-white mrg-btm"
                    (click)="statusform('ContractOnHold','OnHold','contract')">
                    <i class="fas fa-level-down-alt"></i>
                    On-Hold
                </button>
                <button class="btn btn-info btn-sm border-rounded px-3 mr-1 mrg-btm">
                    <i class="far fa-clone"></i>
                    Revised
                </button>
                <button class="btn btn-outline-primary btn-sm border-rounded px-3 mr-1 mrg-btm"
                    (click)="statusform('ContractClosed','Closed','contract')">
                    <i class="fas fa-check"></i>
                    Closed
                </button>
                <button class="btn btn-info btn-sm border-rounded px-3 mr-1 mrg-btm" (click)=" readyForBill()">
                    <i class="fas fa-check"></i>
                    Ready For Bill
                </button>
            </div>
            <div class="col-md-8 " *ngIf="contractData.status =='BillAwaited'">
                <button class="btn btn-info border-rounded px-3 mr-2 text-white" (click)="statusOpen()">
                    <i class="fas fa-level-down-alt"></i>
                    Re-Open Contract
                </button>
                <button class="btn btn-warning border-rounded px-3 mr-2 text-white">
                    <i class="fas fa-level-down-alt"></i>
                    Contract Held For Billing
                </button>
            </div>
            <div class="col-md-4 text-right ">
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Yarn Local'" (click)="print()">
                    <i class="fas fa-print"></i>
                    Buyer
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Fabric Local'" (click)="print2()">
                    <i class="fas fa-print"></i>
                    Buyer
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Yarn Local'" (click)="printSeller()">
                    <i class="fas fa-print"></i>
                    Seller
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Fabric Local'"  (click)="printS()">
                    <i class="fas fa-print"></i>
                    Seller
                </button>
                <button class="btn btn-outline-primary border-rounded btn-sm px-3 mr-1" *ngIf = "loggedInDepartmentName == 'Yarn Export'" (click)="printSupplier()">
                    <i class="fas fa-print"></i>
                  Supplier
                </button>
                <!-- <button class="btn btn-outline-info border-rounded btn-sm px-3 mr-1">
                    <i class="fas fa-print"></i>
                    S
                </button>
                <button class="btn btn-outline-info border-rounded btn-sm px-3 mr-1">
                    <i class="fas fa-print"></i>
                    S2
                </button> -->
            </div>
        </div>

        <div class="card ibox-content">
            <div class="row">
                <div class="col-md-12">
                    <nav>
                        <div class="nav nav-pills " id="nav-tab" role="tablist">

                            <a class="nav-item nav-link active " id="nav-Details-tab" data-toggle="tab"
                                href="#nav-Details" role="tab" aria-controls="nav-Details" aria-selected="true">
                                Details</a>
                                <a class="nav-lcInfo nav-link " *ngIf="loggedInDepartmentName == 'Yarn Export'"
                                id="nav-lcInfo-tab" data-toggle="tab" href="#nav-lcInfo" role="tab"
                                aria-controls="nav-lcInfo" aria-selected="false">L/C Info &nbsp;
                                <span class="badge badge-pill badge-primary">{{rows5.length}}</span>
                                </a>

                            <a class="nav-delivery nav-link " *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export'"
                                id="nav-delivery-tab" data-toggle="tab" href="#nav-delivery" role="tab"
                                aria-controls="nav-delivery" aria-selected="false">Delivery TL &nbsp;<span
                                    class="badge badge-pill badge-primary">{{deliveryData.length}}</span></a>

                            <!-- <a class="nav-dispatches nav-link " *ngIf="loggedInDepartmentName=='Fabric Local'"
                                id="nav-dispatches-tab" data-toggle="tab" href="#nav-dispatches" role="tab"
                                aria-controls="nav-dispatches" aria-selected="false">Dispatches &nbsp;<span
                                    class="badge badge-pill badge-primary">{{dispatchData.length}}</span></a> -->

                            <a class="nav-prodPlan nav-link " *ngIf="loggedInDepartmentName=='Fabric Local'  || loggedInDepartmentName == 'Yarn Export'"
                                id="nav-prodPlan-tab" data-toggle="tab" href="#nav-prodPlan" role="tab"
                                aria-controls="nav-prodPlan" aria-selected="false">Prod Plan &nbsp;
                                <span class="badge badge-pill badge-primary">{{rows5.length}}</span>
                                </a>

                            <a class="nav-item nav-link " id="nav-Sale-tab" data-toggle="tab" href="#nav-Sale"
                                role="tab" aria-controls="nav-Sale" aria-selected="false">Sale Invoice &nbsp;<span
                                    class="badge badge-pill badge-primary">{{saleInvoice.length}}</span></a>

                            <a class="nav-item nav-link " id="nav-Documents-tab" data-toggle="tab" href="#nav-Documents"
                                role="tab" aria-controls="nav-Documents" aria-selected="false">Documents
                                <span class="badge badge-pill badge-primary">{{Documents.length}}</span>
                            </a>

                            <a class="nav-item nav-link " *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export'"
                                id="nav-Notes-tab" data-toggle="tab" href="#nav-Notes" role="tab"
                                aria-controls="nav-Notes" aria-selected="false">Notes &nbsp;<span
                                    class="badge badge-pill badge-primary">{{rows3.length}}</span></a>

                        </div>
                    </nav>
                </div>
            </div>

            <hr>

            <div class="tab-content" id="nav-tabContent">

                <!---------- Contract Details Tab ---------->

                <div class="tab-pane fade show active" id="nav-Details" role="tabpanel"
                    aria-labelledby="nav-Details-tab">

                    <div class="row">
                    
                        <div class="col-md-12">
                    
                    
                            <div class="row my-3">
                    
                                <div class="col-md-8">
                                    <div class="h2 ">
                                        <span><i class="fas fa-flag mr-3 text-secondary"></i>
                                            <span class="text-right text_Navy">{{contractData.autoContractNumber}}
                                            </span></span>
                                    </div>
                                </div>
                    
                                <div class="col-md-4 text-right">
                    
                    
                                    <button class="btn btn-primary btn-sm" [ngClass]="{ noDisplay : reminderToggle==true }"
                                        (click)="reminderToggle = !reminderToggle">
                                        <i class="far fa-bell"></i> No Reminder Set</button>
                    
                                    <button class="btn btn-outline-secondary btn-sm ml-1" [ngClass]="{ noDisplay : reminderToggle==true }">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                    
                    
                                    <div [ngClass]="{ noDisplay : reminderToggle == false }">
                                        <button class="btn btn-white float-right btn-xs" (click)="toggle()">
                                            <i class="fas fa-times"></i>
                                        </button>
                    
                                        <button class="btn btn-primary btn-xs" (click)=" AddReminder(); toggle()"> <i
                                                class="fas fa-check"></i>
                                        </button>
                                    </div>
                    
                    
                    
                                    <form #rem="ngForm" novalidate>
                                        <div class="col-md-12">
                                            <div [ngClass]="{ noDisplay : reminderToggle==false }">
                                                <input required class="form-control" ngbDatepicker #reminderDate="ngbDatepicker"
                                                    (click)="reminderDate.toggle()" placeholder="Reminder" [(ngModel)]="data.contractUpDate"
                                                    name="contractUpDate" [ngClass]="{'error': contractUpDate.invalid && rem.submitted }"
                                                    #contractUpDate="ngModel" />
                                            </div>
                                        </div>
                                    </form>
                    
                    
                    
                                    <div class="col-md-12 pt-2" *ngFor="let i of reminderData">
                                        <div class="text_Navy h5 mb-0">{{i.contractUpDate}}
                                            <button class="btn deleteIconBack " (click)="deleteReminder(i)"><i
                                                    class="far fa-trash-alt"></i></button>
                                        </div>
                    
                    
                                    </div>
                    
                    
                    
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                    
                    
                                        <div class="col-md-4 text-right">Status &amp; Stage:</div>
                                        <div class="col-md-8">
                    
                                            <span class="badge badge-primary" *ngIf="contractData.active == true">Active</span>
                                            <span class="badge badge-secondary" *ngIf="contractData.active == false">Inactive</span>
                                            <div class="badge badge-info ml-1" *ngIf="contractData.status == 'Open'">OPEN
                                            </div>
                                            <div class="badge badge-warning ml-1" *ngIf="contractData.status == 'OnHold'">
                                                On-Hold</div>
                                                <div class="badge badge-info ml-1" *ngIf="contractData.status == 'BillAwaited'">
                                                    Bill Awaited</div>
                                            <!-- <button class="btn "><i class="fas fa-history "></i></button> -->
                                            <button class="btn btn-outline-secondary btn-xs ml-1"><i class="fas fa-history "></i></button>
                                            <button class=" btn btn-sm btn-danger p-1 btnsm-f ml-1" *ngIf="contractData.isApproved == false"
                                                (click)="approveContract()">Click
                                                to Approve</button>
                                            <button class="  btn btn-sm btn-primary p-1 btnsm-f ml-1"
                                                *ngIf="contractData.isApproved == true">Approved</button>
                    
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <span>Contract On:</span> &nbsp;
                                    <span class="text_Navy font-weight-bold">
                    
                                        <i class="far fa-clock "></i>
                                        <span> {{contractData.createdDateTime}}</span>
                    
                                    </span>
                                </div>
                    
                            </div>
                    
                            <br>
                            <!-- <br> -->
                    
                    
                    
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary">General Information</span>
                                    </div>
                    
                                </div>
                            </div> -->
                    

                            <div class="border-top pt-3 pb-2">
                                <span class="badge badge-primary">General Information</span>
                            </div>


                            <!-- <div class="tab-content" id="nav-tabContent"> -->
                    
                            <!-- -------General Information Tab 1----------- -->
                            <!-- <div class="tab-pane fade show active" id="nav-general" role="tabpanel"
                                                    aria-labelledby="nav-general-tab"> -->
                    
                           <!--  <div class="row">
                                <div class="col-md-12 mb-2 py-1">
                    
                                    <div class="col-sm-12 text-muted">
                                                                <h4 class="font-weight-light">
                                                                    General Information
                                                                </h4>
                                                            </div>
                    
                                </div>
                            </div> -->
                    
                            <div class="row ">
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-6">Contract Owner:</dt>
                                        <dd class="col-sm-6 clr">
                                            <b> <span (click)="contractOwner()"> {{contractData.contractOwner}} </span> </b>
                                        </dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Created By:</dt>
                                        <dd class="col-sm-6">{{contractData.createdByName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6"> Last Updated By:</dt>
                                        <dd class="col-sm-6">{{contractData.updatedByName}}</dd>
                                    </dl>
                                </div>
                    
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-6">Contract No:</dt>
                                        <dd class="col-sm-6">{{contractData.autoContractNumber}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Created On:</dt>
                                        <dd class="col-sm-6">
                                            <i class="far fa-calendar-alt"></i>
                                            {{contractData.createdDateTime}}
                                        </dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6"> Last Updated On:</dt>
                                        <dd class="col-sm-6">
                                            <i class="far fa-calendar-alt"></i>
                                            {{contractData.updatedDateTime}}
                                        </dd>
                                    </dl>
                                </div>
                    
                            </div>
                    
                            <!-- </div> -->
                    
                            <!-- -------Parties Tab 2----------- -->
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary"> Parties</span>
                                    </div>
                    
                                </div>
                            </div> -->

                            <div class="border-top pt-3 pb-2">
                                <span class="badge badge-primary">Parties</span>
                            </div>
                    
                    
                            <div class="row">
                                <div class="col-md-6">
                    
                                    <dl class="row">
                                        <dt class="col-sm-6">Purchase Order #:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPartiesData.poNumber}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Buyer Name:</dt>
                                        <dd class="col-sm-6">{{contractPartiesData.buyerName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6"> Buyer POC:</dt>
                                        <dd class="col-sm-6">{{contractPartiesData.buyerPOCName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6"> Supplier Name:</dt>
                                        <dd class="col-sm-6">{{contractPartiesData.sellerName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6"> Supplier POC:</dt>
                                        <dd class="col-sm-6"> {{contractPartiesData.sellerPOCName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Supplier Contract #:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPartiesData.sellerContract}}</dd>
                                    </dl>
                    
                                </div>
                    
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-6"> PO Date:</dt>
                                        <dd class="col-sm-6">
                                            <i class="far fa-calendar-alt"></i>
                                            {{contractPartiesData.poDateToDisplay}}
                                        </dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Approved On:
                                        </dt>
                                        <dd class="col-sm-6">
                                            <i class="far fa-calendar-alt"></i>
                                            {{contractData.approvedOnToDisplay}}
                                        </dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Approved By:
                                        </dt>
                                        <dd class="col-sm-6">
                                            <i class="fas fa-user-tie"></i>
                                            {{contractData.approvedByName}}
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                        <dt class="col-sm-6">LC Opener:
                                        </dt>
                                        <dd class="col-sm-6">
                                           
                                          
                                        </dd>
                                    </dl>
                                </div>
                    
                            </div>
                    
                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right" (click)="editParties(contractData)">
                                        <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                    
                            <div class="border-top pt-3 pb-2" *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                <span class="badge badge-primary">Construction</span>
                            </div>
                    
                    
                            <div class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                <div class="col-md-6">
                    
                                    <dl class="row">
                                        <dt class="col-sm-6">Construction:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.construction}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Brand Name:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.brandName}}
                                            </dd>
                                    </dl>
                                  
                                 
                                </div>
                      
                    
                    
                            </div>
                    
                            <div class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right"
                                        (click)="editProductAndSpec(contractProductData)"> <i class="far fa-edit"></i></button>
                                </div>
                            </div> 

                            <div class="border-top pt-3 pb-2" *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                <span class="badge badge-primary">Article</span>
                            </div>
                    
                    
                            <div class="row"  *ngIf="loggedInDepartmentName=='Yarn Export'">
                                <div class="col-md-12">
                    
                                    <!-- <dl class="row">
                                        <dt class="col-sm-6">Article:
                                        </dt>
                                        <dd class="col-sm-6"></dd>
                                    </dl> -->
                                    <dl class="row">
                
                                        <dd class="col-md-12 pt-1" >
                                    
                                            <div *ngIf="loggedInDepartmentName=='Yarn Export'" >
                                                <div class="col-md-12 ">
                                                    <label class="col-sm-2 col-form-label">Articel Name:</label>
                                                    <label class="col-sm-3 col-form-label">Quantity:</label>
                                                    <label class="col-sm-2 col-form-label">Rate:</label>
                                                    <label class="col-sm-3 col-form-label">Commission:</label>

                                                <div class="form-group row" *ngFor="let a of contractArticles; let i = index;">
                                         
                        
                                                    <div class="col-md-3 ">
                                                        <div class="input-group">
                                                       
                                                        <ng-select [disabled]="a.isDeleted ==true" name="articleId_{{i}}" #articleId="ngModel" class="input-w px-0"
                                                        [(ngModel)]="a.articleId" placeholder="-- Select --">
                                                        <ng-option *ngFor="let c of article" [value]="c.id">{{ c.name }}
                                                        </ng-option>
                                                    </ng-select>
                                                   
                                                        </div>
                                                    </div>
                                                          <div class="col-md-3 ">

                                                            <div class="input-group">

                                                                <input type="number" [disabled]="a.isDeleted ==true" min="0" placeholder="quantity" #contractArticleQuantity="ngModel"
                                                                    class="form-control" [(ngModel)]="a.contractArticleQuantity" name="contractArticleQuantity_{{i}}">
                                                            
                                                            </div>
                                                        </div>
                                                          <div class="col-md-3">

                                                            <div class="input-group">
                                                                <input type="number" [disabled]="a.isDeleted ==true" min="0" placeholder="Rate" #contractArticleRate="ngModel"
                                                                    class="form-control" [(ngModel)]="a.contractArticleRate" name="contractArticleRate_{{i}}">
                                                             
                                                            </div>
                                                        </div>
                                                          <div class="col-md-2">

                                                            <div class="input-group">

                                                                <input type="number" [disabled]="a.isDeleted ==true" min="0" placeholder="Commission" #contractArticleCommission="ngModel"
                                                                class="form-control" [(ngModel)]="a.contractArticleCommission" name="contractArticleCommission_{{i}}">
                                                                
                                                            </div>
                                                        </div>
                                                        <div class="col-md-1">
                                                          <div class="input-group-append">
                                                            <button class="btn btn-outline-danger" [disabled]="a.isDeleted ==true" type="submit" (click)="removeArticle(a)">
                                                                <i class="fas fa-minus fa-xs"></i></button>
                                                                <span class="badge badge-danger h5 ml-2" *ngIf="a.isDeleted ==true">Deleted</span>
                                                        </div>
                                                        </div>
                                            </div>
                                       
                                            <div class="row">
                                                <div class="col-md-11 text-right">
                                                    <button class="btn btn-outline-primary btn-sm" (click)="addArticle()"> Add Another Article</button>
                                                </div>
                                            </div>
                    </div>
                                            </div>

                                        </dd>

                                    </dl>
                                </div>
                      
                    
                    
                            </div>
                            <div class="row"  *ngIf="loggedInDepartmentName=='Yarn Export'">
                                <div class="col-md-12 text-right">
                                    <button class="btn btn-outline-primary btn-sm" (click)="editArticle()"> Update Article</button>

                                </div>
                            </div>
                            <!-- <div class="row">
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right"
                                        (click)="editProductAndSpec(contractProductData)"> <i class="far fa-edit"></i></button>
                                </div>
                            </div> -->

                            <div class="border-top pt-3 pb-2" *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                <span class="badge badge-primary" *ngIf = "loggedInDepartmentName != 'Yarn Export'">Product & Specification</span>
                            </div>
                    
                    
                            <div class="row" >
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-6" *ngIf = "loggedInDepartmentName != 'Yarn Export'">Construction:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "loggedInDepartmentName != 'Yarn Export'">{{contractProductData.pecenetAge}}
                                            {{contractProductData.type}}{{contractProductData.construction}}</dd>
                    
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6" *ngIf = "loggedInDepartmentName != 'Yarn Export'" >Article:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "loggedInDepartmentName != 'Yarn Export'">{{contractProductData.articleName}}</dd>
                                     

                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">Piece Length:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.pieceLengthName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">Pick Insertion:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.pickInsertionName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">Blending Ratio &nbsp; Warp:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.blendingRatioWarpName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">&nbsp; &nbsp; Weft:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.blendingRatioWeftName}}</dd>
                                    </dl>
                                </div>
                                <div class="col-md-6">
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">GSM:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.gsm}}</dd>
                    
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">Weave:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.weaveName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">Selvedge:
                                        </dt>
                                        <dd class="col-sm-6">{{contractProductData.selvedgeName}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">Width:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf="contractProductData.width != null">{{contractProductData.width}} inch
                                        </dd>
                                    </dl>
                                   
                                </div>
                            </div>
                            <div class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right"
                                        (click)="editProductAndSpec(contractProductData)"> <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                    
                    
                            <!-- </div> -->
                    
                            <!-- -------Quantity & Costing Tab 4----------- -->
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary"> Quantity & Costing</span>
                                    </div>
                    
                                </div>
                            </div> -->


                            <div class="border-top pt-3 pb-2" >
                                <span class="badge badge-primary">Quantity & Costing</span>
                            </div>
                    
                    
                            <div class="row">
                                <div class="col-md-6">
                                    <dl class="row"  *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                        <dt class="col-sm-6">Currency:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.rateCurrencyName}}
                                          </dd>
                                    </dl>
                                    <dl class="row"  *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                        <dt class="col-sm-6">UOM:
                                        </dt>
                                        <dd class="col-sm-6">  {{contractCostingData.rateUOMName}}
                                          </dd>
                                    </dl>
                                    <dl class="row"  *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                        <dt class="col-sm-6">Tolerance value:
                                        </dt>
                                        <dd class="col-sm-6"> {{contractCostingData.quantityToleranceValue}}
                                          </dd>
                                    </dl>
                    
                                    <dl class="row"  *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">Quantity:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.quantity}}
                                            {{contractCostingData.quantityUOMName}} <b
                                                *ngIf="contractCostingData.quantityToleranceValue !=''">+/- </b>
                                            {{contractCostingData.quantityToleranceValue}} <b
                                                *ngIf="contractCostingData.quantityToleranceValue != ''"> % </b></dd>
                                    </dl>
                                    <!-- <dl class="row" *ngIf="loggedInDepartmentName=='Yarn Local' ||  loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">Quantity:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.quantity}}
                                            {{contractCostingData.quantityUOMName}}</dd>
                                    </dl> -->
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">Rate:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.rate}} <b *ngIf="contractCostingData.rateUOMName !=null">
                                                / </b>
                                            {{contractCostingData.rateUOMName}}</dd>
                    
                    
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">Project Cost:
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.rateCurrencyName}}
                                            {{contractCostingData.contractCost}}</dd>
                    
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName != 'Yarn Export' ">
                                        <dt class="col-sm-6">&nbsp; &nbsp;
                                        </dt>
                                        <dd class="col-sm-6">{{contractCostingData.rateCurrencyName}}
                                            {{contractCostingData.totalCostGSt}} <b *ngIf="contractCostingData.totalCostGSt != null">
                                                Inclusive Of GST</b></dd>
                    
                                    </dl>
                    
                    
                    
                                </div>
                                <div class="col-md-6">
                    
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">GST:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf="contractCostingData.gst != ''">{{contractCostingData.gst}}%</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">W.I.Tax:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf="contractCostingData.witAx != ''">{{contractCostingData.witAx}}%</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">
                                        </dt>
                                        <dd class="col-sm-6"><small>Subject to all taxes if applicable</small></dd>
                                    </dl>
                                </div>
                    
                    
                            </div>
                    
                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right" (click)="editQuantity(contractCostingData)">
                                        <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                    
                            <!-- </div> -->
                    
                            <!-- -------Payment & Delivery Terms Tab 5----------- -->
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary">Payment & Delivery Terms</span>
                                    </div>
                    
                                </div>
                            </div> -->


                            <div class="border-top pt-3 pb-2">
                                <span class="badge badge-primary">Payment & Delivery Terms</span>
                            </div>
                    
                    
                            <div class="row">
                                <div class="col-md-6">
                    
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">Payment terms:</dt>
                                        <dd class="col-sm-6">{{contractPaymentData.sellerPaymentTermName}}
                                            <b *ngIf="contractPaymentData.paymentTermDays != ''">
                                                {{contractPaymentData.sellerPaymentTermDays}} Days </b>
                                            {{contractPaymentData.sellerPaymentTermInfo}}
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                        <dt class="col-sm-6">Payment terms:</dt>
                                        <dd class="col-sm-6">{{contractPaymentData.paymentTermName}}
                                            <b *ngIf="contractPaymentData.paymentTermDays != ''">
                                                {{contractPaymentData.paymentTermDays}} Days </b>
                                            {{contractPaymentData.paymentTermInfo}}
                                        </dd>
                                    </dl>
                    
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">Buyer Payment terms:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPaymentData.buyerPaymentTermName}}
                                            <b *ngIf="contractPaymentData.buyerPaymentTermDays !=null">
                                                {{contractPaymentData.buyerPaymentTermDays}} Days </b>
                                            {{contractPaymentData.buyerSidePaymentTermInfo}}
                                        </dd>
                                        <dd class="col-sm-6"></dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Packing:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPaymentData.packingName}}
                                        </dd>
                                        <dd class="col-sm-6"></dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Price / Delivery Terms:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPaymentData.priceTermName}}
                                            {{contractPaymentData.destinationName}}
                                        </dd>
                                        <dd class="col-sm-6"></dd>
                                    </dl>
                                </div>
                    
                                <div class="col-md-6">
                    
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <dt class="col-sm-6">Payment Mode:
                                        </dt>
                                        <dd class="col-sm-6">{{contractPaymentData.paymentMode}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export'">
                                        <dt class="col-sm-6">
                                            Container:</dt>
                                        <dd class="col-sm-6">{{contractPaymentData.containerName}}</dd>
                                    </dl>
                    
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right"
                                        (click)="editPaymentAndDelivery(contractPaymentData)">
                                        <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                    
                            <!-- </div> -->
                    
                            <!-- -------Letter of Credit (L/C) Tab 6----------- -->
                            <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary"> Delivery TimeLine</span>
                                    </div>
                                    <div class="col-md-12">
                                        <button class="btn btn-outline-primary btn-sm float-right" (click)="addDeliveryTL('Add')">
                                            <i class="fas fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>


                            <!-- <div class="border-top pt-3 pb-2">
                                <span class="badge badge-primary">Delivery TimeLine</span>
                               
                            </div>
                            <div class="col-md-12">
                                <button class="btn btn-outline-primary btn-sm float-right" (click)="addDeliveryTL('Add')">
                                    <i class="fas fa-plus"></i></button>
                            </div> -->

                            <!-- <div class="row">
                                                    <div class="col-md-12 mb-4">
                                                        <button class="btn btn-outline-primary btn-sm float-right" >
                                                            Edit</button>
                                                    </div>
                                                </div> -->
                            <!-- <div class="tab-pane fade show " id="nav-letterCredit" role="tabpanel"
                                                    aria-labelledby="nav-letterCredit-tab"> -->
                    
                            <div class="panel-body mb-4">
                    
                                <ngx-datatable #myTable class="bootstrap" [columnMode]="'force'" [rows]="deliveryData" [headerHeight]="50"
                                    [footerHeight]="50" [sorts]="[{ prop: 'autoContractNumber', dir: 'desc' }]" [rowHeight]="'auto'"
                                    [limit]="6">
                    
                    
                                    <ngx-datatable-column name="S.No." prop="contractAge">
                                        <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                            {{rowIndex+1}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="L/C#" prop="contractAge">
                                        <ng-template let-row="row" ngx-datatable-cell-template>
                                            {{row.lcNo}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Supplier Date" prop="contractAge">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            <span class="badge badge-primary"></span>
                                            {{row.supplierDateDay}}-{{row.supplierDateMonth}}-{{row.supplierDateYear}}
                                        </ng-template>
                                    </ngx-datatable-column>
                    
                                    <ngx-datatable-column name="Buyer Date" prop="autoContractNumber">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.buyerDateDay}}-{{row.buyerDateMonth}}-{{row.buyerDateYear}}
                    
                                        </ng-template>
                                    </ngx-datatable-column>
                    
                                    <ngx-datatable-column name="Quantity " prop="contractOn">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.quantity}}
                                        </ng-template>
                                    </ngx-datatable-column>
                    
                                    <ngx-datatable-column name="Container" prop="poNumber" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.containerName}}
                                        </ng-template>
                                    </ngx-datatable-column>
                    
                                    <!-- <ngx-datatable-column name="Quantity" prop="scNumber">
                                                            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                                            </ng-template>
                                                          </ngx-datatable-column> -->
                    
                                    <ngx-datatable-column name="Action">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                    
                                            <div class="ibox-tools text-center">
                    
                                                <button type="button" class="btn editIconBack" (click)="editDeliveries(row, 'Edit')">
                                                    <i class="far fa-edit "></i>
                                                </button>
                    
                                                <button type="button" class="btn deleteIconBack" (click)="deleteDeliveries(row)">
                                                    <i class="far fa-trash-alt"></i>
                                                </button>
                    
                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                    
                    
                    
                    
                    
                    
                    
                            <!-- </div> -->
                    
                            <!-- -------Commission Tab 7----------- -->
                            <div class="border-top pt-3 pb-2">
                                <div *ngIf="loggedInDepartmentName=='Yarn Local'">
                                    <span class="badge badge-primary">Commission</span>
                                </div>
                                <div *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export'">
                                    <span class="badge badge-primary">Commission & Kickback</span>
                                </div>
                            </div>
                            <!-- <div class="tab-pane fade show " id="nav-commission" role="tabpanel"
                                                    aria-labelledby="nav-commission-tab"> -->
                    
                            <!-- <div class="row">
                                                        <div class="col-md-12 mb-2 py-1"> -->
                    
                            <!-- <div class="col-sm-12 text-muted">
                                                                <h4 class="font-weight-light">
                                                                    Commission (Supplier, Buyer & External Agent)
                                                                </h4>
                                                            </div> -->
                    
                            <!-- </div>
                                                    </div> -->
                    
                            <div class="row">
                                <div class="col-md-6">
                                    <dl class="row" *ngIf="loggedInDepartmentName=='Fabric Local' || loggedInDepartmentName == 'Yarn Export' ">
                                        <dt class="col-sm-6">Kickback:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.kickbackPercentage != null">PKR &nbsp; {{contractCommissionData.kickbackPercentage}} %
                                            <b *ngIf="contractCommissionData.kickbackUOMName!=null">/ </b>
                                          [PKR  {{contractCommissionData.commissionAmountKickback}} ]
                                        </dd>
                                    </dl>
                    
                                    <dl class="row">
                                        <dt class="col-sm-6">Fabcot Commission:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.fabCotCommision!= null">PKR {{contractCommissionData.fabCotCommision}} %
                                            <b *ngIf="contractCommissionData.fabCotCommisionUOMName!=null">/ </b>
                    
                                           [PKR {{contractCommissionData.commissionAmountFabcot}} ]
                                        </dd>
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">Buyer side Commission:
                                        </dt>
                                        <dd class="col-sm-6" *ngIf = "contractCommissionData.buyersideCommision != null"> PKR {{contractCommissionData.buyersideCommision}}  %
                                            <b *ngIf="contractCommissionData.commissionAmountBuyer!=null">/ </b>
                    
                                           [PKR {{contractCommissionData.commissionAmountBuyer}} ]
                                        </dd>
                                    </dl>
                                     <dl class="row" *ngIf = "loggedInDepartmentName == 'Yarn Export'">
                                                                <dt class="col-sm-6">Foreign Agent Comm:
                                                                </dt>
                                                                <dd class="col-sm-6"
                                                                    *ngFor="let i of agent">
                                                                    {{i.agentName}}: {{i.agentCommission}}%</dd>
                                                                    
                                                            </dl> 
                    
                    
                    
                                </div>
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right" (click)="editKickbackComm()">
                                        <i class="far fa-edit"></i></button>
                                </div>
                            </div>
                    
                    
                            <!-- </div> -->
                    
                            <!-- -------Employee Commission Tab 8----------- -->
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary"> Employee Commission</span>
                                    </div>
                    
                                </div>
                            </div> -->


                            <div class="border-top pt-3 pb-2">
                                <span class="badge badge-primary">Employee Commission</span>
                            </div>


                            <!-- <div class="tab-pane fade show " id="nav-employee" role="tabpanel"
                                                    aria-labelledby="nav-employee-tab"> -->
                    
                            <!-- <div class="row">
                                                        <div class="col-md-12 mb-2 py-1">
                    
                                                            <div class="col-sm-12 text-muted">
                                                                <h4 class="font-weight-light">
                                                                    Employee Commission
                                                                </h4>
                                                            </div>
                    
                                                        </div>
                                                    </div> -->
                    
                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right" (click)="AddEmployeeComm('Add')"> <i
                                            class="fas fa-plus"></i></button>
                                </div>
                            </div>
                    
                            <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="rows1" *ngIf="rows1.length != 0"
                                [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [sorts]="[{prop: 'code', dir: 'asce'}]"
                                [rowHeight]="'auto'" [limit]="6">
                    
                    
                                <ngx-datatable-column name="S. No." [width]="5" prop="">
                                    <ng-template let-rowIndex="rowIndex" let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{rowIndex + 1}}
                                    </ng-template>
                                </ngx-datatable-column>
                    
                                <ngx-datatable-column name="Agent">
                                    <ng-template let-row="row" ngx-datatable-cell-template>
                                        {{row.agentName}}
                                    </ng-template>
                                </ngx-datatable-column>
                    
                                <ngx-datatable-column name="Criteria" prop="name">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{row.beneficiaryCriteriaName}}
                                    </ng-template>
                                </ngx-datatable-column>
                    
                                <ngx-datatable-column name="Details" prop="genericName">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        {{row.criteriaDetail}}
                                    </ng-template>
                                </ngx-datatable-column>
                    
                                <ngx-datatable-column name="Action" prop="status">
                                    <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        <div class="ibox-tools text-center">
                    
                                            <button type="button" class="btn editIconBack"
                                                (click)="editEmployeeComm('editCommission' , row)">
                                                <i class="far fa-edit "></i>
                                            </button>
                    
                                            <button type="button" class="btn deleteIconBack" (click)="deleteCommission(row)">
                                                <i class="far fa-trash-alt"></i>
                                            </button>
                    
                                        </div>
                                    </ng-template>
                                </ngx-datatable-column>
                            </ngx-datatable>
                    
                    
                            <!-- </div> -->
                    
                            <!-- -------Tab 9----------- -->
                            <!-- <div class="form-row border-top">
                                <div class="col-md-12 pt-2r pb-3">
                    
                                    <div class="col-md-12">
                                        <span class="badge badge-primary">Remarks / Other Conditions</span>
                                    </div>
                    
                                </div>
                            </div> -->


                            <div class="border-top pt-3 pb-2">
                                <span class="badge badge-primary">Remarks / Other Conditions</span>
                            </div>
                            <!-- <div class="tab-pane fade show " id="nav-remarks" role="tabpanel"
                                                    aria-labelledby="nav-remarks-tab"> -->
                    
                            <!-- <div class="row">
                                                        <div class="col-md-12 mb-2 py-1">
                    
                                                            <div class="col-sm-12 text-muted">
                                                                <h4 class="font-weight-light">
                                                                    Remarks / Other Conditions
                                                                </h4>
                                                            </div>
                    
                                                        </div>
                                                    </div> -->
                    
                            <div class="row">
                                <div class="col-md-6">
                    
                                    <dl class="row">
                                        <dt class="col-sm-6">Remarks:
                    
                                        </dt>
                                        <dd class="col-sm-6">{{contractRemarksData.contractRemarks}}</dd>
                                    </dl>
                                    <dl class="row" *ngIf = "loggedInDepartmentName != 'Yarn Export'">
                                        <dt class="col-sm-6">Buyer Remarks:
                    
                                        </dt>
                                        <dd class="col-sm-6">{{contractRemarksData.buyerRemarks}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Other Condition:
                    
                                        </dt>
                                        <dd class="col-sm-6">{{contractRemarksData.otherConditionRemarks}}</dd>
                    
                                    </dl>
                                    <!-- <dl class="row">
                                                                <dt class="col-sm-6">Other Condition:
                                                                </dt>
                                                                <dd class="col-sm-6"></dd>
                    
                                                            </dl> -->
                                    <dl class="row">
                                        <dt class="col-sm-6">Preview Title:
                                        </dt>
                                        <dd class="col-sm-6">{{contractRemarksData.title}}</dd>
                    
                                    </dl>
                    
                    
                    
                                </div>
                                <div class="col-md-12 mb-4">
                                    <button class="btn btn-outline-primary btn-sm float-right" (click)="editRemarks(contractRemarksData)">
                                        <i class="far fa-edit"></i></button>
                                </div>
                    
                            </div>
                    
                    
                    
                    
                            <!-- </div> -->
                    
                            <!-- </div> -->
                    
                            <!-- ------ -->
                    
                        </div>
                    
                    </div>



                </div>


                <!-- Delivery TL Tab -->

                <div class="tab-pane fade show " id="nav-delivery" role="tabpanel" aria-labelledby="nav-delivery-tab">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="fas fa-list mr-3"></i>
                                            Deliveries TimeLine
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="addDeliveryTL('Add')">
                                            <i class="fas fa-plus"></i>
                                            Add Deliveries </button>
                                    </div>
                                </div>
                                <div class="row justify-content-end">

                                    <div class="col-md-4">
                                        <!-- <div class="input-group col-md-offset-3 float-right">
                                                        <label>Search:</label>
                                                        <input type="text" placeholder="" class="input form-control w-50" />
                                                    </div> -->

                                        <div class="form-group row">
                                            <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputSearch"
                                                    (keyup)="searchdelivery($event)" placeholder="Search by Items..">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="deliveryData"
                                    [sorts]="[{ prop: '', dir: 'asce' }]" [columnMode]="'force'" [headerHeight]="50"
                                    [footerHeight]="50" [rowHeight]="'auto'" [limit]="10">


                                    <ngx-datatable-column name="S.No." prop="lc" [width]="80">
                                        <ng-template let-row="row" let-rowIndex="rowIndex" let-expanded="expanded"
                                            ngx-datatable-cell-template>
                                            {{rowIndex+1}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="L/C#" prop="lc" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.lcNo}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Supplier Date" prop="supplierDate" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.supplierDateDay}}-{{row.supplierDateMonth}}-{{row.supplierDateYear}}

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Buyer Date" prop="buyerDate" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.buyerDateDay}}-{{row.buyerDateMonth}}-{{row.buyerDateYear}}

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Quantity" prop="quantity" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.quantity}}

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Container" prop="weight" [width]="80" *ngIf="loggedInDepartmentName=='Fabric Local'">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.containerName}}

                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Action" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>


                                            <div class="ibox-tools text-center">
                                                <button type="button" class="btn editIconBack"
                                                    (click)="editDeliveries(row, 'Edit')"><i
                                                        class="far fa-edit"></i></button>

                                                <button type="button" class="btn deleteIconBack" data-toggle="tooltip"
                                                    data-placement="top" title="" data-original-title="Delete"
                                                    (click)="deleteDeliveries(row)"> <i
                                                        class="far fa-trash-alt"></i></button>
                                            </div>

                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>

                            </div>

                        </div>
                    </div>
                </div>

                <!---------- dispatches Dates Tab ---------->

                <div class="tab-pane fade show " id="nav-dispatches" role="tabpanel"
                    aria-labelledby="nav-dispatches-tab">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="fas fa-truck mr-3 "></i>
                                            Dispatched Register
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="addDispatch('Add')">
                                            <i class="fas fa-plus"></i>
                                            Add Dispatches </button>
                                    </div>
                                </div>
                                <div class="row justify-content-end">

                                    <div class="col-md-4">
                                        <div class="form-group row">
                                            <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputSearch"
                                                    (keyup)="searchDispatch($event)" placeholder="Search ..">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <ngx-datatable #myTable class="bootstrap" [columnMode]="'force'" [headerHeight]="50"
                                    [rows]="dispatchData" [footerHeight]="50" [sorts]="[{ prop: 'id', dir: 'asce' }]"
                                    [rowHeight]="'auto'" [limit]="6">



                                    <ngx-datatable-column name="S.No.">
                                        <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                            {{rowIndex+1}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Dispatch No." prop="id">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.number}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Dispatch Date" prop="date">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.date}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Quantity" prop="quantity">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.quantity}}
                                        </ng-template>
                                    </ngx-datatable-column>

                                    <ngx-datatable-column name="Detail" prop="remarks">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.remarks}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Action">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                                            <div class="ibox-tools text-center">

                                                <button type="button" class="btn editIconBack"
                                                    (click)="editDispatch(row , 'Edit')">
                                                    <i class="far fa-edit "></i>
                                                </button>

                                                <button type="button" class="btn deleteIconBack"
                                                    (click)="deleteDispatch(row)">
                                                    <i class="far fa-trash-alt"></i>
                                                </button>

                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>

                                </ngx-datatable>
                            </div>
                        </div>
                    </div>
                </div>


                <!---------- Product Plan Tab ---------->

                <div class="tab-pane fade show " id="nav-prodPlan" role="tabpanel" aria-labelledby="nav-prodPlan-tab">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="far fa-clock mr-3"></i>
                                            Production Plan / Status
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="addProd()">
                                            <i class="fas fa-plus"></i>
                                            Add Production Status </button>
                                    </div>
                                </div>


                                <div class="row justify-content-end">

                                </div>

                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="getProdPlan"
                                    *ngIf="getProdPlan.length != 0" [sorts]="[{ prop: 'id,tnaItem', dir: 'asce' }]"
                                    [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
                                    [limit]="10">
                                    <ngx-datatable-column prop="id" name="S. No." [width]="20">


                                        <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Action Item" [width]="20" prop="tnaItem">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="Start Date" [width]="20" prop="startDate">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="End Date" [width]="20" prop="endDate">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="Quantity" [width]="20" prop="quantity">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="Details" [width]="20" prop="details">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column prop="id" name="Action" [width]="20">
                                        <ng-template let-row="row" ngx-datatable-cell-template>

                                            <div class="ibox-tools text-center">
                                                <button type="button" class="btn editIconBack"><i
                                                        class="far fa-edit"></i></button>

                                                <button type="button" class="btn deleteIconBack">
                                                    <i class="far fa-trash-alt"></i>
                                                </button>

                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>


                                </ngx-datatable>

                            </div>
                        </div>
                    </div>
                </div>
<!-- L/C info tab -->
<div class="tab-pane fade show " id="nav-lcInfo" role="tabpanel" aria-labelledby="nav-lcInfo-tab">
    <div class="col-md-12">

        <div class="row">
            <div class="col-md-12 py-1">
                <div class="row mb-2">
                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                        <h1 class="row wrapper page-header font-weight-light">
                            <i class="fas fa-receipt mr-3"></i>
                           Letter Of Credit

                        </h1>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                        <button class="btn btn-outline-primary btn-sm" (click) = "lcForm('add')"
                           >
                            <i class="fas fa-plus"></i>
                            Add New L/C Information </button>
                    </div>
                </div>
            </div>
        </div>



        <div class="card-body  BG" >

            <div class="row pb-5" >
                <div class="col-md-6 ">
                    <button class="btn btn-info btn-sm">
                        L/C #</button>
                </div>

                <div class="col-md-6 text-right">
                    <button class="btn btn-outline-primary btn-sm ml-3 " (click) = "lcForm('edit')"  >
                        <i class="far fa-edit"></i>
                        Edit L/C</button>
                    <button class="btn btn-outline-danger btn-sm ml-3 " >
                        <i class="far fa-trash-alt"></i>
                        Delete L/C</button>
                </div>

            </div>

            <!-- <div class="row">
                <div class="col-md-12 mb-3">
                    <button class="btn btn-outline-primary" (click)="editSaleInvoice('editInvoice',x)"> <i class="far fa-edit"></i>
                        Edit Invoice
                    </button>
                    <button class="btn btn-outline-danger ml-3 " (click)="deleteSaleInvoice(x)"> <i class="far fa-trash-alt"></i>
                        Delete</button>
            
                </div>
            </div> -->

            <div class="row">
                <div class="col-md-6">
                    <dl class="row">
                        <dt class="col-sm-6">L/C No.:

                        </dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-6">L/C Open by:

                        </dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-6">L/C Period:</dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-6">Remarks:</dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                </div>

                <div class="col-md-6">
                    <dl class="row">
                        <dt class="col-sm-6">L/C Opening Date:


                        </dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-6">Last Updated On:

                        </dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-6">L/C BL Date:
                        </dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-6">L/C Shipment Date:</dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                    <dl class="row">
                        <dt class="col-sm-6">L/C Expiry Date:


                        </dt>
                        <dd class="col-sm-6"></dd>
                    </dl>
                  
                </div>

            </div>

            <!-- <div class="row pb-5">
                <div class="col-md-6 ">

                </div>

            </div> -->

        </div>



    </div>
</div>


                <!---------- Sale Invoices Tab ---------->

                <div class="tab-pane fade show " id="nav-Sale" role="tabpanel" aria-labelledby="nav-Sale-tab">
                    <div class="col-md-12">

                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="row wrapper page-header font-weight-light">
                                            <i class="fas fa-receipt mr-3"></i>
                                            Sale Invoices

                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm"
                                            (click)="addinvoiceForm('addInvoice')">
                                            <i class="fas fa-plus"></i>
                                            Add Sale Invoice </button>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="card-body  BG" *ngFor="let x of saleInvoice; let i = index;">

                            <div class="row pb-5" >
                                <div class="col-md-6 ">
                                    <button class="btn btn-info btn-sm">
                                        Sale Invoice #{{i+1}}-{{x.saleInvoiceNo}}</button>
                                </div>

                                <div class="col-md-6 text-right">
                                    <button class="btn btn-outline-info btn-sm" (click)="addCredit(x,'Credit')"> <i class="fas fa-sticky-note"></i>
                                        Credit Note
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm ml-3 " (click)="addCredit(x,'Debit')">
                                        <i class="fas fa-sticky-note"></i>
                                        Debit Note</button>
                                    <button class="btn btn-outline-primary btn-sm ml-3 " (click)="editinvoice(x,'editInvoice')" >
                                        <i class="fas fa-sticky-note"></i>
                                        Edit</button>
                                    <button class="btn btn-outline-danger btn-sm ml-3 " (click)="deleteinvoice(x)">
                                        <i class="fas fa-sticky-note"></i>
                                        Delete</button>
                                </div>

                            </div>

                            <!-- <div class="row">
                                <div class="col-md-12 mb-3">
                                    <button class="btn btn-outline-primary" (click)="editSaleInvoice('editInvoice',x)"> <i class="far fa-edit"></i>
                                        Edit Invoice
                                    </button>
                                    <button class="btn btn-outline-danger ml-3 " (click)="deleteSaleInvoice(x)"> <i class="far fa-trash-alt"></i>
                                        Delete</button>
                            
                                </div>
                            </div> -->

                            <div class="row">
                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-6">Sale Invoice Status:

                                        </dt>
                                        <dd class="col-sm-6"></dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Sale Invoice No.:

                                        </dt>
                                        <dd class="col-sm-6">{{x.saleInvoiceNo}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Article:</dt>
                                        <dd class="col-sm-6">{{x.contractArticleName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Article Quantity:</dt>
                                        <dd class="col-sm-6">{{x.contractArticleQuantity}}</dd>
                                    </dl>
                                    
                                    <dl class="row">
                                        <dt class="col-sm-6">Article Rate:</dt>
                                        <dd class="col-sm-6">{{x.contractArticleRate}}</dd>
                                    </dl>

                                    <dl class="row">
                                        <dt class="col-sm-6">Last Updated by:


                                        </dt>
                                        <dd class="col-sm-6">{{x.updatedByName}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Buyer Payment:</dt>
                                        <dd class="col-sm-6">{{x.quantity}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Remarks:</dt>
                                        <dd class="col-sm-6">{{x.saleInvoiceRemarks}}</dd>
                                    </dl>
                                </div>

                                <div class="col-md-6">
                                    <dl class="row">
                                        <dt class="col-sm-6">Sale Invoice ID:


                                        </dt>
                                        <dd class="col-sm-6">{{i+1}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Invoice Date:

                                        </dt>
                                        <dd class="col-sm-6">{{x.saleInvoiceDate}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Article Unit:
                                        </dt>
                                        <dd class="col-sm-6">{{x.unit}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Invoice Amount:</dt>
                                        <dd class="col-sm-6">{{x.amount}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Tax Amount:</dt>
                                        <dd class="col-sm-6">{{x.taxPercentage}}</dd>
                                    </dl>
                                    
                                    <dl class="row">
                                        <dt class="col-sm-6">Last Updated on:


                                        </dt>
                                        <dd class="col-sm-6">{{x.updatedDateTime}}</dd>
                                    </dl>
                                    <dl class="row">
                                        <dt class="col-sm-6">Tax Challan Info:</dt>
                                        <dd class="col-sm-6">{{x.quantity}}</dd>
                                    </dl>
                                </div>

                            </div>

                            <div class="row pb-5">
                                <div class="col-md-6 ">

                                </div>

                                <div class="col-md-6 text-right">
                                    <button class="btn btn-outline-primary btn-sm" (click)="editpopup(rows)"> <i
                                            class="fas fa-edit"></i> Edit
                                    </button>

                                </div>

                            </div>




                            
                            <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="creditdebit"
                            *ngIf="creditdebit.length != 0" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                            [sorts]="[{prop: 'code', dir: 'asce'}]" [rowHeight]="'auto'" [limit]="6">


                            <ngx-datatable-column name="Sr. #"  prop="">
                                <ng-template let-rowIndex="rowIndex" let-row="row" let-expanded="expanded"
                                    ngx-datatable-cell-template>
                                    {{rowIndex + 1}}
                                </ng-template>
                            </ngx-datatable-column>

                            <ngx-datatable-column name="Credit/Debit">
                                <ng-template let-row="row" ngx-datatable-cell-template>
                                  <p *ngIf = "row.creditNoteNo != null">
                      <i class="far fa-circle credit"></i>
                      Credit
                                    </p> 
                                    <p *ngIf = "row.creditNoteNo == null">
                      <i class="far fa-circle debit"></i>
                      Debit
                                    </p>
                                    
                                </ng-template>
                            </ngx-datatable-column>

                            <ngx-datatable-column name="Number" prop="name">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.creditNoteNo}}
                                    {{row.debitNoteNo}}
                                </ng-template>
                            </ngx-datatable-column>

                            <ngx-datatable-column name="Date" prop="genericName">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.creditNoteDate}}
                                    {{row.debitNoteDate}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Quantity" prop="quantity">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.quantity}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Amount" prop="amount">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.amount}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Tax" prop="taxPercentage">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.taxPercentage}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Action" prop="status">
                                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    <div class="ibox-tools text-center">


                                        <button type="button" class="btn deleteIconBack"
                                            (click)="deleteCreditDebit(row)">
                                            <i class="far fa-trash-alt"></i>
                                        </button>

                                    </div>
                                </ng-template>
                            </ngx-datatable-column>
                        </ngx-datatable>





                        </div>



                    </div>
                </div>
                <!-- </div> -->
                <!---------- Notes/Activity Tab ---------->

                <div class="tab-pane fade show " id="nav-Documents" role="tabpanel" aria-labelledby="nav-Documents-tab">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="far fa-file-alt mr-3"></i>
                                            Attached Documents
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="navigateUploadDoc('Add')">
                                            <i class="fas fa-plus"></i>
                                            Attatch New Document </button>
                                    </div>

                                </div>
                                <div class="row justify-content-end">


                                </div>

                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="rows3"
                                    [sorts]="[{ prop: 'createdByName,createdDateTime,description', dir: 'asce' }]"
                                    [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
                                    [limit]="10">

                                    <ngx-datatable-column name="ID" prop="createdByName" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            <!-- {{ row.createdByName }} -->
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <!-- <ngx-datatable-column name="Dept" prop="createdDateTime" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                        </ng-template>
                                    </ngx-datatable-column> -->
                                    <ngx-datatable-column name="File Name " prop="description" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="File Type(KB) " prop="description" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="File Size " prop="description" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Notes " prop="description" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Uploaded On " prop="description" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Uploaded By " prop="description" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                                        </ng-template>
                                    </ngx-datatable-column>
                                    <!-- <ngx-datatable-column name="Action" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            <div class="ibox-tools text-center">
                                                <div class="ibox-tools text-center">
                                                    <button type="button" class="btn editIconBack"
                                                        (click)="editDocument(row  , 'Edit')"><i
                                                            class="far fa-edit"></i></button>

                                                    <button type="button" class="btn deleteIconBack" title=""
                                                        data-original-title="Delete" (click)="deleteDocument(row)">

                                                        <i class="far fa-trash-alt"></i></button>
                                                </div>
                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column> -->
                                </ngx-datatable>
                            </div>
                        </div>
                    </div>
                </div>
                <!---------- Notes/Activity Tab ---------->

                <div class="tab-pane fade show " id="nav-Notes" role="tabpanel" aria-labelledby="nav-Notes-tab">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12 py-1">
                                <div class="row mb-2">
                                    <div class="col-sm-12 col-md-6 col-lg-8 text-muted">
                                        <h1 class="font-weight-light">
                                            <i class="far fa-file-alt mr-3"></i>
                                            Notes
                                        </h1>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-4 text-right">
                                        <button class="btn btn-outline-primary btn-sm" (click)="ContractNotes('Add')">

                                            <i class="fas fa-plus"></i>
                                            Add New Note </button>
                                    </div>

                                </div>
                                <div class="row justify-content-end">

                                    <div class="col-md-4">
                                        <div class="form-group row">
                                            <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="inputSearch"
                                                    (keyup)="searchNotes($event)"
                                                    placeholder="Search by Contract Notes..">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="rows3"
                                    [sorts]="[{ prop: 'createdByName,createdDateTime,description', dir: 'asce' }]"
                                    [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'"
                                    [limit]="10">

                                    <ngx-datatable-column name="User" prop="createdByName" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{ row.createdByName }}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Time" prop="createdDateTime" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{ row.createdDateTime }}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Note Details " prop="description" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            {{row.title}} <br>
                                            {{row.description}}
                                        </ng-template>
                                    </ngx-datatable-column>
                                    <ngx-datatable-column name="Action" [width]="80">
                                        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                            <div class="ibox-tools text-center">
                                                <div class="ibox-tools text-center">
                                                    <button type="button" class="btn editIconBack"
                                                        (click)="editNote(row  , 'Edit')"><i
                                                            class="far fa-edit"></i></button>

                                                    <button type="button" class="btn deleteIconBack" title=""
                                                        data-original-title="Delete" (click)="deleteContractNote(row)">

                                                        <i class="far fa-trash-alt"></i></button>
                                                </div>
                                            </div>
                                        </ng-template>
                                    </ngx-datatable-column>
                                </ngx-datatable>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

    </div>

</section>