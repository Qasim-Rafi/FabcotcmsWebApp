<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="line-spin-fade" [fullScreen]="true">
  <p style="color: white"> Loading... </p>
</ngx-spinner>
<div *ngIf="menuName.menuName=='OpenContractReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Open Contracts
          <div class="ml-2 descr"> By default It displays the open contracts of past 3 months
           </div>
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Open Conctract Status</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-2 p-2">

          <div class="col-md-3">
            <div class="widget style1 yellow-bg  shadow">
              <div class="row">
                <div class="col-md-4">
                  <i class="fas fa-file-invoice-dollar fa-3x"></i>
                </div>
                <div class="col-md-8 text-right">
                  <h6> All Contracts </h6>
                <h6 class="font-bold" > {{totalContract}} <p class="topbox-small-text">&nbsp;</p></h6>

                </div>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="widget style1 bg-secondary shadow">
              <div class="row">
                <div class="col-md-4">
                  <i class="fas fa-wallet fa-3x"></i>
                </div>
                <div class="col-md-8 text-right">
                  <h6> Container</h6>
                  <h6 class="font-bold" >{{totalContainer}} <p class="topbox-small-text">&nbsp;</p></h6>

                </div>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="widget style1 bg-info shadow">
              <div class="row">
                <div class="col-md-4">
                  <i class="fas fa-hand-holding-usd fa-3x"></i>
                </div>
                <div class="col-md-8 text-right">
                  <h6> Quantity </h6>
                  <h6 class="font-bold" > {{totalQuantity}} <p class="topbox-small-text">&nbsp;</p></h6>

                </div>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="widget style1 bg-success shadow">
              <div class="row">
                <div class="col-md-4">
                  <i class="fa fa-calculator fa-3x"></i>
                </div>
                <div class="col-md-8 text-right">
                  <h6> Dispatch </h6>
                  <h6 class="font-bold" > {{totalDispatch}} <p class="topbox-small-text">&nbsp;</p></h6>
                </div>
              </div>
            </div>
          </div>


        </div>

          <form #filterForm="ngForm" novalidate>
            <div  [ngClass]="status ? 'add' : 'remove'">
            <div class="card">


            <div class="row p-2">

                <div class="form-group col-md-4">
                  <label for="description">Buyer Name:</label>
                  <ng-select placeholder="Buyer Name" name="buyerId" [(ngModel)]="data3.buyerId" #buyerId="ngModel">
                    <ng-option *ngFor="let i of buyer" [value]="i.id">
                      {{i.buyerName}}
                    </ng-option>
                  </ng-select>
                </div>

                <div class="form-group col-md-4 ">
                  <label for="description">Seller Name:</label>
                  <ng-select placeholder="Seller Name" name="sellerId" [(ngModel)]="data3.sellerId"
                    #sellerId="ngModel">
                    <ng-option *ngFor="let i of seller" [value]="i.id">
                      {{i.sellerName}}
                    </ng-option>
                  </ng-select>

                </div>

                <div class="form-group col-md-4">
                  <label for="description">Auto Contract#:</label>
                  <input type="text" placeholder="Contract Number" name="autoContractNumber"
                    [(ngModel)]="data3.autoContractNumber" #autoContractNumber="ngModel" class="form-control text-w-4">
                </div>


            </div>

            <div class="row p-2">

                <div class="form-group col-md-4">
                  <label for="description">Start Date:</label>
                  <input class="form-control" ngbDatepicker #reminderDate2="ngbDatepicker" (click)="reminderDate2.toggle()"
                  placeholder="Contract start Date" name="contractUpDate" name="contractDate"
                  [(ngModel)]="data3.startContractDate" #contractDate="ngModel" />
                </div>
                <div class="form-group col-md-4">
                  <label for="description">End Date:</label>

                    <input class="form-control" ngbDatepicker #reminderDate3="ngbDatepicker" (click)="reminderDate3.toggle()"
                    placeholder="Contract end Date" name="contractUpDate" name="contractDate"
                    [(ngModel)]="data3.endContractDate" #contractDate="ngModel" />

                </div>



            </div>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group row mt-3">
                  <div class="col-md-2 ml-8">
                    <button class="btn btn-outline-secondary pull-left btn-xs "><i class="fas fa-sync"></i>
                      Clear
                    </button>

                  </div>

                  <div class="col-md-4 ">
                    <button type="button" class="btn btn-primary btn-sm float-right" (click)="getOpenContractReport()">
                      Search Contract
                    </button>
                  </div>
                

                </div>
              </div>
            </div>
          </div>
        </div>
           



          </form>




        <div class="row">



          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" (keyup) = "openContractSearch($event)" />
                  </div>
                </div>
              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "openContractExcelFile()"><span>Excel</span></a>
                  <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "openContractPdf()"><span>Print</span></a>
                </div>
              </div>
              <div class="col-md-2 mb-1">
                <button type="button" class="btn btn-primary btn-sm ml-md-2 float-right"  (click)="clickEvent()"> Advance Filter <i class="fas fa-search fa-fw mr-2"></i></button>
                </div>
            </div>
          </div>
        </div>
      </div>

      <!-- <div class="card shadow mb-4">
        <div class="card-body"> -->
          <div class="panel-body">

 

            <ngx-datatable #myTable class="bootstrap datatable-row-wrapper" [columns]="columns" [rows]="rows"
            [columnMode]="'force'"   [headerHeight]="50" [sorts]="[{ prop: 'id', dir: 'asce' }]"
            [footerHeight]="30"
              [rowHeight]="50"
              [scrollbarH]="true"
              [scrollbarV]="true"
             style="height: 500px;">
  
            <ngx-datatable-column name="Age" prop="age"  >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <span class="badge badge-primary">{{row.age}}</span>
               
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Contract#">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <button class="clr" (click) = "navigateEditContract(row)" >  {{row.contractNo}}</button> <small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{row.manualContractNumber}})</small>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer"  [width]="320" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.buyerName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Seller"  [width]="320" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.sellerName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Date" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.date}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="PO#" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.poNumber}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Article" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.articleName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Rate">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>      {{ row.rate }} /  {{row.rateUOMName}}
              

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Container" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.containerCount}} {{ row.containerName }}  
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Qty Unit" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
               {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="Booking">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.booking }}  {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
           
  
  
            <ngx-datatable-column name="Dispatch" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.dispatch | number:'2.2-2'}}  {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="Balance" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.balanceQty }}  {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Cost">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <p *ngIf = "row.rateCurrencyName == 'PKR'">RS {{ row.cost }}</p>  
                <p *ngIf = "row.rateCurrencyName == 'USD'">$ {{ row.cost }}</p> 
                <p *ngIf = "row.rateCurrencyName == 'EUR'">€ {{ row.cost }}</p> 
                <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP {{ row.cost }}</p>    
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Seller Comm" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <div *ngIf = "row.sellerCommission != '' "> {{row.sellerCommission}}%   [      <p *ngIf = "row.rateCurrencyName == 'PKR'">RS</p>  
                  <p *ngIf = "row.rateCurrencyName == 'USD'">$  {{ row.sellerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'PKR'">RS  {{ row.sellerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'EUR'">€  {{ row.sellerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP  {{ row.sellerCommissionAmount }}</p>   ]</div>    

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer Comm" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <div *ngIf = "row.buyerCommission != '' "> {{row.buyerCommission}}%   [      <p *ngIf = "row.rateCurrencyName == 'PKR'">RS</p>  
                  <p *ngIf = "row.rateCurrencyName == 'USD'">$ {{ row.buyerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'PKR'">RS {{ row.buyerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'EUR'">€ {{ row.buyerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP {{ row.buyerCommissionAmount }}</p>   ]</div>    
              </ng-template>
            </ngx-datatable-column>
            <!-- <ngx-datatable-column name="Seller Payment Term" [width]="90">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
             {{ row.sellerPaymentTerm }}  

              </ng-template>
            </ngx-datatable-column> -->
            <ngx-datatable-column name="Payment Term S|B"  prop="paymentTerm" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.paymentTerm }}  

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Status" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <span class="badge badge-primary">{{row.status}}</span>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Agent" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.agent }}
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>




          </div>
        <!-- </div> -->
      <!-- </div> -->

    </div>
  </div>
</div>






<div *ngIf="menuName.menuName=='AgentBookingStatus'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Agent Booking
          <div class="ml-2 descr"> Display today's <strong>Tue 13-Jul-2021</strong> booking based on Contract Owner.
          </div>
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Agent Booking Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-3">
          <div class="col-sm-6 col-md-3">
            <button type="button" class="btn btn-primary btn-sm">0 Contacts
            </button>
      
          </div>
          <div class="col-sm-6 col-md-3">
            <button type="button" class="btn btn-primary btn-sm">0 Users
            </button>
        
          </div>
          <!-- <div class="col-sm-6 col-md-12 mrg-tsm">
            <button type="button" class="btn navy-bg btn-sm float-right">
              <i class="fa fa-filter"></i> Filter
            </button>
          </div> -->
        </div>


        <div class="row">
          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" (keyup) = agentBookingSearch($event) />
                  </div>
                </div>

                <!-- <div class="input-group col-md-offset-3">
                        <input type="text" placeholder="Search by City Name or Country" class="input form-control w-50"
                          (keyup)="search($event)" />
                      </div> -->

              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Excel</span></a>
                  <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"
                   (click) = "agentBookingPdf()"
                    ><span>Print</span></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'id,name', dir: 'desc' }]" [columns]="columns"
              [rows]="agentBookingStatus" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
              [rowHeight]="'auto'">
           
              <ngx-datatable-column name="Agent" prop="name" [width]="30">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.agentName }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Contracts" [width]="60">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <button type="button" class="btn btn-primary"  placement="right" ngbTooltip="Click To See Contract" (click)="seeContractMethod(row)">{{ row.contracts }}
                  </button>
                  
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Commission" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.commission }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Quantity" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.quantity }}
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='CancleContarctReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Cancel Contracts
          <div class="ml-2 descr"> By default It displays the cancel contracts of current Month
            i.e,<strong>July-2021</strong>.</div>
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Cancel Contract</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">


        <div class="row mb-4">

          <div class="col-md-3">
            <div class="widget style1 yellow-bg  shadow">
              <div class="row">
                <div class="col-md-4">
                  <i class="fas fa-file-invoice-dollar fa-3x"></i>
                </div>
                <div class="col-md-8 text-right">
                  <h6>Total:</h6>
                  <h6 class="font-bold" > {{totalContract}} <p class="topbox-small-text">&nbsp;</p></h6>
                </div>
              </div>
            </div>
          </div>
        
          <div class="col-md-3">
            <div class="widget style1 bg-secondary shadow">
              <div class="row">
                <div class="col-md-4">
                  <i class="fas fa-wallet fa-3x"></i>
                </div>
                <div class="col-md-8 text-right">
                  <h6> Container </h6>
                </div>
              </div>
            </div>
          </div>
        
          <div class="col-md-3">
            <div class="widget style1 bg-info shadow">
              <div class="row">
                <div class="col-md-4">
                  <i class="fas fa-hand-holding-usd fa-3x"></i>
                </div>
                <div class="col-md-8 text-right">
                  <h6>Quantity </h6>
                  <h6 class="font-bold"> {{totalQuantity}}<p class="topbox-small-text"></p></h6>
                </div>
              </div>
            </div>
          </div>
        
          <div class="col-md-3">
            <div class="widget style1 bg-success shadow">
              <div class="row">
                <div class="col-md-4">
                  <i class="fa fa-calculator fa-3x"></i>
                </div>
                <div class="col-md-8 text-right">
                  <h6> Dispatch </h6>
                  <h6 class="font-bold">  {{totalDispatch}}<p class="topbox-small-text"></p></h6>
                </div>
              </div>
            </div>
          </div>
        
        
        </div>



        <form #filterForm="ngForm" novalidate>
          <div  [ngClass]="status ? 'add' : 'remove'">
          <div class="card">


          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Buyer Name:</label>
                <ng-select placeholder="Buyer Name" name="buyerId" [(ngModel)]="data7.buyerId" #buyerId="ngModel">
                  <ng-option *ngFor="let i of buyer" [value]="i.id">
                    {{i.buyerName}}
                  </ng-option>
                </ng-select>
              </div>

              <div class="form-group col-md-4 ">
                <label for="description">Seller Name:</label>
                <ng-select placeholder="Seller Name" name="sellerId" [(ngModel)]="data7.sellerId"
                  #sellerId="ngModel">
                  <ng-option *ngFor="let i of seller" [value]="i.id">
                    {{i.sellerName}}
                  </ng-option>
                </ng-select>

              </div>

              <div class="form-group col-md-4">
                <label for="description">Auto Contract#:</label>
                <input type="text" placeholder="Contract Number" name="autoContractNumber"
                  [(ngModel)]="data7.autoContractNumber" #autoContractNumber="ngModel" class="form-control text-w-4">
              </div>


          </div>

          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Start Date:</label>
                <input class="form-control" ngbDatepicker #reminderDate2="ngbDatepicker" (click)="reminderDate2.toggle()"
                placeholder="Contract start Date" name="contractUpDate" name="contractDate"
                [(ngModel)]="data7.startContractDate" #contractDate="ngModel" />
              </div>
              <div class="form-group col-md-4">
                <label for="description">End Date:</label>

                  <input class="form-control" ngbDatepicker #reminderDate3="ngbDatepicker" (click)="reminderDate3.toggle()"
                  placeholder="Contract end Date" name="contractUpDate" name="contractDate"
                  [(ngModel)]="data7.endContractDate" #contractDate="ngModel" />

              </div>



          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="form-group row mt-3">
                <div class="col-md-2 ml-8">
                  <button class="btn btn-outline-secondary pull-left btn-xs "><i class="fas fa-sync"></i>
                    Clear
                  </button>

                </div>

                <div class="col-md-4 ">
                  <button type="button" class="btn btn-primary btn-sm float-right" (click)="cancelContractReport()">
                    Search Contract
                  </button>
                </div>
              

              </div>
            </div>
          </div>
        </div>
      </div>
         



        </form>



        <div class="row">
          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" (keyup) = "cancelContractSearch($event)" />
                  </div>
                </div>

                <!-- <div class="input-group col-md-offset-3">
                            <input type="text" placeholder="Search by City Name or Country" class="input form-control w-50"
                              (keyup)="search($event)" />
                          </div> -->

              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "cancleContractExcelFile()"><span>Excel</span></a>
                  <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "cancelContractPdf()" ><span>Print</span></a>
                </div>
              </div>
              <div class="col-md-2 mb-1">
                <button type="button" class="btn btn-primary btn-sm ml-md-2 float-right"  (click)="clickEvent()"> Advance Filter <i class="fas fa-search fa-fw mr-2"></i></button>
                </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <ngx-datatable #myTable  class="bootstrap datatable-row-wrapper" [columns]="columns" [rows]="cancelContract"
            [columnMode]="'force'"   [headerHeight]="50" [footerHeight]="50" [sorts]="[{ prop: 'id', dir: 'asce' }]"
            [rowHeight]="'auto'" [scrollbarH] = "true" [limit]="7">
  
            <ngx-datatable-column name="Age" prop="age"   >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <span class="badge badge-primary">{{row.age}}</span>
               
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Contract#" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <button class="clr" (click) = "navigateEditContract(row)" >  {{row.contractNo}}</button><small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{row.manualContractNumber}})</small>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer" [width]="320">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.buyerName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Seller" [width]="320">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.sellerName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Date" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.date}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="PO#" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.poNumber}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Article" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.articleName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Rate" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>      {{ row.rate }} /  {{row.rateUOMName}}
              

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Container" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.containerName }}  
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Qty Unit" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
               {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="Booking" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.booking }}  {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
         
  
  
            <ngx-datatable-column name="Dispatch" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.dispatch }}  {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="Balance" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.balanceQty }}  {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Cost" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <p *ngIf = "row.rateCurrencyName == 'PKR'">RS</p>  
                <p *ngIf = "row.rateCurrencyName == 'USD'">$</p> 
                <p *ngIf = "row.rateCurrencyName == 'EUR'">€</p> 
                <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP</p>    {{ row.cost }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Seller Comm">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <div *ngIf = "row.sellerCommission != '' "> {{row.sellerCommission}}%   [      <p *ngIf = "row.rateCurrencyName == 'PKR'">RS</p>  
                  <p *ngIf = "row.rateCurrencyName == 'USD'">$</p> 
                  <p *ngIf = "row.rateCurrencyName == 'EUR'">€</p> 
                  <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP</p>   {{ row.sellerCommissionAmount }} ]</div>    

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer Comm" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <div *ngIf = "row.buyerCommission != '' "> {{row.buyerCommission}}%   [      <p *ngIf = "row.rateCurrencyName == 'PKR'">RS</p>  
                  <p *ngIf = "row.rateCurrencyName == 'USD'">$</p> 
                  <p *ngIf = "row.rateCurrencyName == 'EUR'">€</p> 
                  <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP</p>   {{ row.buyerCommissionAmount }} ]</div>    
              </ng-template>
            </ngx-datatable-column>
            <!-- <ngx-datatable-column name="Seller Payment Term" [width]="90">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
             {{ row.sellerPaymentTerm }}  

              </ng-template>
            </ngx-datatable-column> -->
            <ngx-datatable-column name="Payment Term S|B" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.paymentTerm }}  

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Status" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <span class="badge badge-primary">{{row.status}}</span>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Canceled By" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.updatedBy }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Canceled On" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.updatedOn }}
              </ng-template>
            </ngx-datatable-column>
            <!-- <ngx-datatable-column name="Agent" [width]="90">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.agent }}
              </ng-template>
            </ngx-datatable-column> -->
            <ngx-datatable-column name="Contract Owner" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.contractOwner }}
              </ng-template>
            </ngx-datatable-column>
          
          </ngx-datatable>


          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='BillingReportInvoiceWise'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Billing Report
          <div class="ml-2 descr"> Invoice Wise Billing report (By default Last 3 months record displayed)</div>
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Billing & Payment</a></li>
          <li class="breadcrumb-item active" aria-current="page">Billing Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-2 mt-2">
          <div class="col-md-1">
            <button type="button" class="btn btn-primary btn-sm">{{billingReportInvoiceWise.length}} Bills
            </button>

          </div>

            <span class="text-muted text2">Select Date</span>
            <div class="col-md-2" (clickOutside)="startDate.close()">

              <input navigation="select" class="form-control  " ngbDatepicker #startDate="ngbDatepicker"
                (click)="startDate.toggle()" placeholder="Start date" name="startDate"
                [(ngModel)]="billingReportInvoiceWise.startDate" #startDate="ngModel" />
            </div>
            <span class="text-muted text2">To</span>
            <div class="col-md-2" (clickOutside)="endDate.close()">
              <input navigation="select" class="form-control  " ngbDatepicker #endDate="ngbDatepicker"
                (click)="endDate.toggle()" placeholder="End date" name="endDate"
                [(ngModel)]="billingReportInvoiceWise.endDate" #endDate="ngModel" />
            </div>
            <button type="button" class="btn btn-primary btn-sm" (click)="fetch()"><i class="fa fa-search"></i>Go!
            </button>
         
              <button type="button" class="btn btn-outline-secondary btn-sm ml-1"
              (click)="fetch()"> <i class="far fa-calendar"></i>&nbsp;All Dates
            </button>
  
          <div class="">

            <div class="form-group row ml-2">
              <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
              <div class="col-sm-9">
                <input type="text" class="input form-control form-control-sm" (keyup)="billInvSearch($event)" />
              </div>
            </div>

          </div>
          <div class="html5buttons mrg-tsm">
            <div class="dt-buttons btn-group btn-group-sm">
              <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
              <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
              <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0" (click)="invoiceExcelFile()" *ngIf = "loggedInDepartmentName != 'Yarn Local'"><span>Excel</span></a>
                <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0" (click)="invoiceExcelFileYarnlocal()" *ngIf = "loggedInDepartmentName == 'Yarn Local'"><span>Excel</span></a>
              <a class="btn btn-default buttons-print bg-white" tabindex="0" 
                aria-controls="DataTables_Table_0" (click) = "billingInvoicePdf2()" *ngIf = "loggedInDepartmentName != 'Yarn Local'"><span>Print</span></a>
                <a class="btn btn-default buttons-print bg-white" tabindex="0" *ngIf = "loggedInDepartmentName == 'Yarn Local'" 
                aria-controls="DataTables_Table_0" (click) = "billingInvoicePdf()"><span>Print</span></a>
                <a class="btn btn-default buttons-print bg-white" tabindex="0" *ngIf = "loggedInDepartmentName == 'Fabric Local'" 
                aria-controls="DataTables_Table_0" (click) = "billingInvoicePdfFabriclocal()"><span>Print</span></a>
            </div>
          </div>
         
          <button type="button" class="btn btn-primary btn-sm">Total Comm Amount: {{invoiceTotal}} 
          </button>
        </div>
    
 
        <!-- <div class="row mb-3" *ngIf = "loggedInDepartmentName != 'Yarn Export' && loggedInDepartmentName != 'Yarn Import' " >
          <div class="col-md-1"></div>
          <div class="col-md-3">
            <ng-select placeholder="Month" name="month" [(ngModel)] = "month"  
              >
              <ng-option value="Jan"> Jan</ng-option>
              <ng-option value="Feb"> Feb</ng-option>
              <ng-option value="Mar"> Mar</ng-option>
              <ng-option value="Apr"> Apr</ng-option>
              <ng-option value="May"> May</ng-option>
              <ng-option value="Jun"> Jun</ng-option>
              <ng-option value="Jul"> Jul</ng-option>
              <ng-option value="Aug"> Aug</ng-option>
              <ng-option value="Sep"> Sep</ng-option>
              <ng-option value="Oct"> Oct</ng-option>
              <ng-option value="Nov"> Nov</ng-option>
              <ng-option value="Dec"> Dec</ng-option>
            </ng-select>
          </div>

          <div class="col-md-3">
            <ng-select placeholder="Year" name="year" [(ngModel)] = "year" >
              <ng-option value="2016"> 2016</ng-option>
              <ng-option value="2017"> 2017</ng-option>
              <ng-option value="2018"> 2018</ng-option>
              <ng-option value="2019"> 2019</ng-option>
              <ng-option value="2020"> 2020</ng-option>
              <ng-option value="2021"> 2021</ng-option>
              <ng-option value="2022"> 2022</ng-option>
              <ng-option value="2023"> 2023</ng-option>
              <ng-option value="2024"> 2024</ng-option>
              <ng-option value="2025"> 2025</ng-option>
              <ng-option value="2020"> 2026</ng-option>
              <ng-option value="2021"> 2027</ng-option>
              <ng-option value="2022"> 2028</ng-option>
              <ng-option value="2023"> 2029</ng-option>
              <ng-option value="2024"> 3030</ng-option>
              <ng-option value="2025"> 3031</ng-option>
            </ng-select>
          </div>
        </div> -->

      </div>

      <div class="card shadow">
      
          
          
 
            <div class="panel-body">
              <kendo-grid
              [kendoGridBinding]="billingReportInvoiceWise"
              kendoGridSelectBy="id"
              [pageSize]="200000"
              [pageable]="false"
              [sortable]="true"
              [reorderable]="true"
              [resizable]="true"
              [height]="500"
              [pageable]="true"
              [filterable]="true"
              
             
              >
              <!-- [selectedKeys]="mySelection" -->
              <!-- <ng-template kendoGridToolbarTemplate>
               
                <input placeholder="Search in all columns..." class="col-md-3 form-control" #newItem kendoTextBox (input)="onFilter(newItem.value)"/>
                <h5> <span class="col-md-12 badge badge-info">Total Comm Amount: {{invoiceTotal}} </span></h5>
                  <kendo-grid-spacer></kendo-grid-spacer>
                  <div class="row">
                    <div class="col-md-12 mb-3">
                      <div class="row justify-content-end">
                        <div class="html5buttons mrg-tsm">
                          <div class="dt-buttons btn-group btn-group-sm">
                            <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0" aria-controls="DataTables_Table_0"
                             (click)="copyBillsList()" ngxClipboard><span>Copy</span>
                            </a>
                           
                            <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                            (click)="invoiceExcelFile()"  
                            aria-controls="DataTables_Table_0"><span>Excel</span></a>

                            <a class="btn btn-default buttons-print bg-white" tabindex="0"
                            (click) ="billingInvoicePdf2()" *ngIf = "loggedInDepartmentName != 'Yarn Local'" 
                            aria-controls="DataTables_Table_0"><span>Print</span></a>
                           
                            <a class="btn btn-default buttons-print bg-white" tabindex="0"
                            "billingInvoicePdf2()" *ngIf = "loggedInDepartmentName != 'Yarn Local'" 
                            aria-controls="DataTables_Table_0"><span>Print</span></a>

                            <a class="btn btn-default buttons-print bg-white" tabindex="0"
                            (click) = "billingInvoicePdf()" *ngIf = "loggedInDepartmentName == 'Yarn Local'"
                            aria-controls="DataTables_Table_0"><span>Print</span></a>
                          </div>
                        </div>
                  
                      </div>
                  
                    </div>
                  </div>
              </ng-template> -->
              <!-- <kendo-grid-checkbox-column [width]="35" [headerClass]="{'text-center': true}"  [class]="{'text-center': true}" [resizable]="false" [columnMenu]="false" [showSelectAll]="true"></kendo-grid-checkbox-column> -->
              
                  <kendo-grid-column field="articleName" title="Article" [width]="220" [headerClass]="'customiconforgrid'">
                      <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                        {{dataItem.articleName}}  {{dataItem.construction}}
                      </ng-template>
                  </kendo-grid-column>
              
                  <kendo-grid-column field="contractNo" title="Contract#" [width]="120" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                 
                      <button class="clr" (click) = "navigateEditContract(dataItem)" >  {{dataItem.contractNo}}</button> <small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{dataItem.manualContractNumber}})</small>
                    </ng-template>
                    
                  </kendo-grid-column>


                  
                  <kendo-grid-column field="contractDate" title="Contract Date" [width]="100" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      {{dataItem.contractDate}}
                    </ng-template>
                    
                  </kendo-grid-column>

                  <kendo-grid-column field="billDate" title="Bill Date" [width]="100" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      {{dataItem.billDate}}
                    </ng-template>
                    
                  </kendo-grid-column>
                  <!-- <kendo-grid-column field="autoContractNumber" title="Contract #" [width]="120" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      <button class="clr" (click) = "navigateEditContract(dataItem)" >
                        {{dataItem.autoContractNumber}}
                      </button>
                    </ng-template>
                    
                  </kendo-grid-column> -->
                  <kendo-grid-column field="billNo" title="Bill#" [width]="70" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      {{dataItem.billNo}}
                    </ng-template>
                    
                  </kendo-grid-column>
                  <kendo-grid-column field="sellerName" title="Seller" [width]="220" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      {{dataItem.sellerName}}
                    </ng-template>
                    
                  </kendo-grid-column>
                  <kendo-grid-column field="buyerName" title="Buyer" [width]="220" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      {{dataItem.buyerName}}
                    </ng-template>
                    
                  </kendo-grid-column>
                  <kendo-grid-column [headerClass]="'customiconforgrid'" field="Rate" title="Rate"  [width]="120">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      <b *ngIf = "dataItem.rateCurrencyName == 'PKR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">RS</b>  
                  <b *ngIf = "dataItem.rateCurrencyName == 'USD' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">$</b> 
                  <b *ngIf = "dataItem.rateCurrencyName == 'EUR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">€</b> 
                  <b *ngIf = "dataItem.rateCurrencyName == 'GBP' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">GBP</b>     {{ dataItem.rate }} /  {{ dataItem.uomName }}
                    </ng-template>
                    
                  </kendo-grid-column>
                  <kendo-grid-column field="fabcotCommission" title="Comm%" [width]="80" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      <!-- <span class="badge badge-primary"> {{dataItem.billStatus}}</span> -->
                      <span >{{ dataItem.fabcotCommission }} {{dataItem.quantityUOMName}} </span>
                    </ng-template>
                    
                  </kendo-grid-column>

                  <kendo-grid-column field="invoiceNo" title="Inv#" [width]="120" [headerClass]="'customiconforgrid'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      {{dataItem.invoiceNo}}
                    
                    </ng-template>
                    
                  </kendo-grid-column>


                  <kendo-grid-column field="quantity" title="Qty" [width]="120" [headerClass]="'customiconforgrid'" *ngIf = "loggedInDepartmentName == 'Yarn Local' || loggedInDepartmentName == 'Fabric Local'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      <div *ngIf="dataItem.debitQuantity == null ">   {{ dataItem.quantity }} {{ dataItem.quantityUOM }} </div>
               <div *ngIf = "dataItem.debitQuantity !=null">{{dataItem.remainingQuantity}} </div> <br>
               <div class="text-danger" *ngIf="dataItem.debitQuantity != null "> Db:[  {{dataItem.quantity}} - {{dataItem.debitQuantity}} ]  {{ dataItem.quantityUOM }} </div>
                    
                    </ng-template>
                    
                  </kendo-grid-column>

                  <kendo-grid-column field="quantity" title="Qty" [width]="120" [headerClass]="'customiconforgrid'" *ngIf = "loggedInDepartmentName != 'Yarn Local'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex" *ngIf = "loggedInDepartmentName != 'Yarn Local'">
                      {{ dataItem.quantity }} {{ dataItem.quantityUOM }}
                    
                    </ng-template>
                    
                  </kendo-grid-column>

                  <kendo-grid-column field="contractOwners" title="Contract Owners" [width]="120" [headerClass]="'customiconforgrid'" *ngIf = "loggedInDepartmentName == 'Yarn Export' || loggedInDepartmentName == 'Yarn Export Bangladesh'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      {{dataItem.contractOwners}}
                    
                    </ng-template>
                    
                  </kendo-grid-column>

                  <kendo-grid-column field="commissionAmount" title="Comm Amount" [width]="120" [headerClass]="'customiconforgrid'" *ngIf = "loggedInDepartmentName == 'Yarn Local' || loggedInDepartmentName == 'Fabric Local'">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      <div *ngIf="dataItem.debitAmount == null ">   {{ dataItem.commissionAmount }}   </div>     <b *ngIf = "dataItem.rateCurrencyName == 'PKR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">RS</b>  
                      <b *ngIf = "dataItem.rateCurrencyName == 'USD' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">$</b> 
                      <b *ngIf = "dataItem.rateCurrencyName == 'EUR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">€</b> 
                      <b *ngIf = "dataItem.rateCurrencyName == 'GBP' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">GBP</b>  
                    <div *ngIf = "dataItem.debitAmount !=null">{{dataItem.crdbCommission}} </div> <br>
                    
                    </ng-template>
                    
                  </kendo-grid-column>


                  <kendo-grid-column field="commissionAmount" title="Comm Amount" [width]="120" [headerClass]="'customiconforgrid'" *ngIf = "loggedInDepartmentName != 'Yarn Export' && loggedInDepartmentName != 'Yarn Export Bangladesh' && loggedInDepartmentName != 'Fabric Local' ">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                     
       <b *ngIf = "dataItem.rateCurrencyName == 'PKR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">RS</b>  
    <b *ngIf = "dataItem.rateCurrencyName == 'USD' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">$</b> 
    <b *ngIf = "dataItem.rateCurrencyName == 'EUR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">€</b> 
    <b *ngIf = "dataItem.rateCurrencyName == 'GBP' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">GBP</b>  
    {{ dataItem.commissionAmount }}  
                    </ng-template>
                    
                  </kendo-grid-column>





                  <!-- <kendo-grid-column field="action" title="Action" [width]="120"  [filterable]="false">
                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                      <div class="ibox-tools text-center">
                        <button type="button" class="btn editIconBack px-1 py-1" data-toggle="tooltip" data-placement="top" title=""
                          data-original-title="open" (click)="navigateOpenBill(dataItem)"><i class="far fa-edit"></i></button>
                        <button type="button" class="btn editIconBack px-1 py-1" data-toggle="tooltip" data-placement="top" title=""
                          (click)="navigatePaymentForm('addPayment' , dataItem)"><i class="fas fa-money-check-alt"></i></button>
                      </div>
                    </ng-template>
                    
                  </kendo-grid-column> -->
              </kendo-grid>
             
            </div>
        
   
          
       
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='DispatchReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Dispatch Report
          <div class="ml-2 descr"> this report shows the detail of all sale invoices with commission.</div>
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Dispatch Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="">
      <div class="panel-heading">

        

        <form #filterForm="ngForm" novalidate>
          <div  [ngClass]="status ? 'add' : 'remove'">
          <div class="card">


          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Buyer Name:</label>
                <ng-select placeholder="Buyer Name" name="buyerId" [(ngModel)]="data9.buyerId" #buyerId="ngModel">
                  <ng-option *ngFor="let i of buyer" [value]="i.id">
                    {{i.buyerName}}
                  </ng-option>
                </ng-select>
              </div>

              <div class="form-group col-md-4 ">
                <label for="description">Seller Name:</label>
                <ng-select placeholder="Seller Name" name="sellerId" [(ngModel)]="data9.sellerId"
                  #sellerId="ngModel">
                  <ng-option *ngFor="let i of seller" [value]="i.id">
                    {{i.sellerName}}
                  </ng-option>
                </ng-select>

              </div>
           
              <div class="form-group col-md-4">
                <label for="description">Auto Contract#:</label>
                <input type="text" placeholder="Contract Number" name="autoContractNumber"
                  [(ngModel)]="data9.autoContractNumber" #autoContractNumber="ngModel" class="form-control text-w-4">
              </div>


          </div>

          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Start Date:</label>
                <input class="form-control" ngbDatepicker #reminderDate2="ngbDatepicker" (click)="reminderDate2.toggle()"
                placeholder="Contract start Date" name="contractUpDate" name="contractDate"
                [(ngModel)]="data9.startContractDate" #contractDate="ngModel" />
              </div>
              <div class="form-group col-md-4">
                <label for="description">End Date:</label>

                  <input class="form-control" ngbDatepicker #reminderDate3="ngbDatepicker" (click)="reminderDate3.toggle()"
                  placeholder="Contract end Date" name="contractUpDate" name="contractDate"
                  [(ngModel)]="data9.endContractDate" #contractDate="ngModel" />

              </div>

              <div class="form-group col-md-4 ">
                <label for="description">Article Name:</label>
                <ng-select [(ngModel)]="data9.articleId" placeholder="All" name="articleId" #articleId="ngModel"
                >
                <ng-option *ngFor="let i of article" [value]="i.id">{{ i.name }}
                </ng-option>
                </ng-select>
              
              </div>

          </div>
          <div class="row p-2">

            <div class="form-group col-md-4 ">
              <label class="text-grey">Maturity Status</label>
              <ng-select [(ngModel)]="data9.maturityStatus" placeholder="All" name="maturityStatus" #maturityStatus="ngModel"
              >
              <ng-option value="null" selected>All</ng-option>
              <ng-option value="Matured">Matured</ng-option>
              <ng-option value="NotMatured">UnMatured</ng-option>
              </ng-select>
            
            </div>
            <div class="form-group col-md-4 ">
              <label class="text-grey">Payment Status</label>
              <ng-select [(ngModel)]="data9.paymentStatus" placeholder="All" name="paymentStatus" #paymentStatus="ngModel"
              >
              <ng-option value="null" selected>All</ng-option>
              <ng-option value="Received">Received</ng-option>
              <ng-option value="NotReceived">Not Received</ng-option>
            </ng-select>
            
            </div>
            <div class="form-group col-md-4 ">
              <label class="text-grey">Seller Bill Status</label>
              <ng-select [(ngModel)]="data9.sellerBill" placeholder="All" (change)="sellerbillstatus($event)" name="sellerBill" #sellerBill="ngModel"
              >
              <ng-option value="null" selected>All</ng-option>
              <ng-option value="Pending">Pending</ng-option>
              <ng-option value="Received">Received</ng-option>
            </ng-select>
            
            </div>

        </div>
        <div class="row">
          <div class="col-md-2 ml-8">
            <button class="btn btn-outline-secondary pull-left btn-xs "><i class="fas fa-sync"></i>
              Clear
            </button>

          </div>

          <div class="col-md-4 mb-2">
            <button type="button" class="btn btn-primary btn-sm float-right" (click)="getdispatchReport()">
              Search Contract
            </button>
          </div>
        </div>
        </div>
      </div>



        </form>

        <div class="row mb-2 mt-2 p-1">
          <div class="col-md-1">
            <button type="button" class="btn btn-primary btn-sm">0 Contracts
            </button>
          </div>
          <div class="col-md-1">
            <button type="button" class="btn blue-bg btn-sm">0 Invoices
            </button>
          </div>
          <div class="col-md-1">
          <button type="button" class="btn yellow-bg btn-sm">0 Invoice Amount
          </button>
          </div>
          <div class="col-md-1">
          <button type="button" class="btn blue-bg btn-sm">0 Seller Comm
          </button>
          </div>
          <div class="col-md-1">
          <button type="button" class="btn yellow-bg btn-sm ">0 Buyer Comm
          </button>
          </div>
          <div class="col-md-3 pr-0">

            <div class="form-group row">
              <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
              <div class="col-sm-9">
                <input type="text" class="input form-control form-control-sm" (keyup) = "dispatchSearch($event)" />
              </div>
            </div>
          </div>
          <div class="html5buttons mrg-tsm">
            <div class="dt-buttons btn-group btn-group-sm">
              <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
              <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
              <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0"><span>Excel</span></a>
              <a class="btn btn-default buttons-print bg-white" tabindex="0"
                aria-controls="DataTables_Table_0"><span>Print</span></a>
            </div>
          </div>
          <div class="col-md-2 mb-1">
            <button type="button" class="btn btn-primary btn-sm ml-md-2 float-right"  (click)="clickEvent()"> Advance Filter <i class="fas fa-search fa-fw mr-2"></i></button>
            </div>
        </div>

      </div>

      <div class="card shadow">
        <div class="">
          <div class="p-2">

            <ngx-datatable #myTable  class="bootstrap datatable-row-wrapper" [columns]="columns" [rows]="dispatchReport"
            [columnMode]="'force'"   [headerHeight]="50"  [sorts]="[{ prop: 'id', dir: 'asce' }]"
            [footerHeight]="30"
            [rowHeight]="50"
            [scrollbarH]="true"
            [scrollbarV]="true"
           style="height: 500px;" >
  
           
            <ngx-datatable-column name="Contract#">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <button class="clr" (click) = "navigateEditContract(row)" >  {{row.contractNo}}</button> <small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{row.manualContractNumber}})</small>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Contract Date">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.contractDate}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Inv#" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.invoiceNo}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Invoice Date">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.invoiceDate}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="B/L Date">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.billDate}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Pay Term">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.paymentTerm}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Matured On">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
             {{row.maturedOn}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer" [width]="320">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.buyerName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Seller" [width]="320">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.sellerName}}
              </ng-template>
            </ngx-datatable-column>
        
     
            <ngx-datatable-column name="Article">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.articleName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Rate" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>      {{ row.rate }} /  {{row.uomName}}
              

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Quantity" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              {{row.quantity}}  {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="Inv Amount'" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <p *ngIf = "row.rateCurrencyName == 'PKR'">RS</p>  
                <p *ngIf = "row.rateCurrencyName == 'USD'">$</p> 
                <p *ngIf = "row.rateCurrencyName == 'EUR'">€</p> 
                <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP</p>  {{row.invoiceAmount}} {{row.quantityUOMName}}
              </ng-template>
            </ngx-datatable-column>
        
  
        
       
            <ngx-datatable-column name="Seller Comm" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <div *ngIf = "row.sellerCommission != '' "> 
                  {{row.sellerCommission}}%         
                  <p *ngIf = "row.rateCurrencyName == 'PKR'">RS  {{ row.sellerCommissionAmount }}</p>  
                  <p *ngIf = "row.rateCurrencyName == 'USD'">$  {{ row.sellerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'EUR'">€  {{ row.sellerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP  {{ row.sellerCommissionAmount }}</p> </div>    

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Seller Bill" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                      <!-- <p *ngIf = "row.rateCurrencyName == 'PKR'">RS</p>  
                <p *ngIf = "row.rateCurrencyName == 'USD'">$</p> 
                <p *ngIf = "row.rateCurrencyName == 'EUR'">€</p> 
                <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP</p>  -->
                  {{ row.sellerBill }}     

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer comm" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                  {{ row.buyerCommissionAmount }}     

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer Bill" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
 
                  {{ row.buyerBill }}     

              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Status" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                  {{ row.status }}     

              </ng-template>
            </ngx-datatable-column>
            <!-- <ngx-datatable-column name="Buyer Comm" [width]="90">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <div *ngIf = "row.buyerCommission != '' "> 
                  {{row.buyerCommission}}% 
                  <p *ngIf = "row.rateCurrencyName == 'PKR'">RS {{ row.buyerCommissionAmount }}</p>  
                  <p *ngIf = "row.rateCurrencyName == 'USD'">$ {{ row.buyerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'EUR'">€ {{ row.buyerCommissionAmount }}</p> 
                  <p *ngIf = "row.rateCurrencyName == 'GBP'">GBP {{ row.buyerCommissionAmount }}</p>
                </div>    
              </ng-template>
            </ngx-datatable-column> -->
            <!-- <ngx-datatable-column name="Buyer Bill" [width]="90">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
             
                {{ row.buyerBill }}   

              </ng-template>
            </ngx-datatable-column> -->
          
         
            <ngx-datatable-column name="Matured Aging" >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                + {{ row.maturedAging }}
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='BillingReportContractWise'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Billing Report
          <div class="ml-2 descr"> Contract Wise Billing report (By default Last 3 months record displayed)</div>
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Billing & Payment</a></li>
          <li class="breadcrumb-item active" aria-current="page">Billing Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
<div class="card-body">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-2 mt-2">
          <div class="col-md-1">
            <button type="button" class="btn btn-primary btn-sm">{{contractWise.length}} Bills
            </button>
          </div>
          <div class="">
            <span class="text-muted text2">Select Date</span>
          </div>
          <div class="col-md-2">
            <input navigation="select" class="form-control  " ngbDatepicker #startDate="ngbDatepicker"
              (click)="startDate.toggle()" placeholder="Start date" name="startDate"
              [(ngModel)]="contractWise.startDate" #startDate="ngModel" />
          </div>
          <span class="text-muted text2">To</span>
          <div class="col-md-2">
            <input navigation="select" class="form-control  " ngbDatepicker #endDate="ngbDatepicker"
              (click)="endDate.toggle()" placeholder="End  date" name="endDate" [(ngModel)]="contractWise.endDate"
              #endDate="ngModel" />
          </div>
          <button type="button" class="btn btn-primary btn-sm" (click)="fetchContractInvise()"><i
            class="fa fa-search"></i>Go!
        </button>
        <button type="button" class="btn btn-outline-secondary btn-sm ml-1"
        (click)="fetchContractInvise()"> <i class="far fa-calendar"></i>&nbsp;All Dates
      </button>
      <div class="">
      <div class="form-group row ml-2">
        <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
        <div class="col-sm-9">
          <input type="text" class="input form-control form-control-sm" (keyup)="billContractSearch($event)"  />
        </div>
      </div>
    </div>
    <div class="html5buttons mrg-tsm">
      <div class="dt-buttons btn-group btn-group-sm">
        <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
          aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
        <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
          aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
        <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
          aria-controls="DataTables_Table_0" (click)="contractExcelFile()" *ngIf="loggedInDepartmentName !='Yarn Local'"><span>Excel</span></a>
          <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
          aria-controls="DataTables_Table_0" (click)="contractExcelFileyarn()" *ngIf="loggedInDepartmentName =='Yarn Local'"><span>Excel</span></a>
        <a class="btn btn-default buttons-print bg-white" tabindex="0"
          aria-controls="DataTables_Table_0" (click) = "billingContractPdf()"><span>Print</span></a>
      </div>
    </div>
    
    <button type="button" class="btn btn-primary btn-sm">Total Comm Amount: {{contractTotal}}
    </button>
        </div>
   

      </div>

      <div class="card shadow">
        
          <div class="panel-body">

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'billNo', dir: 'asc' }]" [columns]="columns"
              [rows]="contractWise" [columnMode]="'force'" [headerHeight]="50"[footerHeight]="30"
              [rowHeight]="50"
              [scrollbarH]="true"
              [scrollbarV]="true"
             style="height: 500px;">

              <!-- <ngx-datatable-column name="Bill For" prop="billFor" [width]="30">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.billFor }}
                </ng-template>
              </ngx-datatable-column> -->
              <ngx-datatable-column name="Article" prop="articleName" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.articleName }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Contract#" prop="contractNo" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <button class="clr" (click) = "navigateEditContract(row)" >  {{row.contractNo}}</button> <small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{row.manualContractNumber}})</small>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Contract Date" prop="contractDate">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.contractDate }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Bill Date" prop="billDate" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.billDate }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Bill#" prop="billNo" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.billNo }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Seller" prop="sellerName" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.sellerName }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Buyer" prop="buyerName" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.buyerName }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Rate" prop="rate">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">RS</b>  
                  <b *ngIf = "row.rateCurrencyName == 'USD' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">$</b> 
                  <b *ngIf = "row.rateCurrencyName == 'EUR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">€</b> 
                  <b *ngIf = "row.rateCurrencyName == 'GBP' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">GBP</b>   {{ row.rate }} / {{row.uomName}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Comm%" prop="fabcotCommission" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

                  <span *ngIf="row.fabcotCommission != ''">{{ row.fabcotCommission }} {{row.quantityUOMName}}</span>
                </ng-template>
              </ngx-datatable-column>
              <!-- <ngx-datatable-column name="Inv#" [width]="30">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.invoiceNo }}
                </ng-template>
              </ngx-datatable-column> -->
              <ngx-datatable-column name="Qty" prop="quantity" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.quantity }} {{ row.quantityUOM }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Comm Amount" prop="commissionAmount" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.commissionAmount }}      <b *ngIf = "row.rateCurrencyName == 'PKR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">RS</b>  
                  <b *ngIf = "row.rateCurrencyName == 'USD' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">$</b> 
                  <b *ngIf = "row.rateCurrencyName == 'EUR' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">€</b> 
                  <b *ngIf = "row.rateCurrencyName == 'GBP' && loggedInDepartmentName != 'Yarn Local' && loggedInDepartmentName != 'Fabric Local'">GBP</b>  
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
          </div>
      
      </div>

    </div>
    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='PaymentReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Payment Report
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Payment Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">



        <form #filterForm="ngForm" novalidate>
          <div  [ngClass]="status ? 'add' : 'remove'">
          <div class="card">


          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Buyer Name:</label>
                <ng-select placeholder="Buyer Name" name="buyerId" [(ngModel)]="data4.buyerId" #buyerId="ngModel">
                  <ng-option *ngFor="let i of buyer" [value]="i.id">
                    {{i.buyerName}}
                  </ng-option>
                </ng-select>
              </div>

              <div class="form-group col-md-4 ">
                <label for="description">Seller Name:</label>
                <ng-select placeholder="Seller Name" name="sellerId" [(ngModel)]="data4.sellerId"
                  #sellerId="ngModel">
                  <ng-option *ngFor="let i of seller" [value]="i.id">
                    {{i.sellerName}}
                  </ng-option>
                </ng-select>

              </div>

              <div class="form-group col-md-4 ">
                <label for="description">Sale Invoice Type:</label>
                <ng-select placeholder="Sale Invoice Type" name="saleInvoiceType" [(ngModel)]="data4.saleInvoiceType"
                  #saleInvoiceType="ngModel">
                  <ng-option value="null" selected>All</ng-option>
                  <ng-option value="UnPaid">UnPaid</ng-option>
                  <ng-option value="Partially Paid">Partially Paid</ng-option>
                  <ng-option value="Unpaid / Partially Paid">Unpaid / Partially Paid</ng-option>
                  <ng-option value="FullyPaid">Fully Paid</ng-option>
                </ng-select>

              </div>



          </div>

          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Start Date:</label>
                <input class="form-control" ngbDatepicker #reminderDate2="ngbDatepicker" (click)="reminderDate2.toggle()"
                placeholder="Contract start Date" name="contractUpDate" name="contractDate"
                [(ngModel)]="data4.startContractDate" #contractDate="ngModel" />
              </div>
              <div class="form-group col-md-4">
                <label for="description">End Date:</label>

                  <input class="form-control" ngbDatepicker #reminderDate3="ngbDatepicker" (click)="reminderDate3.toggle()"
                  placeholder="Contract end Date" name="contractUpDate" name="contractDate"
                  [(ngModel)]="data4.endContractDate" #contractDate="ngModel" />

              </div>



          </div>
          <div class="row mb-2">
            <div class="col-md-2 ml-8">
              <button class="btn btn-outline-secondary pull-left btn-xs "><i class="fas fa-sync"></i>
                Clear
              </button>

            </div>
            <div class="col-md-4 ">
              <button type="button" class="btn btn-primary btn-sm float-right" (click)="PaymentReport()">
                Search Contract
              </button>
            </div>
          </div>
        </div>
      </div>
  



        </form>



        <div class="row mb-3">
          <div class="col-md-1">
            <button type="button" class="btn btn-primary btn-sm">Invoice: 0
            </button>

          </div>
          <div class="col-md-1">
            <button type="button" class="btn yellow-bg btn-sm">Amount: {{paymentTotal | number:'2.2-2' }}
            </button>
          </div>
          <div class="col-md-1">
            <button type="button" class="btn blue-bg btn-sm">Received: 0
            </button>
          </div>
          <div class="col-md-1">
            <button type="button" class="btn navy-bg btn-sm">Balance: 0
            </button>
          </div>
          <div class="col-md-3">

            <div class="form-group row">
              <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
              <div class="col-sm-9">
                <input type="text" class="input form-control form-control-sm" (keyup) = "paymentSearch($event)" />
              </div>
            </div>

          </div>
          <div class="html5buttons mrg-tsm">
            <div class="dt-buttons btn-group btn-group-sm">
              <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
              <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
              <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                aria-controls="DataTables_Table_0" (click) = "paymentExcelFile()"><span>Excel</span></a>
              <a class="btn btn-default buttons-print bg-white" tabindex="0"
                aria-controls="DataTables_Table_0" (click) = "paymentPdf()"><span>Print</span></a>
            </div>
          </div>
          <div class="col-md-2 ">
            <button type="button" class="btn btn-primary btn-sm float-right"  (click)="clickEvent()"> Advance Filter <i class="fas fa-search fa-fw mr-2"></i></button>
            </div>

        </div>


      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'contractId', dir: 'desc' }]" [columns]="columns"
              [rows]="paymentReport"
               [columnMode]="'force'" 
               [headerHeight]="50"
               [footerHeight]="30"
            [rowHeight]="50"
            [scrollbarH]="true"
            [scrollbarV]="true"
           style="height: 500px;">
              <ngx-datatable-column name="Contact#" prop="autoContractNo">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <button class="clr" (click) = "navigateEditContract(row)" >  {{row.autoContractNo}}</button>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv #" prop="saleInvoiceNo" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.saleInvoiceNo }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv Date" prop="saleInvoiceDateToDisplay" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.saleInvoiceDateToDisplay }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Buyer" prop="buyerName" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.buyerName }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Seller" prop="sellerName" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.sellerName }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Quantity" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.quantity }} {{row.quantityUOMName}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Invoice Amount" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>        {{ row.amount }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Received" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR'" >RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>   {{ row.received }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Balance" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>   {{ row.balance }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Aging" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <span class="badge badge-primary">{{row.age}}</span>
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='TaxChallanReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Tax Challan Report
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Tax Challan Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-3">
          <div class="col-sm-6 col-md-3">
            <button type="button" class="btn btn-primary btn-sm">0 Invoice
            </button>
          
          </div>
          <div class="col-sm-6 col-md-3">
            <button type="button" class="btn yellow-bg btn-sm">0 Amount
            </button>
            
          </div>
          <div class="col-sm-6 col-md-3">
            <button type="button" class="btn blue-bg btn-sm">0 Received
            </button>
       
          </div>
          <div class="col-sm-6 col-md-3">
            <button type="button" class="btn navy-bg btn-sm">0 Balance
            </button>
          
          </div>
          <div class="col-sm-6 col-md-12 mrg-tsm">
            <button type="button" class="btn navy-bg btn-sm float-right">
              <i class="fa fa-filter"></i> Filter
            </button>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" />
                  </div>
                </div>

                <!-- <div class="input-group col-md-offset-3">
                    <input type="text" placeholder="Search by City Name or Country" class="input form-control w-50"
                      (keyup)="search($event)" />
                  </div> -->

              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a>
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Excel</span></a>
                  <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Print</span></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'id,name', dir: 'desc' }]" [columns]="columns"
              [rows]="taxChallanReport" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
              [rowHeight]="'auto'">
              <ngx-datatable-column prop="id" name="S. No." >
                <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                  {{ rowIndex+1 }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv #" prop="name" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.name }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv Date" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.country }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Buyer" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Seller" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Quantity" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Tax Amount" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Received" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Balance" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='CommissionReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Commission Report
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Commission Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-3">
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn btn-primary btn-sm">0 Invoices
            </button>
   
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn blue-bg btn-sm">0 Billed
            </button>
          
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn yellow-bg btn-sm">0 Received
            </button>
     
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn blue-bg btn-sm">0 Balance
            </button>
      
          </div>

          <div class="col-sm-6 col-md-12 mrg-tsm">
            <button type="button" class="btn navy-bg btn-sm float-right" (click)="filterPopUform('CommissionReport')">
              <i class="fa fa-filter"></i> Filter
            </button>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" (keyup)="CommissionReportsearch($event)" />
                  </div>
                </div>

                <!-- <div class="input-group col-md-offset-3">
                    <input type="text" placeholder="Search by City Name or Country" class="input form-control w-50"
                      (keyup)="search($event)" />
                  </div> -->

              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "commsionExcelFile()"><span>Excel</span></a>
                  <!-- <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "commissionPdf()"><span>Print</span></a> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <!-- <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'id,name', dir: 'desc' }]" [columns]="columns"
              [rows]="commissionReport" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
              [rowHeight]="'auto'">
     
              <ngx-datatable-column name="Contract#" prop="name" [width]="30">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.name }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Contract Date" [width]="60">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.country }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Bill#" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Bill For" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Buyer" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Seller" [width]="40">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv #" [width]="40">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv Date" [width]="30">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="B/L Date" [width]="60">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Payemnt Terms" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Matured On" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Article" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Quantity" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Comm%" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Amount" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Received" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Balance" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Received Status" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Maturity Status" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>

            </ngx-datatable> -->

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'id,name', dir: 'desc' }]" [columns]="columns"
              [rows]="commissionReport" 
              [columnMode]="'force'"
               [headerHeight]="50"
               [footerHeight]="30"
               [rowHeight]="50"
               [scrollbarH]="true"
               [scrollbarV]="true"
              style="height: 500px;">

              <ngx-datatable-column name="Contract#" prop="name" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <button class="clr" (click) = "navigateEditContract(row)" >  {{row.contractNo}}</button><small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{row.manualContractNumber}})</small>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Contract Date" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{row.contractDate}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Bill#" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{row.billNo}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Bill For" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{row.billFor}}
                </ng-template>
              </ngx-datatable-column>
          
              <ngx-datatable-column name="Buyer" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.buyer }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Seller" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{row.seller}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Sale Inv#" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.saleInvoiceNo }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Invoice Date" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.saleInvoiceDate }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="BL Date" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.blDate }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Article" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.article }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Quantity">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.quantity }} {{row.quantityUOMName}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Amount">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                  <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                  <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                  <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>      {{ row.amount }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Received" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.received }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Balance" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.balance }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Payment Terms" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.paymentTerm }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Comm" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.commission }}%
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='DbcrNoteSummary'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> Debit/Credit Note
          <div class="ml-2 descr">Summary Report</div>

        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Debit/Credit Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-3">
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn btn-primary btn-sm">{{DbCrData.length}}
            </button>
            <span class="text-muted text2">D/C Notes</span>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" (keyup) = "dbCrSearch($event)" />
                  </div>
                </div>

                <!-- <div class="input-group col-md-offset-3">
                    <input type="text" placeholder="Search by City Name or Country" class="input form-control w-50"
                      (keyup)="search($event)" />
                  </div> -->

              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "dbCrExcelFile()"><span>Excel</span></a>
                  <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click)  = "dbCrReportPdf()"><span>Print</span></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'id,name', dir: 'desc' }]" [columns]="columns"
              [rows]="DbCrData" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
              [rowHeight]="'auto'">
            
              <ngx-datatable-column name="Contract#" prop="name" [width]="30">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.autoContractNumber }}<small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{row.manualContractNumber}})</small>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Buyer" [width]="60"  prop="buyerName">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.buyerName }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Supplier" [width]="50"  prop="sellarName" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.sellerName }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Date" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.date }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv#" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.saleInvoiceNo }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="D/C Note" [width]="40">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.dC_Note }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Article" [width]="30">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.article }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Quantity" [width]="60">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.quantity }} {{row.quantityUOMName}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Amount" [width]="50">
                 <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>       {{ row.amount }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Remarks" [width]="50">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.remarks }}
                </ng-template>
              </ngx-datatable-column>

            </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='ExternalAgentReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light"> External Agent Commission Report
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">External Agent Commission Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-3">
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn btn-primary btn-sm">0
            </button>
            <span class="text-muted text2">Contract</span>
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn blue-bg  btn-sm">0
            </button>
            <span class="text-muted text2">Amount</span>
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn yellow-bg  btn-sm">0
            </button>
            <span class="text-muted text2">Paid </span>
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn blue-bg btn-sm">0
            </button>
            <span class="text-muted text2">Balance</span>
          </div>

        </div>

        <form #filterForm="ngForm" novalidate>
          <div  [ngClass]="status ? 'add' : 'remove'">
          <div class="card">


          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Agent Name:</label>
                <ng-select placeholder="Select an Agent" [(ngModel)]="data8.agentId" #agentId="ngModel" name="agentId">
                  <ng-option *ngFor="let i of agents" [value]="i.id">
                    {{i.name}}
                  </ng-option>
                </ng-select>
              </div>

              <div class="form-group col-md-4 ">
                <label for="description">Seller Name:</label>
                <ng-select placeholder="Seller Name" name="sellerId" [(ngModel)]="data8.sellerId"
                  #sellerId="ngModel">
                  <ng-option *ngFor="let i of seller" [value]="i.id">
                    {{i.sellerName}}
                  </ng-option>
                </ng-select>

              </div>

              <div class="form-group col-md-4">
                <label for="description">Auto Contract#:</label>
                <input type="text" placeholder="Contract Number" name="autoContractNumber"
                  [(ngModel)]="data8.autoContractNumber" #autoContractNumber="ngModel" class="form-control text-w-4">
              </div>


          </div>
          <div class="row p-2">

            <div class="form-group col-md-4">
              <label class="text-grey">Maturity Status</label>
              <ng-select [(ngModel)]="data8.maturityStatus" placeholder="All" name="maturityStatus" #maturityStatus="ngModel"
              >
              <ng-option value="null" selected>All</ng-option>
              <ng-option value="Matured">Matured</ng-option>
              <ng-option value="NotMatured">UnMatured</ng-option>
              </ng-select>
            </div>

            <div class="form-group col-md-4">
              <label class="text-grey">Payment Status</label>
              <ng-select [(ngModel)]="data8.paymentStatus" placeholder="All" name="paymentStatus" #paymentStatus="ngModel"
              >
              <ng-option value="null" selected>All</ng-option>
              <ng-option value="Received">Received</ng-option>
              <ng-option value="NotReceived">Not Received</ng-option>
              </ng-select>
            </div>

        </div>

        </div>
      </div>
          <div class="row">
            <div class="col-md-12">
              <div class="form-group row mt-3">
                <div class="col-md-2 ml-8">
                  <button class="btn btn-outline-secondary pull-left btn-xs "><i class="fas fa-sync"></i>
                    Clear
                  </button>

                </div>

                <div class="col-md-4 ">
                  <button type="button" class="btn btn-primary btn-sm float-right" (click)="externalAgentReport()">
                    Search Contract
                  </button>
                </div>
                <div class="col-md-6 mb-1">
                <button type="button" class="btn btn-primary btn-sm ml-md-2 float-right"  (click)="clickEvent()"> Advance Filter <i class="fas fa-search fa-fw mr-2"></i></button>
                </div>

              </div>
            </div>
          </div>



        </form>


        <div class="row">
          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" (keyup) = "externalAgentSearch($event)" />
                  </div>
                </div>

                <!-- <div class="input-group col-md-offset-3">
                    <input type="text" placeholder="Search by City Name or Country" class="input form-control w-50"
                      (keyup)="search($event)" />
                  </div> -->

              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Excel</span></a>
                  <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "agentPdf()"><span>Print</span></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'id,name', dir: 'desc' }]" [columns]="columns"
              [rows]="externalAgent" [columnMode]="'force'" [headerHeight]="50"
              [footerHeight]="30"
              [rowHeight]="50"
              [scrollbarH]="true"
              [scrollbarV]="true"
             style="height: 500px;">
           
              <ngx-datatable-column name="Contract#" prop="name" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <button class="clr" (click) = "navigateEditContract(row)" >  {{row.contractNo}}</button><small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{row.manualContractNumber}})</small>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Contract Date" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.contractDate }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Buyer" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.buyer }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Seller" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.seller }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Ext Agent" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.ext_Agents }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv #" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.saleInvoiceNo }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Inv Date" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.saleInvoiceDate }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="B/L Date" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.blDate }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Payemnt Terms" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.paymentTerms }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Matured On" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.muturedon }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Article" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.article }}
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="Rate" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                  <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                  <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                  <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>      {{ row.rate }} / {{row.rateUOMName}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Quantity" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.quantity }} {{row.quantityUOMName}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Comm %" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.commission }}%
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Comm Amount" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>     {{ row.totalCommissionAmount }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Paid" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <b *ngIf = "row.rateCurrencyName == 'PKR' && row.paid != null">RS {{ row.paid }}</b>  
                  <b *ngIf = "row.rateCurrencyName == 'USD' && row.paid != null">$ {{ row.paid }}</b> 
                  <b *ngIf = "row.rateCurrencyName == 'EUR' && row.paid != null">€ {{ row.paid }}</b> 
                  <b *ngIf = "row.rateCurrencyName == 'GBP' && row.paid != null">GBP {{ row.paid }}</b> 
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Balance" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.balance }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Paid Status" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <span class="badge badge-info"> {{ row.paidStatus }}</span>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Maturity Status" [width]="120">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  <span class="badge badge-info"> {{ row.muturedstatus }}</span>
                </ng-template>
              </ngx-datatable-column>

            </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='LCReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light">LC Report
          <div class="ml-2 descr">It shows the status of LC of each contract.</div>
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">LC Report</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-3">
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn blue-bg btn-sm">0
            </button>
            <span class="text-muted text2">Total Contract</span>
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn btn-primary  btn-sm">0
            </button>
            <span class="text-muted text2">LC Received</span>
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn btn-danger  btn-sm">0
            </button>
            <span class="text-muted text2">LC Not Received </span>
          </div>
          <div class="col-sm-6 col-md-12 mrg-tsm">
            <button type="button" class="btn navy-bg btn-sm float-right" >
              <i class="fa fa-filter"></i> Filter
            </button>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" />
                  </div>
                </div>

                <!-- <div class="input-group col-md-offset-3">
                    <input type="text" placeholder="Search by City Name or Country" class="input form-control w-50"
                      (keyup)="search($event)" />
                  </div> -->

              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a>
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Excel</span></a>
                  <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Print</span></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'id,name', dir: 'desc' }]" [columns]="columns"
              [rows]="lCReport" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="'auto'">
              <ngx-datatable-column prop="id" name="S. No." [width]="40">
                <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                  {{ rowIndex+1 }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Age" prop="name" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.name }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Contract#" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.country }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="SC">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Buyer" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Seller" [width]="320">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Date">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="PO#" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Article" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Rate">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Container" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Booking" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column name="Disptach" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Balance" >
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Cost">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Status">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Agent">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="LC">
                <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                  {{ row.details }}
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
<div *ngIf="menuName.menuName=='KickbackReport'">
  <div class="content-header">

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light">Kickback Contracts
          <div class="ml-2 descr">By default It displays the kickback contracts of current Month i.e,
            <strong>July-2021</strong> .</div>
        </h2>
      </div>

      <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Reports</a></li>
          <li class="breadcrumb-item active" aria-current="page">Kickback Contract</li>
        </ol>
      </div>

    </div>
  </div>

  <div class="card ibox-content">
    <div class="panel blank-panel">
      <div class="panel-heading">

        <div class="row mb-3">
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn btn-primary btn-sm">Total: {{kickbackContract}}
            </button>
            <span class="text-muted text2">All Contract</span>
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn yellow-bg  btn-sm">Total: 0
            </button>
            <span class="text-muted text2">Contanier</span>
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn blue-bg btn-sm">Total: {{kickbackQty}}
            </button>
            <span class="text-muted text2">Quantity </span>
          </div>
          <div class="col-sm-3 col-md-3">
            <button type="button" class="btn btn-primary  btn-sm">Total: {{kickbackDispatch}}
            </button>
            <span class="text-muted text2">Dispatch </span>
          </div>

        </div>


        <form #filterForm="ngForm" novalidate>
          <div  [ngClass]="status ? 'add' : 'remove'">
          <div class="card">


          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Buyer Name:</label>
                <ng-select placeholder="Buyer Name" name="buyerId" [(ngModel)]="data5.buyerId" #buyerId="ngModel">
                  <ng-option *ngFor="let i of buyer" [value]="i.id">
                    {{i.buyerName}}
                  </ng-option>
                </ng-select>
              </div>

              <div class="form-group col-md-4 ">
                <label for="description">Seller Name:</label>
                <ng-select placeholder="Seller Name" name="sellerId" [(ngModel)]="data5.sellerId"
                  #sellerId="ngModel">
                  <ng-option *ngFor="let i of seller" [value]="i.id">
                    {{i.sellerName}}
                  </ng-option>
                </ng-select>

              </div>
              <div class="form-group col-md-4">
                <label for="description">Auto Contract#:</label>
                <input type="text" placeholder="Contract Number" name="autoContractNumber"
                  [(ngModel)]="data5.autoContractNumber" #autoContractNumber="ngModel" class="form-control text-w-4">
              </div>


          </div>

          <div class="row p-2">

              <div class="form-group col-md-4">
                <label for="description">Start Date:</label>
                <input class="form-control" ngbDatepicker #reminderDate2="ngbDatepicker" (click)="reminderDate2.toggle()"
                placeholder="Contract start Date" name="contractUpDate" name="contractDate"
                [(ngModel)]="data5.startContractDate" #contractDate="ngModel" />
              </div>
              <div class="form-group col-md-4">
                <label for="description">End Date:</label>

                  <input class="form-control" ngbDatepicker #reminderDate3="ngbDatepicker" (click)="reminderDate3.toggle()"
                  placeholder="Contract end Date" name="contractUpDate" name="contractDate"
                  [(ngModel)]="data5.endContractDate" #contractDate="ngModel" />

              </div>



          </div>
        </div>
      </div>
          <div class="row">
            <div class="col-md-12">
              <div class="form-group row mt-3">
                <div class="col-md-2 ml-8">
                  <button class="btn btn-outline-secondary pull-left btn-xs "><i class="fas fa-sync"></i>
                    Clear
                  </button>

                </div>

                <div class="col-md-4 ">
                  <button type="button" class="btn btn-primary btn-sm float-right" (click) = "kickbackContractReport2()" >
                    Search Contract
                  </button>
                </div>
                <div class="col-md-6 mb-1">
                <button type="button" class="btn btn-primary btn-sm ml-md-2 float-right"  (click)="clickEvent()"> Advance Filter <i class="fas fa-search fa-fw mr-2"></i></button>
                </div>

              </div>
            </div>
          </div>



        </form>


        <div class="row">
          <div class="col-md-12 mb-3">
            <div class="row justify-content-end">
              <div class="col-md-4 pr-0">

                <div class="form-group row">
                  <label for="inputSearch" class="col-sm-3 col-form-label">Search:</label>
                  <div class="col-sm-9">
                    <input type="text" class="input form-control form-control-sm" (keyup) = "kickbackSearch($event)" />
                  </div>
                </div>

                <!-- <div class="input-group col-md-offset-3">
                    <input type="text" placeholder="Search by City Name or Country" class="input form-control w-50"
                      (keyup)="search($event)" />
                  </div> -->

              </div>

              <div class="html5buttons mrg-tsm">
                <div class="dt-buttons btn-group btn-group-sm">
                  <!-- <a class="btn btn-default buttons-copy buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Copy</span></a> -->
                  <!-- <a class="btn btn-default buttons-csv buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>CSV</span></a> -->
                  <a class="btn btn-default buttons-excel buttons-html5 bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0" (click) = "kickbackExcelFile()"><span>Excel</span></a>
                  <!-- <a class="btn btn-default buttons-print bg-white" tabindex="0"
                    aria-controls="DataTables_Table_0"><span>Print</span></a> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card shadow mb-4">
        <div class="card-body">
          <div class="panel-body">

            <ngx-datatable #myTable class="bootstrap" [sorts]="[{ prop: 'id,name', dir: 'desc' }]" [columns]="columns"
            [rows]="kickbackReport" [columnMode]="'force'" [headerHeight]="50"
            [footerHeight]="30"
            [rowHeight]="50"
            [scrollbarH]="true"
            [scrollbarV]="true"
           style="height: 500px;">

            <ngx-datatable-column name="Age" prop="name" [width]="60">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <span class="badge badge-primary">{{row.age}}</span>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Contract#" [width]="100">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <button class="clr" (click) = "navigateEditContract(row)" >  {{row.contractNo}}</button><small *ngIf="loggedInDepartmentName =='Yarn Local Karachi'">({{row.manualContractNumber}})</small>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer" [width]="320">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.buyerName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Seller" [width]="320">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.sellerName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Date" [width]="80">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.date }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="PO#" [width]="80">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.poNumber }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Article" [width]="100">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.articleName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Rate" [width]="80">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>      {{ row.rate }} / {{row.rateUOMName}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Container" [width]="100">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              {{row.containerCount}}  {{ row.containerName }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Qty Unit" [width]="70">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.quantityUOMName }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Booking" [width]="70">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.booking }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Dispatch" [width]="70">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.dispatch }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Balance" [width]="70">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.balanceQty }}   {{ row.quantityUOMName }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Cost" [width]="60">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <b *ngIf = "row.rateCurrencyName == 'PKR'">RS</b>  
                <b *ngIf = "row.rateCurrencyName == 'USD'">$</b> 
                <b *ngIf = "row.rateCurrencyName == 'EUR'">€</b> 
                <b *ngIf = "row.rateCurrencyName == 'GBP'">GBP</b>     {{ row.cost }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Seller Comm" [width]="100">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.sellerCommission }} %
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Buyer Comm" [width]="100">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.buyerCommission }} %
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Payment Term S|B" [width]="120">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <!-- {{ row.details }} -->
                {{row.paymentTerms}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Kickback" [width]="80">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.kickbackCommission }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Kickback Info" [width]="80">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.kickbackCommissioninfo }}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Status" [width]="60">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <span class="badge badge-primary">{{row.status}}</span>
              </ng-template>
            </ngx-datatable-column>
    
            
            <ngx-datatable-column name="Agent" [width]="80">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{ row.agent }}
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>
