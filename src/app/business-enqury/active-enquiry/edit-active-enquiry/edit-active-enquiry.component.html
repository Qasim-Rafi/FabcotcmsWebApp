<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "line-spin-fade" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>

<div class="content-header">

    <div class="row">
        <div class="col-sm-12 col-md-6 col-lg-8">
            <h2 class="row wrapper page-header font-weight-light"> Enquiry Detail
                <div class="ml-2 descr"> Show all the details against any selected business enquiry</div>
            </h2>
        </div>

        <div class="col-sm-12 col-md-6 col-lg-4">
            <ol class="breadcrumb flt-RnL">
                <li class="breadcrumb-item"><a href="#">Business Enquiry</a></li>
                <li class="breadcrumb-item active" aria-current="page">Enquiry Detail</li>
            </ol>
        </div>
    </div>

</div>


<!-- ---------------------------------------------------------- -->


<div class="row">

    <div class="col-md-9">
    
        <div class="card ibox-content text-muted">
    
    
            <div [ngClass]="{ noDisplay : enquiryToggle==true }">
    
                <div class="row mb-3">
                    <div class="col-md-3">
                        <h2 class="text-muted text2">{{enquiryData.autoEnquiryNumber}}</h2>
                    </div>
                    <div class="col-md-9 mrg-tsm">
    
                        <span class="text-muted text2">{{enquiryData.buyerName}}</span>
    
                        <button type="button" class="btn btn-outline-primary btn-sm float-right"
                            (click)="enquiryToggle = ! enquiryToggle ; getEnquiryData(objEnquiry); ">
                            <i class="fa fa-plus"></i> Edit Enquiry</button>
                    </div>
                </div>
    
                <div class="row">
                    <div class="col-md-6">
                        <dl class="row">
                            <dt class="col-sm-6"> Status:</dt>
                            <dd class="col-sm-6">
                                <span class="badge badge-primary" *ngIf="enquiryData.active == true">Active</span>
                                <span class="badge badge-secondary" *ngIf="enquiryData.active==false">Closed</span>
                            </dd>
                        </dl>
                    </div>
    
                    <div class="col-md-6">
                        <dl class="row">
                            <dt class="col-sm-4"> Enquiry Date:</dt>
                            <dd class="col-sm-8 text_Navy"><i class="far fa-clock"></i> &nbsp; {{enquiryData.enquiryDate}} <span class="badge badge-warning">{{enquiryData.enquiryAge}} D</span></dd>
                        </dl>
                    </div>
                </div>


                <div class="row border-bottom">
                    <div class="col-md-6">
                        
                        <dl class="row">
                            <dt class="col-sm-6"> Enquiry Created:</dt>
                            <dd class="col-sm-6">{{userName}} </dd>
                        
                            <dt class="col-sm-6"> Last Updated:</dt>
                            <dd class="col-sm-6">{{userName}} </dd>
                        </dl>
                    </div>
    
                    <div class="col-md-6">
    
                        <dl class="row">
                            <dt class="col-sm-4"> Created on:</dt>
                            <dd class="col-sm-8"><i class="far fa-calendar-alt"></i> &nbsp; {{enquiryData.createdDateTime}} <span class="badge badge-primary">{{enquiryData.enquiryAge}} D</span></dd>
                        
                            <dt class="col-sm-4"> Updated on:</dt>
                            <dd class="col-sm-8"><i class="far fa-calendar-alt"></i> &nbsp; {{enquiryData.updatedDateTime}}  <span class="badge badge-primary">{{enquiryData.enquiryAge}} D</span></dd>
                        </dl>
                    </div>
                </div>
    
                <div class="row border-bottom mt-3">
                    <div class="col-md-6">
    
                        <dl class="row">
                            <dt class="col-sm-6"> Article:</dt>
                            <dd class="col-sm-6">{{enquiryData.articleName}}</dd>
                        
                            <dt class="col-sm-6"> Design Type:</dt>
                            <dd class="col-sm-6">{{enquiryData.designTypeName}}</dd>
                        
                            <dt class="col-sm-6"> Shipment Dates:</dt>
                            <dd class="col-sm-6">{{enquiryData.shipmentdates}}</dd>
                        </dl>
                    </div>
    
    
                    <div class="col-md-6">
    
                        <dl class="row">
                            <dt class="col-sm-4"> Process:</dt>
                            <dd class="col-sm-8">{{enquiryData.processName}}</dd>
                        
                            <dt class="col-sm-4">Process Type:</dt>
                            <dd class="col-sm-8">{{enquiryData.processTypeName}}</dd>
                        
                            <dt class="col-sm-4"> Packaging:</dt>
                            <dd class="col-sm-8">{{enquiryData.packagingName}}</dd>
                        </dl>
                    </div>
                </div>
            </div>
    

            <form #buyerForm="ngForm" novalidate>
            <div class="row">
               
                <div  class="col-md-12 border-bottom pb-3" [ngClass]="{ noDisplay : enquiryToggle==false }">
                    <div class="form-group row">
                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Buyer Name<span
                            class="required-denote">*</span></label>
                        <div class="col-md-6">
    
                            <ng-select required [(ngModel)]="enquiryData.buyerId" placeholder="-- Select --"
                            #buyerId="ngModel" [ngClass]="{ error: buyerId.invalid && buyerForm.submitted }" name="buyerId">
                                <ng-option *ngFor="let i of buyer" [value]="i.id">{{ i.buyerName }}
                                </ng-option>
                            </ng-select>
    
                        </div>
                    </div>
    
    
                    <div class="form-group row">
                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Article Name</label>
                        <div class="col-md-6">
    
                            <ng-select [(ngModel)]="enquiryData.articleId" placeholder="-- Select --" name="articleId"
                                #articleId="ngModel">
                                <ng-option *ngFor="let i of article" [value]="i.id">{{ i.name }}
                                </ng-option>
                            </ng-select>
    
    
                        </div>
                    </div>
    
    
                    <div class="form-group row">
                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Process</label>
                        <div class="col-md-6">
    
                            <ng-select [(ngModel)]="enquiryData.processId" placeholder="-- Select --" name="processId"
                                #processId="ngModel">
                                <ng-option *ngFor="let i of process" [value]="i.id">{{ i.name }}
                                </ng-option>
                            </ng-select>
    
    
                        </div>
                    </div>
    
                    <div class="form-group row">
                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Process Type</label>
                        <div class="col-md-6">
    
                            <ng-select [(ngModel)]="enquiryData.processTypeId" placeholder="-- Select --"
                                name="processTypeId" #processTypeId="ngModel">
                                <ng-option *ngFor="let i of ptype" [value]="i.id">{{ i.type }}
                                </ng-option>
                            </ng-select>
    
                        </div>
                    </div>
    
    
                    <div class="form-group row">
                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Design Type</label>
                        <div class="col-md-6">
    
                            <ng-select [(ngModel)]="enquiryData.designTypeId" placeholder="-- Select --" name="designTypeId"
                                #designTypeId="ngModel">
                                <ng-option *ngFor="let i of design" [value]="i.id">{{ i.type }}
                                </ng-option>
                            </ng-select>
    
    
                        </div>
                    </div>
    
    
    
                    <div class="form-group row">
                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Packaging</label>
                        <div class="col-md-6">
    
                            <ng-select [(ngModel)]="enquiryData.packagingId" placeholder="-- Select --" name="packagingId"
                                #packagingId="ngModel">
                                <ng-option *ngFor="let i of packing" [value]="i.id">{{ i.name }}
                                </ng-option>
                            </ng-select>
    
                        </div>
                    </div>
    
    
    
                    <div class="form-group row">
                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Shipment Dates</label>
                        <div class="col-md-6">
                            <div class="input-group">
                                <textarea class="form-control" rows="3" type="text" [(ngModel)]="enquiryData.shipmentdates"
                                    name="shipmentdates"></textarea>
                            </div>
                        </div>
                    </div>
                
    
                    <button class="btn btn-light float-right mx-2 "
                        (click)=" enquiryToggle = !enquiryToggle"> Close</button>
                    <button class="btn btn-primary float-right" type="submit"
                        (click)=" addEnquiryBuyerDetails() "> Save</button>
                        
                </div>
            
            </div>
        </form>
    
    
            <div class="row pt-4">
                <div class="col-md-12">
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist" class="nav nav-pills">

                            <a class="nav-item nav-link navlinkpdg active mb-1" id="nav-pricing-tab" data-toggle="tab" href="#nav-pricing"
                                role="tab" aria-controls="nav-pricing" aria-selected="true">Pricing Details</a>

                            <a class="nav-item nav-link navlinkpdg mb-1" id="nav-enquiryItems-tab" data-toggle="tab" href="#nav-enquiryItems"
                                role="tab" aria-controls="nav-enquiryItems" aria-selected="false">Enquiry Items <span class="badge badge-primary">{{enquiryData.enquiryItemList.length}}</span></a>
                            
                            <a class="nav-item nav-link navlinkpdg mb-1" id="nav-enquiry-tab" data-toggle="tab" href="#nav-enquiry"
                                role="tab" aria-controls="nav-enquiry" aria-selected="false">Enquiry Remarks </a>

                            <a class="nav-item nav-link navlinkpdg mb-1" id="nav-vendor-tab" data-toggle="tab" href="#nav-vendor" role="tab"
                                aria-controls="nav-vendor" aria-selected="false">Vendor Details</a>

                            <a class="nav-item nav-link navlinkpdg mb-1" id="nav-order-tab" data-toggle="tab" href="#nav-order" role="tab"
                                aria-controls="nav-order" aria-selected="false">Order Details</a>

                            <a class="nav-item nav-link navlinkpdg mb-1" id="nav-notes-tab" data-toggle="tab" href="#nav-notes"
                                role="tab" aria-controls="nav-notes" aria-selected="false">Notes / Activities <span class="badge badge-primary">{{enquiryData.enquiryNoteList.length}}</span> </a>
                        </div>
                    </nav>

                    <div class="tab-content pt-3" id="nav-tabContent">


                        <!-- --------------------------- Tab 1 -------------------------- -->
                        <div class="tab-pane fade show active" id="nav-pricing" role="tabpanel" aria-labelledby="nav-pricing-tab">

                            <div class="row">
                                <div class="col-md-12" [ngClass]="{ noDisplay : currencyToggle==true }">
    
                                    <dl class="row">
                                        <dt class="col-sm-3"> Currency:</dt>
                                        <dd class="col-sm-9">{{enquiryData.currencyCode}}</dd>
                                    
                                        <dt class="col-sm-3">Quantity:</dt>
                                        <dd class="col-sm-9">{{enquiryData.totalQuantityInString}}</dd>
                                    
                                        <dt class="col-sm-3"> Payment terms:</dt>
                                        <dd class="col-sm-9">{{enquiryData.paymentTermName}}</dd>
                                    
                                        <dt class="col-sm-3">Price terms:</dt>
                                        <dd class="col-sm-9">{{enquiryData.priceTermName}}</dd>
                                    
                                        <dt class="col-sm-3">Supplier Commission:</dt>
                                        <dd class="col-sm-9">{{enquiryData.sellerSideCommission}}%</dd>
                                    
                                        <dt class="col-sm-3"> Buyer Commission:</dt>
                                        <dd class="col-sm-9">{{enquiryData.buyerSideCommission}}% 

                                            <button class="btn btn-outline-primary float-right btn-sm"
                                        (click)="currencyToggle = !currencyToggle"> Edit</button>

                                        </dd>
                                    </dl>
                                </div>
                            </div>
    
    
                                <form #priceForm="ngForm" novalidate  >
                            <div class="row">
                                <div class="col-md-12 py-3" [ngClass]="{ noDisplay : currencyToggle==false }">
                                    <div class="form-group row">
                                        <label for="inputEmail3"
                                            class="col-md-3 col-form-label control-label">Currency</label>
                                        <div class="col-md-6">
    
                                            <ng-select [(ngModel)]="enquiryData.currencyId" placeholder="-- Select --"
                                                name="currencyId" #currencyId="ngModel">
                                                <ng-option *ngFor="let i of currency" [value]="i.id">{{ i.code }}
                                                </ng-option>
                                            </ng-select>
    
                                        </div>
                                    </div>
    
                                    <!-- <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Total Quantity</label>
                                        <div class="col-md-3">
                                            <div class="input-group">
                                                <input class="form-control"  [ngClass]="{'error': totalQuantity.invalid }" type="number" min="0"  #totalQuantity="ngModel"
                                                    [(ngModel)]="enquiryData.totalQuantity" name="totalQuantity" />
                                            </div>
                                        </div>
                                        <div class="col-md-3">
    
                                            <ng-select [(ngModel)]="enquiryData.uomId" placeholder="-- Select --" 
                                                name="uomId" #uomId="ngModel">
                                                <ng-option *ngFor="let i of uom" [value]="i.id">{{ i.name }}
                                                </ng-option>
                                            </ng-select>
    
                                        </div>
                                    </div> -->
    
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Payment Terms</label>
                                        <div class="col-md-2">
                                            <div class="input-group">
                                                <ng-select [(ngModel)]="enquiryData.paymentTermId"
                                                    placeholder="-- Select --" name="paymentTermId"
                                                    #paymentTermId="ngModel">
                                                    <ng-option *ngFor="let i of payment" [value]="i.id">{{ i.term }}
                                                    </ng-option>
                                                </ng-select>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="input-group">
                                                <input class="form-control" type="number" min="0"
                                                    [(ngModel)]="enquiryData.paymentTermDays" name="paymentTermDays" />
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <input class="form-control" type="text" placeholder="Additional Information"
                                                [(ngModel)]="enquiryData.paymentTermInfo" name="paymentTermInfo" />
                                        </div>
                                    </div>
    
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Price terms</label>
    
                                        <div class="col-md-3">
    
                                            <ng-select [(ngModel)]="enquiryData.priceTermId" placeholder="-- Select --"
                                                name="priceTermId" #priceTermId="ngModel">
                                                <ng-option *ngFor="let i of price" [value]="i.id">{{ i.term }}
                                                </ng-option>
                                            </ng-select>
    
                                        </div>
    
                                        <div class="col-md-3">
    
                                            <ng-select [(ngModel)]="enquiryData.destinationId" placeholder="-- Select --"
                                                name="destinationId" #destinationId="ngModel">
                                                <ng-option *ngFor="let i of city" [value]="i.id">{{ i.name }}
                                                </ng-option>
                                            </ng-select>
    
                                        </div>
                                    </div>
    
    
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Suppiler Commission</label>
    
                                        <div class="col-md-6">
                                            <div class="row">
    
                                                <div class="col-md-4">
                                                    <div class="input-group">
                                                        <input type="text" placeholder="Comm%" class="form-control"
                                                            name="sellerSideCommission"
                                                            [(ngModel)]="enquiryData.sellerSideCommission"
                                                            name="sellerSideCommission">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text" id="basic-addon2">per</span>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="col-md-4 mrg-sm1">
                                                    <ng-select [(ngModel)]="enquiryData.sellerSideCommissionUOMId"
                                                        placeholder="-- Select --" name="sellerSideCommissionUOMId"
                                                        #sellerSideCommissionUOMId="ngModel">
                                                        <ng-option *ngFor="let i of uom" [value]="i.id">{{ i.name }}
                                                        </ng-option>
                                                    </ng-select>
                                                </div>
    
                                                <div class="col-md-4 mrg-sm1">
                                                    <input type="text" placeholder="Additional Info." class="form-control"
                                                        [(ngModel)]="enquiryData.sellerSideCommissionInfo"
                                                        name="sellerSideCommissionInfo">
                                                </div>
                                            </div>
                                            <small id="passwordHelpBlock" class="form-text text-lightgrey">
                                                FabCot Seller Side Commission in %age, if UOM not selected
                                            </small>
                                        </div>
                                    </div>
    
                                    <div class="form-group row">
                                        <label for="code" class="col-md-3 col-form-label control-label">Buyer Commission</label>
    
                                        <div class="col-md-6">
                                            <div class="row">
    
                                                <div class="col-md-4">
                                                    <div class="input-group">
                                                        <input type="text" placeholder="Comm%" class="form-control"
                                                            name="buyerSideCommission"
                                                            [(ngModel)]="enquiryData.buyerSideCommission">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text" id="basic-addon2">per</span>
                                                        </div>
                                                    </div>
                                                </div>
    
                                                <div class="col-md-4 mrg-sm1">
                                                    <ng-select [(ngModel)]="enquiryData.buyerSideCommissionUOMId"
                                                        placeholder="-- Select --" name="buyerSideCommissionUOMId"
                                                        #buyerSideCommissionUOMId="ngModel">
                                                        <ng-option *ngFor="let i of uom" [value]="i.id">{{ i.name }}
                                                        </ng-option>
                                                    </ng-select>
                                                </div>
    
                                                <div class="col-md-4 mrg-sm1">
                                                    <input type="text" placeholder="Additional Info." class="form-control"
                                                        name="buyerSideCommissionInfo"
                                                        [(ngModel)]="enquiryData.buyerSideCommissionInfo">
                                                </div>
                                            </div>
                                            <small id="passwordHelpBlock" class="form-text text-lightgrey">
                                                FabCot Buyer Side commission in %age, if UOM not selected
                                            </small>
                                        </div>
                                    </div>
    
                                    
                                    <button class="btn btn-primary float-right ml-1 btn-sm" (click)=" addEnquiryPaymentDetails()">Save</button>

                                    <button class="btn btn-light float-right btn-sm" (click)="currencyToggle = !currencyToggle">Close</button>
                            </div>
                                    </div>
                                    </form>
    
                        </div>

                        <!-- --------------------------- Enquiry Items Tab -------------------------- -->
                        <div class="tab-pane fade" id="nav-enquiryItems" role="tabpanel" aria-labelledby="nav-enquiryItems-tab">
                            <div class="row my-4">

                                <div class="col-md-6">
                                    <form action="simple-results.html">
                                        <div class="input-group input-group-sm">
                                            <input type="search" class="form-control" placeholder="Item Description here..." (keyup)="itemSearch($event)">
                                            <div class="input-group-append">
                                                <button type="submit" class="btn btn-default">
                                                    <i class="fa fa-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="col-md-6">

                                <button type="button" class="btn btn-primary btn-sm float-right"
                                    (click)="addEnquiryItemform('AddEnquiryItem', objEnquiry)">
                                    <i class="fa fa-plus"></i> &nbsp;Add Enquiry Item</button>
<!-- 
                                    <button type="button" class="btn btn-primary btn-sm float-right mx-2">
                                    <i class="fa fa-plus"></i> &nbsp;Add Bulk Quote</button> -->

                                </div>
                            </div>
                            
                            <div class="row pb-3" *ngFor="let obj of enquiryData.enquiryItemList ; let x = index">

                                <div class="col-md-12">
                                    <div class="row border-bottom py-3">

                                    
                                <div class="col-md-1 col-sm-3 col-xs-3 forum-info" data-original-title="POCs">
                                    <div class="poc-icon">
                                        <a (click)="fetch2(obj)" class="faq-question text-muted text-s-lg text-w-3" data-toggle="collapse" role="button"
                                            href="#enquiryItemList-{{ x }}" aria-expanded="false" aria-controls="collapseExample">
                                            <span class="fa fa-expand-alt"></span>{{obj.vendorQuotationList.length}}</a>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <a class="faq-question ">{{obj.description}}</a>
                                    <div class="small mb-1"><span class="text_Navy">{{obj.colorName}}</span> {{ obj.compositionPercentage|number:'1.3'}}%
                                        {{obj.compositionFebricTypeName}}
                                        | {{obj.construction }}
                                        Size: {{obj.size}} </div>
                                    <div class="small">Added by <strong>{{obj.createdByName}} </strong>
                                        <div class="m-l-lg" style="display: inline-block;">
                                            <i class="far fa-clock"></i> Date : {{obj.createdDateTime}}
                                        </div>
                                    </div>
                                </div>
            
                                <div class="col-md-3">
                                    <div class="ibox-tools">
                                        <button type="button" class="btn editIconBack" data-toggle="tooltip" data-placement="top"
                                            title="" data-original-title="Edit" (click)=" addQuotationform('addQuotation', obj ) ">
                                            <i class="fas fa-paperclip"></i>
                                        </button>
                                        <button type="button" class="btn editIconBack" data-toggle="tooltip" data-placement="top"
                                            title="" data-original-title="Edit"
                                            (click)=" EditEnquiryItemform('EditEnquiryItem', obj)">
                                            <i class="far fa-edit "></i>
                                        </button>
                                        <button type="button" class="btn deleteIconBack" data-toggle="tooltip" data-placement="top"
                                            title="" data-original-title="Delete" (click)=" deleteEnquiryItem(obj)">
                                            <i class="far fa-trash-alt"></i>
                                        </button>
            
                                    </div>
                                </div>
            
            
                                <div class="col-md-2 forum-info" data-toggle="tooltip" data-placement="top" title=""
                                    style="border-left: 1px solid #d0d0d0" data-original-title="Total Contracts">
                                    <span class="views-number">{{obj.itemQuantity}}</span>
                                    <div><small>{{obj.itemUOMName}}</small></div>
                                </div>

                            </div>
                        </div>
            
                                <!-- ----------------End Of Row-------------------- -->

                                
                                    <div class="col-md-12">

                                        <div class="collapse" id="enquiryItemList-{{ x }}">
                                            <div class="card-body">
                                                <h2>Vendor Quotes</h2>
                                            </div>
        
                                                <ngx-datatable #myTable class="bootstrap" [columns]="columns" [rows]="rows" [columnMode]="'force'" *ngIf="rows.length != 0"
                                                [headerHeight]="10" [footerHeight]="50"  [rowHeight]="'auto'" [limit]="6">  
                
                                                <ngx-datatable-column name="S.No." [width]="5">
                                                  <ng-template let-rowIndex="rowIndex" let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                                    {{rowIndex + 1}}
                                                  </ng-template>
                                                </ngx-datatable-column>
                                              
                                                <ngx-datatable-column name="Vendor" [width]="5" prop="sellerName">
                                                    <ng-template let-row="row" ngx-datatable-cell-template>
                                                      {{row.sellerName}}
                                                    </ng-template>
                                                  </ngx-datatable-column>
                
                                                
                                                <ngx-datatable-column name="Price" [width]="5"  prop="rate">
                                                  <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                                    {{row.rate|number:'1.3'}} {{row.currencyName}} /{{row.uomName}}
                                                  </ng-template>
                                                </ngx-datatable-column>
                                               
                                                <ngx-datatable-column name="Validity" [width]="5"  prop="validity">
                                                  <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                                    {{row.validity}} days
                                                  </ng-template>
                                                </ngx-datatable-column>
                                               
                                                <ngx-datatable-column name="Date" [width]="6"  prop="createdDateTime">
                                                  <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                                    {{row.createdDateTime}}
                                                  </ng-template>
                                                </ngx-datatable-column>
                                        
                                                <ngx-datatable-column name="Action" [width]="5" prop="rowIndex">
                                                  <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                                    <div class="ibox-tools text-center">
                                                        <button type="button" class="btn editIconBack"
                                                            (click)="editQuotationform('editQuotation' , row, obj)">
                                                            <i class="far fa-edit"></i>
                                                        </button>
                                                        <button type="button" class="btn deleteIconBack" (click)=" deleteQuotation(row)">
                                                            <i class="far fa-trash-alt"></i>
                                                        </button>
                                                    </div>
                                                  </ng-template>
                                                </ngx-datatable-column>
                                              </ngx-datatable>
        
        
        
        
                                          
                                        </div>
                                        

                                    </div>
                                
            
                                
                                <!----------------------------------------------------------------------------->
                            </div>
    

                        </div>
    
                        <!-- ---------------------------Enquiry Remarks Tab -------------------------- -->
                        <div class="tab-pane fade" id="nav-enquiry" role="tabpanel" aria-labelledby="nav-enquiry-tab">
    
                            <div [ngClass]="{ noDisplay : remarksToggle==true }">
                                <dl class="row">
                                    <dt class="col-sm-3">Enquiry Remarks:</dt>
                                    <dd class="col-sm-9">{{enquiryData.enquiryRemarks}}</dd>
                                
                                    <dt class="col-sm-3"> Other Condition:</dt>
                                    <dd class="col-sm-9">{{enquiryData.enquiryOtherCondition}}</dd>
                                
                                    <dt class="col-sm-3">Certifications:</dt>
                                    <dd class="col-sm-9">{{enquiryData.certificateNames}}
                                        <button class="btn btn-outline-primary float-right btn-sm" (click)="remarksToggle = !remarksToggle">Edit</button>
                                    </dd>
                                </dl>
    
                            </div>
    


                            <div class="row">
                                <div class="col-md-12 py-3" [ngClass]="{ noDisplay : remarksToggle==false }">
                            
                            
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Remarks</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <textarea rows="3" class="form-control" [(ngModel)]="enquiryData.enquiryRemarks"
                                                    name="enquiryRemarks"></textarea>
                                            </div>
                                        </div>
                                    </div>
                            
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Other
                                            Conditions</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <textarea rows="3" class="form-control" [(ngModel)]="enquiryData.enquiryOtherCondition"
                                                    name="enquiryOtherCondition"></textarea>
                                            </div>
                                        </div>
                                    </div>
                            
                            
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Certificates</label>
                                        <div class="col-md-6">
                            
                                            <!-- <ng-select [multiple]="true" [(ngModel)]="enquiryData.certificateIds" placeholder="-- Select --" name="certificateIds">
                                                <ng-option *ngFor="let i of certificate" [value]="i.id">{{ i.name }}
                                                </ng-option>
                                            </ng-select> -->
                                            <ng-select [multiple]="true"  [(ngModel)]="enquiryData.certificateIds" placeholder="-- Select --" name="certificateIds">
                                                <ng-option *ngFor="let i of certificate" [value]="i.id">{{ i.name }}
                                                </ng-option>
                                            </ng-select>
                            
                                        </div>
                                    </div>
                            
                                    
                                    <button class="btn btn-primary float-right ml-1 btn-sm" (click)="addEnquiryRemarks(); remarksToggle = !remarksToggle">Save Info</button>
                                    <button class="btn btn-light float-right btn-sm" (click)="remarksToggle = !remarksToggle">Close</button>
                                    
                                </div>
                            </div>

                        </div>

                        <!-- ---------------------------Vendor Tab -------------------------- -->
                        <div class="tab-pane fade" id="nav-vendor" role="tabpanel" aria-labelledby="nav-vendor-tab">

                            <div [ngClass]="{ noDisplay : vendorToggle==true }">
                                <dl class="row">
                                    <dt class="col-sm-3"> Selected Vendor:</dt>
                                    <dd class="col-sm-9">{{enquiryData.sellerName}}</dd>
                                
                                    <dt class="col-sm-3"> Final Costing:</dt>
                                    <dd class="col-sm-9">{{enquiryData.costingDetail}}

                                        <button class="btn btn-outline-primary float-right btn-sm" (click)="vendorToggle = !vendorToggle"> Edit</button>

                                    </dd>
                                </dl>
                            </div>

    <!-- ------------------------------form---------------------- -->

                         <form #venderForm="ngForm" novalidate> 
                            <div class="row">
                                <div class="col-md-12 py-3" [ngClass]="{ noDisplay : vendorToggle==false }">
                            
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Suplier / Seller<span
                                            class="required-denote">*</span></label>
                                        <div class="col-md-6">
                            
                                            <ng-select [(ngModel)]="enquiryData.sellerId" placeholder="-- Select --" name="sellerId"
                                            [ngClass]="{'error': sellerId.invalid }" #sellerId="ngModel" required->
                                                <ng-option *ngFor="let i of vendorSeller" [value]="i.id">{{ i.sellerName }}
                                                </ng-option>
                                            </ng-select>
                            
                            
                                        </div>
                                    </div>
                            
                            
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Costing</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <textarea rows="3" class="form-control" [(ngModel)]="enquiryData.costingDetail"
                                                    name="costingDetail"></textarea>
                                            </div>
                                        </div>
                                    </div>
                            
                                    <button class="btn btn-primary float-right ml-1  btn-sm" (click)="addEnquiryVendorDetails()">Save</button>
                                    <button class="btn btn-light float-right btn-sm" (click)="vendorToggle = !vendorToggle">Close</button>
                                    
                                </div>
                            </div>
                        </form>


                        </div>
    
                        <!-- ---------------------------Order Tab -------------------------- -->
                        <div class="tab-pane fade" id="nav-order" role="tabpanel" aria-labelledby="nav-order-tab">
    
    
                            <div [ngClass]="{ noDisplay : orderToggle==true }">
                                <dl class="row">
                                    <dt class="col-sm-3">Order Confirm On:</dt>
                                    <dd class="col-sm-9">{{showConfirmOn}}</dd>
                                
                                    <dt class="col-sm-3"> Details:</dt>
                                    <dd class="col-sm-9">{{enquiryData.confirmationDetails}}

                                        <button class="btn btn-outline-primary float-right btn-sm" (click)="orderToggle = !orderToggle"> Edit</button>

                                    </dd>
                                </dl>
    
                                
                            </div>
                            
                            <form #orderForm="ngForm" novalidate>
                            <div class="row">
                                <div class="col-md-12 py-3" [ngClass]="{ noDisplay : orderToggle==false }">
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Confirmation On:<span
                                            class="required-denote">*</span></label>
                                        <div class="col-md-6">
                                            <div class="input-group"> 
                                                <input class="form-control " ngbDatepicker #validityDate="ngbDatepicker" 
                                                    (click)="validityDate.toggle()" [(ngModel)]="confirmOn" name="confirmationDate" #confirmationDate="ngModel"
                                                    [ngClass]="{ error: confirmationDate.invalid }"/>
                                            </div>
                                        </div>
                                    </div>
                            
                            
                                    <div class="form-group row">
                                        <label for="inputEmail3" class="col-md-3 col-form-label control-label">Details</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <textarea rows="3" class="form-control" [(ngModel)]="enquiryData.confirmationDetails"
                                                    name="confirmationDetails"></textarea>
                                            </div>
                                        </div>
                                    </div>

                                    
                                    <button class="btn btn-primary float-right ml-1 btn-sm" (click)="addEnquiryOrderDetails()">Save</button>
                                    <button class="btn btn-light float-right btn-sm" (click)="orderToggle = !orderToggle">Close</button>
                                    
                                </div>
                            
                            </div>
                        </form>
                        </div>

                        <!-- --------------------------- Note Tab -------------------------- -->
                        <div class="tab-pane fade" id="nav-notes" role="tabpanel" aria-labelledby="nav-notes-tab">
                        
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-primary btn-sm float-right" (click)="addNoteform('EnquiryItemAddNote', objEnquiry)">
                                    <i class="far fa-sticky-note"></i> &nbsp; Add New Note </button>
                                </div>
                            </div>
                        
                            <div class="row pt-3">
                        
                                <div class="col-md-8">
                                    <!-- <div class="dropdown">
                                        Show &nbsp;
                                        <button class="btn btn-outline-secondary btn-sm dropdown-toggle btn-sm-eqry" type="button" id="dropdownMenuButton"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            10
                                        </button>
                                        &nbsp; Entries
                                        <div class="dropdown-menu dropdown-menueqry" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" >25</a>
                                            <a class="dropdown-item" >50</a>
                                            <a class="dropdown-item" >100</a>
                                        </div>
                                    </div> -->
                                </div>
                        
                                <div class="col-md-4">
                        
                                    <form action="simple-results.html">
                                        <div class="input-group input-group-sm">
                                            <input type="search" class="form-control" placeholder="Search" (keyup)="noteSearch($event)">
                                            <div class="input-group-append">
                                                <button type="submit" class="btn btn-default">
                                                    <i class="fa fa-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                        
                                </div>
                            </div>
                        

                                <ngx-datatable #myTable class="bootstrap mt-3" [columns]="columns" [rows]="rows1" [columnMode]="'force'" *ngIf="rows1.length != 0"
                                [headerHeight]="10" [footerHeight]="50"  [rowHeight]="'auto'" [limit]="6">  

                                <ngx-datatable-column name="User" [width]="5" prop="createdByName">
                                  <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                    {{row.createdByName}}
                        
                                  </ng-template>
                                </ngx-datatable-column>
                              
                                <ngx-datatable-column name="Time" [width]="5" prop="createdDateTime">
                                    <ng-template let-row="row" ngx-datatable-cell-template>
                                      {{row.createdDateTime}}
                                    </ng-template>
                                  </ngx-datatable-column>

                                <ngx-datatable-column name="Note Details" [width]="5" prop="title">
                                  <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                                   {{row.title}} <br>
                                    {{row.description}}

                                  </ng-template>
                                </ngx-datatable-column>
                        
                                <ngx-datatable-column name="Action" [width]="5">
                                  <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                        
                                    <div class="ibox-tools text-center">
                        
                                      <button type="button" class="btn editIconBack"
                                      (click)="editNoteform('EnquiryItemEditNote', row , objEnquiry)">
                                      <i class="far fa-edit"></i>
                                  </button>
                                  <button type="button" class="btn deleteIconBack" (click)="deleteNote(row)">
                                      <i class="far fa-trash-alt"></i>
                                  </button>
                                    </div>
                                  </ng-template>
                                </ngx-datatable-column>
                        
                              </ngx-datatable>


                        </div>

                    </div>

                </div>
            </div>
    
            <!-- ----------------------------------------------------- -->
    
    
            
    
        </div>
    </div>



    <!-- --------------------------------------------------- -->
    <div class="col-md-3">
    

      


        <div class="ibox-content p-3">
        
            <div class="row mb-2">

                <div class="col-md-6">
                    <span> Next Follow-Up </span>
                </div>

                <div class="col-md-6">

                    <div [ngClass]="{ noDisplay : reminderToggle==true }">
                        <button class="btn btn-outline-secondary float-right btn-xs "><i class="fas fa-sync"></i> </button>
                        <button class="btn btn-primary float-right btn-xs mx-1" (click)="reminderToggle = !reminderToggle ">
                            <i class="fas fa-edit "></i> </button>       
                    </div>

                    <div [ngClass]="{ noDisplay : reminderToggle==false }">
                        <button class="btn btn-white float-right btn-xs" (click)="reminderToggle = !reminderToggle "><i
                                class="fas fa-times"></i> </button>
                        <button class="btn btn-primary float-right btn-xs" (click)="reminderToggle = !reminderToggle; AddReminder() ">
                            <i class="fas fa-check"></i> </button>
                    </div>
                    
                </div>

            </div>

            <div class="row">
                <div class="col-md-12">
                <div [ngClass]="{ noDisplay : reminderToggle==false }">
                        <input class="form-control" ngbDatepicker #reminderDate="ngbDatepicker" (click)="reminderDate.toggle()"
                            placeholder="Reminder" [displayMonths]="1" [(ngModel)]="enquiryData.followUpDate" />
                    </div>
                </div>


                <div class="col-md-12">
                    <div *ngFor="let reminder of enquiryData.enquiryFollowUpList ">
                        <div class=" text_Navy h4 mb-0">
            
                            {{reminder.followUpDateToDisplay}}
            
                            <button type="button" class="btn deleteIconBack" data-toggle="tooltip" data-placement="top" title=""
                                data-original-title="Delete" (click)="deleteReminder(reminder)">
                                <i class="far fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

            </div> 
        
        </div>


        <!-- <div class=" clearfix ibox-content p-3 mt-3">
        
            <span class="float-left"> Next Follow-Up </span>
        
        
        
            <div [ngClass]="{ noDisplay : reminderToggle==true }">
                <button class="btn btn-outline-secondary float-right btn-xs "><i class="fas fa-sync"></i> </button>
                <button class="btn btn-primary float-right btn-xs mx-1" (click)="reminderToggle = !reminderToggle ">
                    <i class="fas fa-edit "></i> </button>
        
                <div *ngFor="let reminder of enquiryData.enquiryFollowUpList ">
                    <div class=" text_Navy h3">
        
                        {{reminder.followUpDateToDisplay}}
        
                        <button type="button" class="btn deleteIconBack" data-toggle="tooltip" data-placement="top" title=""
                            data-original-title="Delete" (click)="deleteReminder(reminder)">
                            <i class="far fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
        
            </div>
        
            <div [ngClass]="{ noDisplay : reminderToggle==false }">
        
                <button class="btn btn-white float-right btn-xs" (click)="reminderToggle = !reminderToggle "><i
                        class="fas fa-times"></i> </button>
                <button class="btn btn-primary float-right btn-xs" (click)="reminderToggle = !reminderToggle; AddReminder() ">
                    <i class="fas fa-check"></i> </button>
        
        
                    
                <input class="form-control" ngbDatepicker #reminderDate="ngbDatepicker" (click)="reminderDate.toggle()"
                    placeholder="Reminder" [displayMonths]="1" [(ngModel)]="enquiryData.followUpDate" />
        
                
            </div>
        
        </div> -->


        <!---------- Time Spent ---------->

        <div class="mt-3 bg-white p-3">
            Enquiry Work Completed
            <div class="mid-text">{{totalComplete}}</div>
            <div class="progress mt-1">
                <div class="progress-bar" role="progressbar" [ngStyle]="{'width': totalComplete }"  aria-valuenow="75"
                    aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div class="text_Navy mt-2">19-Dec-2016 11:50</div>

        </div>

        <!-- <div class="bg-primary mt-3 rounded-lg">
                
            <div class="row p-3">
                <div class="col-md-4 ">
                    <i class="far fa-clock fa-2x"></i> 
                </div>

                <div class="col-md-8 text-right">
                    <span>Time Spent</span>
                    <div class="h2">
                        0 
                        <span class="text-small">Hr</span>
                        0 
                        <span class="text-small">Min</span>
                    </div>
                   
                </div>
            </div>
  

        </div> -->


        <div class="bg-primary mt-3 rounded-lg">
            <div class="col-md-12 p-2 text-center">
            
                <i class="far fa-clock fa-2x mr-2"></i>

                <span>Time Spent</span>
                <div class="h2 d-inline">
                    0
                    <span class="text-small">Hr</span>
                    0
                    <span class="text-small">Min</span>
                </div>
            
            
            </div>
        </div>
        

        <div class="row">
            <div class="col-md-12 mt-3">

                <button class="btn btn-outline-info btn-block btn-lg text-center  "  (click)="printPreview()">
        
                    <i class="fas fa-print"></i>
                    <span class="ml-2 text-small"  > Enquiry Preview </span>
        
                </button>

                <button class="btn btn-outline-success btn-block btn-lg text-center px-2"  (click)  = "printPreviewWithCustomer()" >
        
                    <i class="fas fa-print"></i>
                    <span class="ml-2 text-small"> Enquiry Preview w/o Customer</span>
        
                </button>

                <button class="btn btn-warning btn-block btn-lg text-center  " (click)=" statusform('EnquiryOnHold','OnHold','enquiry')" *ngIf="enquiryData.status == 'Open'">
        
                    <i class="fas fa-level-down-alt fa-md"></i>
                    <span class="ml-2 text-small"> Enquiry On-hold </span>
        
                </button>

                <button class="btn btn-danger btn-block btn-lg text-center " (click)=" statusform('EnquiryCancle','Cancel','enquiry')" *ngIf="enquiryData.status == 'Open'">
        
                    <i class="far fa-trash-alt fa-md"></i>
                    <span class="ml-2 text-small"> Enquiry Cancel </span>
        
                </button>
                <button class="btn btn-info btn-block btn-lg text-center " (click)=" statusform('EnquiryArchived', 'Archive','enquiry')"  *ngIf="enquiryData.status == 'Open'" >
        
                    <i class="fas fa-file-archive fa-md"></i>
                    <span class="ml-2 text-small "> Enquiry Archive </span>
        
                </button>
                <button class="btn btn-primary btn-block btn-lg text-center " (click)="GenerateContract()" *ngIf="enquiryData.status == 'Open' && enquiryData.showContractButton == true " 
             >
                    <i class="fas fa-file-archive fa-md"></i>
                    <span class="ml-2 text-small "> Create Contract </span>
                </button>

                <button class="btn btn-primary btn-block btn-lg text-center " *ngIf="enquiryData.status == 'OnHold'"
                (click)=" statusOpen()">
                    <i class="fas fa-file-archive fa-md"></i>
                    <span class="ml-2 text-small "> Enquiry Active </span>
                </button>
            </div>
        </div>

    </div>



</div>