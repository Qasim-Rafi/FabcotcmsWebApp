<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="line-spin-fade" [fullScreen]="true">
  <p style="color: white"> Loading... </p>
</ngx-spinner>


<div class="content-header">
    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-8">
        <h2 class="row wrapper page-header font-weight-light">
            General Search Page 
          <div class="ml-2 descr">
            Search any contract and Bill on this page.
          </div>
        </h2>
      </div>
  
      <!-- <div class="col-sm-12 col-md-6 col-lg-4">
        <ol class="breadcrumb flt-RnL">
          <li class="breadcrumb-item"><a href="#">Configuration</a></li>
          <li class="breadcrumb-item active" aria-current="page">
            Country Location
          </li>
        </ol>
      </div> -->
    </div>
  </div>


  <div class="card shadow mb-4">
    <div class="p-3 bg-color">
        <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist" class="nav nav-pills">

                <a class="nav-item nav-link navlinkpdg active mb-1" id="nav-contract-tab" data-toggle="tab" href="#nav-contract"
                    role="tab" aria-controls="nav-contract" aria-selected="true">Search Contract</a>

                <a class="nav-item nav-link navlinkpdg mb-1" id="nav-bill-tab" data-toggle="tab" href="#nav-bill"
                    role="tab" aria-controls="nav-bill" aria-selected="false">Search Bill </a>
                
     
            </div>
        </nav>
    </div>

    <div class="card-body">
        <div class="row">
            <div class="col-md-12">
              <div class="tab-content pt-3" id="nav-tabContent">
         <!-- --------------------------- Tab 1 -------------------------- -->
         <div class="tab-pane fade show active" id="nav-contract" role="tabpanel" aria-labelledby="nav-contract-tab">
            <form #filterForm="ngForm" novalidate>
            <div class="row">
                <div class="col-md-12">

                  <div class="form-group row">
                    <label for="description" class="col-md-3 col-form-label ">Auto Contract#:</label>
              
                    <div class="col-md-3">
                      <div class="input-group">
                    
                        <input type="text" placeholder="Contract Number"
                        name="autoContractNumber" [(ngModel)] = "data.autoContractNumber" #autoContractNumber = "ngModel"             class="form-control" >
            
                    </div>
                    </div>

                    <label for="description" class="col-md-2 col-form-label ">Seller Contract#:</label>
              
                    <div class="col-md-3">
                      <div class="input-group">
                    
                        <input type="text" placeholder="Seller Contract Number"
                        class="form-control" name="sellerContractNo" [(ngModel)] = "data.sellerContractNo"
                        #sellerContractNo = "ngModel" >
            
                    </div>
                    </div>
              
                  </div>


                </div>
              </div>

              <div class="row">

                <div class="col-md-12">

                 <div class="form-group row">
                  <label for="description" class="col-md-3 col-form-label ">PO Number:</label>
              
                    <div class="col-md-3">
                      <div class="input-group">
                    
                        <input type="text" placeholder="Buyer PO Number"
                        class="form-control" name="poNumber" [(ngModel)] = "data.poNumber"
                        #poNumber = "ngModel"  >
            
                    </div>
                    </div>
                  <label for="description" class="col-md-2 col-form-label ">Contract Date:</label>
              
                  <div class="col-md-3">
                    <div class="input-group">
                  
                      <input  class="form-control" ngbDatepicker #reminderDate="ngbDatepicker"
                      (click)="reminderDate.toggle()" placeholder="Contract Date"
                      name="contractUpDate"  name="contractDate" [(ngModel)] = "data.contractDate"
                      #contractDate = "ngModel"  
                       />
          
                  </div>
                  </div>

                   


            
              
                  </div> 

                </div>
                </div>


          

              
                <div class="row">

                  <div class="col-md-12">
  
                   <div class="form-group row">
                      <label for="description" class="col-md-3 col-form-label ">Buyer Name:</label>
                
                      <div class="col-md-3">
                      
                          <ng-select  placeholder="Buyer Name" name="buyerId" [(ngModel)] = "data.buyerId" #buyerId = "ngModel" >
                            <ng-option *ngFor="let i of buyer" [value]="i.id">
                              {{i.buyerName}}
                            </ng-option>
                          </ng-select>
              
                      </div>
  
                      <label for="description" class="col-md-2 col-form-label ">Seller Name:</label>
                
                      <div class="col-md-3 ">
                   
                      
                        <ng-select  placeholder="Seller Name" name="sellerId" [(ngModel)] = "data.sellerId"
                        #sellerId = "ngModel"
                        >
                        <ng-option *ngFor="let i of seller" [value]="i.id">
                          {{i.sellerName}}
                        </ng-option>
                      </ng-select>
              
                      </div>



                      

                    
  
  
              
                
                    </div> 
  
                  </div>
                  </div>

                  <div class="row">

                    <div class="col-md-12">
    
                     <div class="form-group row">
                        <label for="description" class="col-md-3 col-form-label ">Article</label>
                  
                        <div class="col-md-3">
                        
                          <ng-select  placeholder="Article" name="articleId" [(ngModel)] = "data.articleId"
                          #articleId = "ngModel" >
                            <ng-option *ngFor="let i of article" [value]="i.id">{{ i.name }}
                            </ng-option>
                  
                          </ng-select>
              
                
                        </div>
    

                  
                      </div> 
    
                    </div>
                    </div>

<!-- 
                  <div class="row">

                    <div class="col-md-12">
    
                     <div class="form-group row">
                     
    
                        <label for="description" class="col-md-3 col-form-label ">Article Name:</label>
                  
                        <div class="col-md-3 ">
                     
                        
                            <ng-select  placeholder="Article" name="articleId" [(ngModel)] = "data.articleId"
                            #articleId = "ngModel" >
                              <ng-option *ngFor="let i of article" [value]="i.id">{{ i.name }}
                              </ng-option>
                    
                            </ng-select>
                
                        </div>
    
                
                  
                      </div> 
    
                    </div>
                    </div> -->

<div class="row">
  <div class="col-md-12">
    <div class="form-group row mt-3">
      <div class="col-md-2 ml-8">
        <button class="btn btn-outline-secondary pull-left btn-xs " (click) = "clear()"><i class="fas fa-sync"></i> 
        Clear
        </button>

      </div>
 
      <div class="col-md-4 ">
        <button type="button" class="btn btn-primary btn-sm float-right"  (click) = "getSearch()"
        >
       Search Contract
      </button>
      </div>
    </div>
  </div>
</div>
      

<div class="row">
  <div class="col-md-12">
    <div class="form-group row mt-3">
      <div class="col-md-2 ml-8">
      

        <p  *ngIf="data2.length != 0"   
        >
        Contract Found : <span type="button" class="btn btn-primary btn-sm " >{{data2.length}}</span>

      </p>
      </div>
 
    </div>
  </div>
</div>
     
      </form>

      <div class="panel-body" >


        <ngx-datatable #myTable  class="bootstrap datatable-row-wrapper" [columns]="columns" [rows]="data2"
          [columnMode]="'flex'"  *ngIf="data2.length != 0" [headerHeight]="50" [footerHeight]="50" [sorts]="[{ prop: 'id', dir: 'asce' }]"
          [rowHeight]="'auto'" >

   
          <ngx-datatable-column name="Action" [width] = "100"  [flexGrow]="0.04"  >
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>

              <div class="ibox-tools text-center">

                <span  class="editIconBack1 px-1 py-1 "
                (click)="navigateEditContract(row)"
                >
                  <i class="far fa-edit edit  "></i>
                </span>

                <span type="button" class="editIconBack1 px-1 py-1" (click) = "cloneContract(row)">
                  <i class="far fa-copy"></i>
                </span>
                <span  class="editIconBack1 px-1 py-1" 
               
                >
                  <i class="fa fa-th edit"></i>
                </span>

                <span  class="deleteIconBack1 px-1 py-1" 
                (click)="deleteContract(row)"
                >
                  <i class="far fa-trash-alt edit"></i>
                </span>

              </div>
            </ng-template>
          </ngx-datatable-column>
        
          <ngx-datatable-column name="Age" prop="age" [width] = "20"  [flexGrow]="0.02"  >
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              <span class="badge badge-primary">{{row.age}}</span>
             
            </ng-template>
          </ngx-datatable-column>

       <ngx-datatable-column name="Details" [width] = "20" [flexGrow]="0.07"   prop="autoContractNumber">
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
      
            <button class="btn btn-outline-secondary  btn-xs "  (click) = "navigate(row)"> 
              {{row.contractNo}}
              </button>
              <br>
             <b>B:  {{row.buyerName}}  </b> <br>
             <b> S:  {{row.sellerName}}  </b>
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="Dated" prop="date" [width] = "20"  [flexGrow]="0.04"  prop="contractOn">
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              {{row.date}}
              
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="#PO" prop="poNumber" [width] = "20" [flexGrow]="0.03"   prop="poNumber">
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              {{row.poNumber}}
            
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="#Bill No#"  [width] = "20" [flexGrow]="0.05"  prop="billNumber">
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              {{row.billNumber}}
             
            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="Article/Const." prop="articleName" [width] = "10"  [flexGrow]="0.06"  prop="articleName">
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              {{row.articleName}}
              

            </ng-template>
          </ngx-datatable-column>

          <ngx-datatable-column name="Status" prop="status" [width] = "10"  [flexGrow]="0.04"  prop="articleName">
            <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
              <!-- {{row.status}} -->
              <span class="badge badge-primary">{{row.status}}</span>
              

            </ng-template>
          </ngx-datatable-column>

        </ngx-datatable>
      </div>



        </div> 

<!--   ---------------------------      TAB 2            -------------------------------->

          <div class="tab-pane fade " id="nav-bill" role="tabpanel" aria-labelledby="nav-bill-tab">

            <form #filterForm2="ngForm" novalidate>
              <div class="row">
                  <div class="col-md-12">
  
                    <div class="form-group row">
                      <label for="description" class="col-md-3 col-form-label ">Auto Contract #:</label>
                
                      <div class="col-md-3">
                        <div class="input-group">
                      
                          <input type="text" placeholder="Contract Auto Number" name="contractNo" [(ngModel)] = "billSearch.contractNo" #contractNo = "ngModel"
                          class="form-control" >
              
                      </div>
                      </div>
  
                      <label for="description" class="col-md-2 col-form-label ">Bill Number:</label>
              
                      <div class="col-md-3">
                        <div class="input-group">
                      
                          <input type="text" placeholder="Bill No" name="billNumber" [(ngModel)] = "billSearch.billNumber" #billNumber = "ngModel"
                                                                class="form-control" >
              
                      </div>
                      </div> 
                
                    </div>
  
  
                  </div>
                </div>
  
           
  
  
                <div class="row">
  
                  <div class="col-md-12">
  
                   <div class="form-group row">
                      <label for="description" class="col-md-3 col-form-label ">Buyer Name:</label>
                
                      <div class="col-md-3">
                          
                        <ng-select  placeholder="Buyer Name" name="buyerId" [(ngModel)] = "billSearch.buyerId" #buyerId = "ngModel" >
                          <ng-option *ngFor="let i of buyer" [value]="i.id">
                            {{i.buyerName}}
                          </ng-option>
                        </ng-select>
                      </div>
  
                      <label for="description" class="col-md-2 col-form-label ">Seller Name:</label>
                
                      <div class="col-md-3 ">
                   
                        <ng-select  placeholder="Seller Name" name="sellerId" [(ngModel)] = "billSearch.sellerId" #sellerId = "ngModel"
                        >
                        <ng-option *ngFor="let i of seller" [value]="i.id">
                          {{i.sellerName}}
                        </ng-option>
                      </ng-select>


                      </div>
  
  
              
                
                    </div> 
  
                  </div>
                  </div>
  
                
               
  
  <div class="row">
    <div class="col-md-12">
      <div class="form-group row mt-3">
        <div class="col-md-2 ml-8">
          <button class="btn btn-outline-secondary pull-left btn-xs " (click) = "clear2()"><i class="fas fa-sync"></i> 
          Clear
          </button>
  
        </div>
        <div class="col-md-4 ">
          <button type="button" class="btn btn-primary btn-sm float-right" (click) = "getBill()"
          >
         Search Contract
        </button>
        </div>
      </div>
    </div>
  </div>
        



  <div class="row">
    <div class="col-md-12">
      <div class="form-group row mt-3">
        <div class="col-md-2 ml-8">
        
  
          <p  *ngIf="billSearch2.length != 0"   
          >
          Contract Found : <span type="button" class="btn btn-primary btn-sm " >{{billSearch2.length}}</span>
  
        </p>
        </div>
   
      </div>
    </div>
  </div>

          
        </form>


        <div class="panel-body" >


          <ngx-datatable #myTable  class="bootstrap datatable-row-wrapper" [columns]="columns" [rows]="billSearch2"
            [columnMode]="'flex'" *ngIf = "billSearch2.length !=0"   [headerHeight]="50" [footerHeight]="50" [sorts]="[{ prop: 'id', dir: 'asce' }]"
            [rowHeight]="'auto'">
  
     
            <ngx-datatable-column name="Action" [width]="80" prop="name" [flexGrow]="0.02">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <div class="ibox-tools text-center">
                  <button type="button" class="btn editIconBack px-1 py-1" data-toggle="tooltip" data-placement="top" title=""
                    data-original-title="Edit" ><i
                      class="far fa-edit"></i></button>
              
                </div>
              </ng-template>
            </ngx-datatable-column>
          
            <ngx-datatable-column name="Age" prop="age" [width] = "20"  [flexGrow]="0.02"  >
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <span class="badge badge-primary">{{row.age}}</span>
               
              </ng-template>
            </ngx-datatable-column>
  
         <ngx-datatable-column name="Details" [width] = "20" [flexGrow]="0.07"   prop="autoContractNumber">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
        
              <button class="btn btn-outline-secondary  btn-xs "  (click) = "navigate(row)"> 
                {{row.contractNo}}
                </button>
                <br>
               <b>B:  {{row.buyerName}}  </b> <br>
               <b> S:  {{row.sellerName}}  </b>
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="Dated" prop="date" [width] = "20"  [flexGrow]="0.04"  prop="contractOn">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.date}}
                
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="#PO" prop="poNumber" [width] = "20" [flexGrow]="0.03"   prop="poNumber">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.poNumber}}
              
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="#Bill No#"  [width] = "20" [flexGrow]="0.05"  prop="billNumber">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.billNumber}}
               
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="Article/Const." prop="articleName" [width] = "10"  [flexGrow]="0.06"  prop="articleName">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                {{row.articleName}}
                
  
              </ng-template>
            </ngx-datatable-column>
  
            <ngx-datatable-column name="Status" prop="status" [width] = "10"  [flexGrow]="0.04"  prop="articleName">
              <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
                <!-- {{row.status}} -->
                <span class="badge badge-primary">{{row.status}}</span>
                
  
              </ng-template>
            </ngx-datatable-column>
  
          </ngx-datatable>
        </div>

         

    <!-- </div>  -->
</div>
</div>
</div>
</div>
    </div>